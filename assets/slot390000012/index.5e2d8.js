System.register("chunks:///_virtual/AnimatedSymbol2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NumberCurrency.ts","./SubGameData18.ts"],(function(i){var t,n,e,a,o,l,s,r,h,c,m,u,b,p,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized,o=i.createClass},function(i){l=i.cclegacy,s=i._decorator,r=i.sp,h=i.Sprite,c=i.Vec3,m=i.Tween,u=i.tween,b=i.Component},function(i){p=i.NumberCurrency},function(i){d=i.SubGameData}],execute:function(){var y,g,S,_,f,v,k,H,I,D,C,A,w,N,F;l._RF.push({},"2b186d4sllJYLPn0ROQvWju","AnimatedSymbol",void 0);var L=s.ccclass,M=s.menu,P=s.property,z=((y={})[1]={scale:1.77,animationsHash:{hit:"animation1"}},y[2]={scale:2,animationsHash:{hit:"animation"}},y[3]={scale:2,animationsHash:{hit:"animation"}},y[4]={scale:2,animationsHash:{hit:"animation"}},y[5]={scale:2,animationsHash:{hit:"animation"}},y[6]={animationsHash:{hit:"animation"}},y[7]={animationsHash:{hit:"animation"}},y[8]={animationsHash:{hit:"animation"}},y[9]={animationsHash:{hit:"animation"}},y[10]={animationsHash:{hit:"animation"}},y[11]={animationsHash:{hit:"animation"}},y[12]={scale:2,animationsHash:{hit:"animation"}},y[13]={scale:2,animationsHash:{uncover:"animation5",collect:"animation8",idle:"animation6"}},y[14]={scale:2,animationsHash:{uncover:"animation1",collect:"animation7",idle:"animation2"}},y[15]={scale:2,animationsHash:{uncover:"animation3",collect:"animation9",idle:"animation4",appear:"animation10",highlight:"animation11"}},y[16]={scale:2,animationsHash:{uncover:"animation3",collect:"animation9",idle:"animation4",appear:"animation10",highlight:"animation11"},bonusSpriteFrameName:"theme277_s_r301"},y[17]={scale:2,animationsHash:{uncover:"animation3",collect:"animation9",idle:"animation4",appear:"animation10",highlight:"animation11"},bonusSpriteFrameName:"theme277_s_r302"},y[18]={scale:2,animationsHash:{uncover:"animation3",collect:"animation9",idle:"animation4",appear:"animation10",highlight:"animation11"},bonusSpriteFrameName:"theme277_s_r304"},y[19]={scale:2,animationsHash:{uncover:"animation3",collect:"animation9",idle:"animation4",appear:"animation10",highlight:"animation11"},bonusSpriteFrameName:"theme277_s_r303"},y);i("AnimatedSymbol",(g=L("AnimatedSymbol"),S=M(d.module+"/elements/AnimatedSymbol"),_=P(r.Skeleton),f=P(h),v=P(p),k=P(r.Skeleton),H=P({type:[r.SkeletonData],visible:!0}),g(I=S((C=t((D=function(i){function t(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o))||this,e(t,"symbolSkeleton",C,a(t)),e(t,"bonusSprite",A,a(t)),e(t,"scoreNumberCurrency",w,a(t)),e(t,"highlightSkeleton",N,a(t)),e(t,"_symbolSkeletonDatasList",F,a(t)),t.row=-1,t.column=-1,t._symbolID=0,t._freeMode=!1,t._collectingInfo={towerPosition:c.ZERO},t._highlightCallback=void 0,t}n(t,i);var l=t.prototype;return l.onLoad=function(){this.symbolSkeleton.setCompleteListener(this._onSymbolSkeletonAnimationComplete.bind(this)),this.scoreNumberCurrency.node.parent.active=!1},l.reset=function(){m.stopAllByTarget(this.node),this._collectingInfo.towerPosition=c.ZERO,this._collectingInfo.callback=void 0,this._highlightCallback=void 0,this.symbolSkeleton.enabled=!1,this.highlightSkeleton.enabled=!1,this._updateBonus(),this._updateScoreVisible()},l.hit=function(){var i;this.reset();var t=null==(i=z[this._symbolID])||null==(i=i.animationsHash)?void 0:i.hit;t&&(this.symbolSkeleton.enabled=!0,this.symbolSkeleton.setAnimation(0,t,!0),this.highlightSkeleton.enabled=!0,this.highlightSkeleton.setAnimation(0,"animation1",!0))},l.collect=function(i,t){var n;this.reset();var e=null==(n=z[this._symbolID])?void 0:n.animationsHash,a=this._freeMode?null==e?void 0:e.appear:null==e?void 0:e.uncover,o=null==e?void 0:e.collect;return!(!a||!o)&&(this._collectingInfo.towerPosition=i,this._collectingInfo.callback=t,this.symbolSkeleton.enabled=!0,this.symbolSkeleton.setAnimation(0,a,!1),this.symbolSkeleton.addAnimation(0,o,!1),!0)},l.highlight=function(i){var t;this.reset();var n=null==(t=z[this._symbolID])||null==(t=t.animationsHash)?void 0:t.highlight;return!!n&&(this._highlightCallback=i,this.symbolSkeleton.enabled=!0,this.symbolSkeleton.setAnimation(0,n,!1),!0)},l.idle=function(){var i;this.reset();var t=null==(i=z[this._symbolID])||null==(i=i.animationsHash)?void 0:i.idle;t&&(this.symbolSkeleton.enabled=!0,this.symbolSkeleton.setAnimation(0,t,!0))},l._updateBonus=function(){var i,t=z[this._symbolID],n=null!=(i=null==t?void 0:t.bonusSpriteFrameName)?i:"";this.bonusSprite.changeSpriteFrameFromAtlas(n)},l._updateScoreVisible=function(){this.scoreNumberCurrency.node.parent.active=this._freeMode&&d.isScoreableSymbol(this._symbolID)},l._onSymbolSkeletonAnimationComplete=function(i){var t,n=this,e=i.animation.name,a=null==(t=z[this._symbolID])?void 0:t.animationsHash;if(e&&a)switch(e){case a.uncover:case a.appear:m.stopAllByTarget(this.node),u(this.node).delay(.35).to(.4,{position:this._collectingInfo.towerPosition},{easing:"sineOut",onStart:function(){n.bonusSprite.changeSpriteFrameFromAtlas(""),n.scoreNumberCurrency.node.parent.active=!1,null==n._collectingInfo.callback||n._collectingInfo.callback(n,"onMove")}}).start();break;case a.collect:var o=this._collectingInfo.callback;this._collectingInfo.towerPosition=c.ZERO,this._collectingInfo.callback=void 0,null==o||o(this,"afterCollect");break;case a.highlight:var l=this._highlightCallback;this._highlightCallback=void 0,null==l||l(this)}},o(t,[{key:"symbolID",get:function(){return this._symbolID},set:function(i){var t,n;if(i!==this._symbolID){this._symbolID=i;var e=z[i],a=null!=(t=null==e?void 0:e.scale)?t:1;this.symbolSkeleton.node.setScale(a,a,1),this.symbolSkeleton.skeletonData=null!=(n=this._symbolSkeletonDatasList[i-1])?n:null,this._updateBonus(),this._updateScoreVisible()}}},{key:"score",set:function(i){this.scoreNumberCurrency.updateNumber(i)}},{key:"freeMode",set:function(i){i!==this._freeMode&&(this._freeMode=i,this._updateScoreVisible())}}]),t}(b)).prototype,"symbolSkeleton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"bonusSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(D.prototype,"scoreNumberCurrency",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(D.prototype,"highlightSkeleton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(D.prototype,"_symbolSkeletonDatasList",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=D))||I)||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/AnimatedSymbolNodePool2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./AnimatedSymbol2.ts"],(function(e){var t,n,a,i,r,o,l,s;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){i=e.cclegacy,r=e.instantiate,o=e.Prefab},function(e){l=e.SubGameData},function(e){s=e.AnimatedSymbol}],execute:function(){i._RF.push({},"4346eccGhBJUq2TIbjmyDcK","AnimatedSymbolNodePool",void 0),e("AnimatedSymbolNodePool",function(){function e(){this._prefab=null,this._pool=[],this._availableIndex=0}var i=e.prototype;return i.preload=function(){var e=n(a().mark((function e(){var t,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Log.d("preload animated symbol prefab"),e.next=4,App.cache.getCacheByAsync("prefabs/elements/AnimatedSymbol",o,l.module);case 4:(n=e.sent)[0],(i=n[1]).addRef(),null==(t=this._prefab)||t.decRef(),this._prefab=i,l.setLoadingTaskProgress("preloadAnimatedSymbol",1),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),Log.e("failed to preload animated symbol prefab: "+(e.t0?e.t0.toString():"unknown reason")),e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),i.push=function(e){var t=this._pool.indexOf(e);if(t<0)return!1;if(!e.isValid)return this._pool.splice(t,1),t<=this._availableIndex&&this._availableIndex>0&&--this._availableIndex,!1;e.removeFromParent();var n=e.getComponent(s);return!!n&&(n.reset(),t<this._availableIndex&&(--this._availableIndex,this._pool[t]=this._pool[this._availableIndex],this._pool[this._availableIndex]=e),!0)},i.pop=function(){var e;if(this._pool.length<=0||this._pool.length<=this._availableIndex){if(!this._prefab)return null;this._pool[this._availableIndex]=r(this._prefab)}return null!=(e=this._pool[this._availableIndex++])?e:null},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioHelper3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts"],(function(t){var u,e,i,s,n;return{setters:[function(t){u=t.createClass},function(t){e=t.cclegacy,i=t.Tween,s=t.tween},function(t){n=t.SubGameData}],execute:function(){e._RF.push({},"633842AnrFD872MUa8IvJeO","AudioHelper",void 0);var o=function(t){return t[t.PLAYING=0]="PLAYING",t[t.FADING_OUT=1]="FADING_OUT",t[t.FADING_IN=2]="FADING_IN",t}(o||{});t("AudioHelper",function(){function t(){this._audioImpl=null,this._state=o.PLAYING,this._currentBackgroundMusic=null,this._currentMusicVolume=1,this._musicVolumeLoweringRequestsMap=new Map}var e=t.prototype;return e.playBackgroundMusic=function(t,u){var e=this;if(void 0===u&&(u=1),t===this._currentBackgroundMusic){if(this._state===o.PLAYING)return;this._state===o.FADING_OUT&&(this._state=o.FADING_IN)}else this._state===o.FADING_IN&&(this._state=o.FADING_OUT);i.stopAllByTarget(this);var l=s(this),c=u;if(this._state===o.FADING_IN)c=u*(1-this.musicVolume);else{var a=u;this._state===o.FADING_OUT&&(a=u*this.musicVolume),l.to(this._currentBackgroundMusic?a:0,{musicVolume:0},{onStart:function(){return e._state=o.FADING_OUT}})}l.to(t?c:0,{musicVolume:1},{onStart:function(){var u;if(e._state=o.FADING_IN,t){if(t!==e._currentBackgroundMusic){var i;null==(i=e._audioImpl)||i.playMusic(t,n.module,!0)}}else null==(u=e._audioImpl)||u.stopMusic();e._currentBackgroundMusic=t},onComplete:function(){return e._state=o.PLAYING}}).start()},e.playSoundEffect=function(t,u){var e;void 0===u&&(u=!1),null==(e=this._audioImpl)||e.playEffect(t,n.module,u)},e.playOneShotSoundEffect=function(t){var u;null==(u=this._audioImpl)||u.playEffectOneShot(t,n.module)},e.stopEffect=function(t){var u;null==(u=this._audioImpl)||u.stopEffect(t,n.module)},e.clearMusicVolumeLoweringRequests=function(){this._musicVolumeLoweringRequestsMap.clear(),this._updateMusicVolume()},e.requestLoweringMusicVolume=function(t,u){this._musicVolumeLoweringRequestsMap.set(u,t),this._updateMusicVolume()},e.revokeLoweringMusicVolume=function(t){this._musicVolumeLoweringRequestsMap.delete(t)&&this._updateMusicVolume()},e._updateMusicVolume=function(){var t=this._currentMusicVolume;this._musicVolumeLoweringRequestsMap.forEach((function(u){return t=Math.min(t,u)})),this._audioImpl&&(this._audioImpl.musicVolume=t)},u(t,[{key:"audioImpl",set:function(t){this._audioImpl=t}},{key:"musicVolume",get:function(){var t,u;return null!=(t=null==(u=this._audioImpl)?void 0:u.musicVolume)?t:1},set:function(t){t!==this._currentMusicVolume&&(this._currentMusicVolume=t,this._updateMusicVolume())}},{key:"effectVolume",get:function(){var t,u;return null!=(t=null==(u=this._audioImpl)?void 0:u.effectVolume)?t:1},set:function(t){this._audioImpl&&(this._audioImpl.effectVolume=t)}},{key:"isEffectOn",get:function(){var t,u;return null==(t=null==(u=this._audioImpl)?void 0:u.isEffectOn)||t},set:function(t){this._audioImpl&&(this._audioImpl.isEffectOn=t)}},{key:"isMusicOn",get:function(){var t,u;return null==(t=null==(u=this._audioImpl)?void 0:u.isMusicOn)||t},set:function(t){this._audioImpl&&(this._audioImpl.isMusicOn=t)}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/AutoFittableBackground3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts"],(function(t){var n,o,e,i,a,s,u,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Node,a=t.sys,s=t.UITransform,u=t.Component},function(t){c=t.SubGameData}],execute:function(){var r;o._RF.push({},"3a3ccFVTMpHs609nJeWUZpo","AutoFittableBackground",void 0);var h=e.ccclass,l=e.menu;e.property,t("AutoFittableBackground",h("AutoFittableBackground")(r=l(c.module+"/components/AutoFittableBackground")(r=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.onLoad=function(){this.node.on(i.EventType.SIZE_CHANGED,this._onSizeChange,this),this.node.active=!a.isMobile},e.onDestroy=function(){this.isValid&&this.node.off(i.EventType.SIZE_CHANGED,this._onSizeChange,this)},e.onEnable=function(){this._onSizeChange()},e._onSizeChange=function(){var t,n=null==(t=this.node.getComponent(s))?void 0:t.contentSize;if(n){var o=2560/n.width;this.node.setScale(o,o,1)}},o}(u))||r)||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundLayer3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./AudioHelper3.ts"],(function(e){var n,a,t,i,r,o,u,s,c,p,l,m,d,k,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,t=e.inheritsLoose,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,u=e.Enum,s=e.SpriteFrame,c=e.Sprite,p=e.sp},function(e){l=e.default},function(e){m=e.SubGameData},function(e){d=e.common},function(e){k=e.DisplayTaskManager},function(e){g=e.AudioHelper}],execute:function(){var M,f,G,y,B,_,E,h,S,F,T,b,R,A,D,L,U,O,I,w,v,N,P;r._RF.push({},"0e42evDWXdLCayXx7eohs7/","BackgroundLayer",void 0);var z=o.ccclass,C=o.menu,H=o.property,W=e("MapGamePickingBackgroundData",(M=z("MapGamePickingBackgroundData"),f=H({type:u(d.EStageType)}),G=H(s),M((_=n((B=function(){a(this,"stageType",_,this),a(this,"spriteFrame",E,this)}).prototype,"stageType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.EStageType.GOLD}}),E=n(B.prototype,"spriteFrame",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=B))||y));e("BackgroundLayer",(h=z("BackgroundLayer"),S=C(m.module+"/layers/BackgroundLayer"),F=H(c),T=H(p.Skeleton),b=H(s),R=H(s),A=H(s),D=H([W]),h(L=S((O=n((U=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n=e.call.apply(e,[this].concat(r))||this,a(n,"sprite",O,i(n)),a(n,"skeleton",I,i(n)),a(n,"normalGameBackgroundSpriteFrame",w,i(n)),a(n,"bonusGameBackgroundSpriteFrame",v,i(n)),a(n,"freeGameBackgroundSpriteFrame",N,i(n)),a(n,"mapGameBackgroundSpriteFramesList",P,i(n)),n._mapGameBackgroundSpriteFramesHash={},n._timeoutID=null,n}t(n,e);var r=n.prototype;return r.onLoad=function(){var n=this;e.prototype.onLoad.call(this),k.addHandler(this),this.mapGameBackgroundSpriteFramesList.forEach((function(e){n._mapGameBackgroundSpriteFramesHash[e.stageType]=e.spriteFrame}))},r.onDestroy=function(){this._stopCountdown(),e.prototype.onDestroy.call(this)},r.onTaskInitialize=function(e,n){switch(g.instance.clearMusicVolumeLoweringRequests(),this._updateBackground(n.gameMode),n.gameMode){case d.EGameMode.BONUS:g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_BONUS_GAME);break;case d.EGameMode.FREE:(n.featureType&d.EFeatureType.RED_TOWER)>0?g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_SUPER_FREE_GAME):g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_FREE_GAME);break;case d.EGameMode.MAP:g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_MAP_GAME);break;default:this._startCountdown((function(){return g.instance.playBackgroundMusic(null)}),5)}},r.onTaskSpinStart=function(e,n){n.spinType===d.ESpinType.BET&&(this._stopCountdown(),g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_NORMAL_GAME))},r.onTaskBonusGameTrigger=function(e,n){g.instance.playBackgroundMusic(null)},r.onTaskBonusGameEnter=function(e,n){g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_BONUS_GAME)},r.onTaskBonusGameWinJackpot=function(e,n){g.instance.playBackgroundMusic(null)},r.onTaskFreeGameTrigger=function(e,n){g.instance.playBackgroundMusic(null)},r.onTaskFreeGameEnter=function(e,n){(n.featureType&d.EFeatureType.RED_TOWER)>0?g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_SUPER_FREE_GAME):g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_FREE_GAME)},r.onTaskFreeGameSettle=function(e,n){g.instance.playBackgroundMusic(null)},r.onTaskMapGameTrigger=function(e,n){g.instance.playBackgroundMusic(null)},r.onTaskMapGameMoveCursor=function(e,n){g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_MAP_GAME)},r.onTaskMapGameSettle=function(e,n){g.instance.playBackgroundMusic(null)},r.onTaskNormalGameBack=function(e,n){g.instance.playBackgroundMusic(m.AUDIO_URLS.BGM_NORMAL_GAME)},r.onTaskRoundEnd=function(e,n){this._startCountdown((function(){return g.instance.playBackgroundMusic(null)}),5)},r.onTaskChangeGame=function(e,n){var a=this._inferGameModeFromFeatureType(n.previousFeatureType),t=this._inferGameModeFromFeatureType(n.nextFeatureType);a!==t&&this._updateBackground(t)},r.onTaskShowMapGame=function(e,n){n.mapStageInfo.super&&this._updateBackground(d.EGameMode.SUPER_MAP,n.mapStageInfo.type)},r.onTaskHideMapGame=function(e,n){n.mapStageInfo.super&&this._updateBackground(d.EGameMode.NORMAL)},r._startCountdown=function(e,n){this._stopCountdown(),this._timeoutID=setTimeout(e,1e3*n)},r._stopCountdown=function(){null!==this._timeoutID&&void 0!==this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},r._inferGameModeFromFeatureType=function(e){return e===d.EFeatureType.NONE?d.EGameMode.NORMAL:e===d.EFeatureType.RED_TOWER?d.EGameMode.BONUS:d.EGameMode.FREE},r._updateBackground=function(e,n){if(void 0===n&&(n=d.EStageType.GREEN),e===d.EGameMode.BONUS)this.sprite.spriteFrame=this.bonusGameBackgroundSpriteFrame,this.skeleton.enabled=!0,this.skeleton.setAnimation(0,"animation3",!0);else if(e===d.EGameMode.FREE)this.sprite.spriteFrame=this.freeGameBackgroundSpriteFrame,this.skeleton.enabled=!0,this.skeleton.setAnimation(0,"animation2",!0);else if(e===d.EGameMode.SUPER_MAP){var a;this.sprite.spriteFrame=null!=(a=this._mapGameBackgroundSpriteFramesHash[n])?a:this.normalGameBackgroundSpriteFrame,this.skeleton.enabled=!1}else this.sprite.spriteFrame=this.normalGameBackgroundSpriteFrame,this.skeleton.enabled=!0,this.skeleton.setAnimation(0,"animation1",!0)},n}(l)).prototype,"sprite",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(U.prototype,"skeleton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(U.prototype,"normalGameBackgroundSpriteFrame",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(U.prototype,"bonusGameBackgroundSpriteFrame",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(U.prototype,"freeGameBackgroundSpriteFrame",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(U.prototype,"mapGameBackgroundSpriteFramesList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=U))||L)||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/BaseView3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceLoader.ts","./GameView.ts","./Global.ts","./CommonEvent.ts","./GameService.ts","./BigWinDefines2.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./AudioHelper3.ts","./LoadingHelper3.ts","./GameSender18.ts","./Protocol19.ts"],(function(e){var a,t,s,o,r,n,i,p,c,l,d,u,_,h,m,T,k,E,f,y,g;return{setters:[function(e){a=e.inheritsLoose,t=e.createForOfIteratorHelperLoose,s=e.regeneratorRuntime,o=e.createClass},function(e){r=e.cclegacy,n=e._decorator,i=e.AudioClip,p=e.math},function(e){c=e.default},function(e){l=e.default},function(e){d=e.Global},function(e){u=e.CommonEvent},function(e){_=e.GameService},function(e){h=e.preloadAudio_bigwin},function(e){m=e.SubGameData},function(e){T=e.common},function(e){k=e.DisplayTaskManager},function(e){E=e.AudioHelper},function(e){f=e.LoadingHelper},function(e){y=e.GameSender},function(e){g=e.Protocol}],execute:function(){var S;r._RF.push({},"f53dcwsxMtBZ6TEz0tbqOye","BaseView",void 0);var b=n.ccclass,R=n.menu;n.property,e("BaseView",b("BaseView")(S=R(m.module+"/views/BaseView")(S=function(e){function r(){for(var a,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return(a=e.call.apply(e,[this].concat(s))||this)._spinResultsCacheList=[],a._spinResultHandler=null,a._cachedBalances=[],a._currentTotalScore=0,a._currentTotalFreeTimes=0,a._cachedJackpotPickedLocationsList=[],a._cachedMapItemPickedResultsList=[],a}a(r,e),r.getPrefabUrl=function(){return"prefabs/views/BaseView"};var n=r.prototype;return n.onLoad=function(){var a;null==(a=e.prototype.onLoad)||a.call(this),this._loadResources(),m.spinRequestor=this},n.onDestroy=function(){this.isValid&&(this.offD(u.GAME_SERVICE_CLOSE),this.offD(u.DISPATCH_PLAYBACK),this._offS(g.BET_SPIN),this._offS(g.FREE_SPIN),this._offS(g.USERINFO),this._offS(g.CHANGE_BET),this._offS(g.PICK_JACKPOT_SYMBOL),this._offS(g.PICK_MAP_ITEM),this._offS(g.SLOT_INFO),this._offS(g.COLLECT_JACKPOT)),f.instance.hide(),e.prototype.onDestroy.call(this)},n.start=function(){dispatch(u.NOTIFY_ENTER_GAME),E.instance.audioImpl=this.audioHelper,d.playback?this._handlePlayBackData(!0):this._handleInitialData(!1)},n.addEvents=function(){e.prototype.addEvents.call(this),this.onD(u.GAME_SERVICE_CLOSE,this._onConnectionClose),this.onD(u.DISPATCH_PLAYBACK,this._onPlayBack),this._onS(g.BET_SPIN,this._onBetSpinRespond),this._onS(g.FREE_SPIN,this._onFreeSpinRespond),this._onS(g.USERINFO,this._onUserInfoRespond),this._onS(g.CHANGE_BET,this._onChangeBetRespond),this._onS(g.PICK_JACKPOT_SYMBOL,this._onPickJackpotSymbolRespond),this._onS(g.PICK_MAP_ITEM,this._onPickMapItemRespond),this._onS(g.SLOT_INFO,this._onSlotInfoRespond),this._onS(g.COLLECT_JACKPOT,this._onCollectJackpotRespond)},n.lateUpdate=function(e){k.runNextTask()},n.request=function(e,a){switch(d.playback||f.instance.show(2),e){case T.ESpinRequestType.GM_SPIN:k.addTask("spinStart",{spinType:T.ESpinType.BET}),this._cachedBalances.length=0,this._gameSender.c2sGMBet({bet:m.totalBet,gm_type:a});break;case T.ESpinRequestType.FREE_SPIN:this._gameSender.c2sFreeSpin();break;default:k.addTask("spinStart",{spinType:T.ESpinType.BET}),this._cachedBalances.length=0,this._gameSender.c2sBetSpin({bet:m.totalBet})}},n._onS=function(e,a,t,s){void 0===s&&(s=!0),this._gameService.addListener(e,t,a,s,this)},n._offS=function(e){this._gameService.removeListeners(this,e)},n._loadResources=function(){var e=new c;e.getLoadResources=function(){var e=[];for(var a in m.AUDIO_URLS)a.startsWith("BGM_")||"SE_ENTRANCE"===a||e.push({url:m.AUDIO_URLS[a],type:i,bundle:m.module});return h.forEach((function(a){return e.push({url:a,type:i,bundle:m.module})})),e},e.loadResources()},n._onBetSpinRespond=function(e){f.instance.hide(),e&&e.message&&(this._spinResultsCacheList.push(e.message),this._spinResultHandler||this._handleNextData())},n._onFreeSpinRespond=function(e){f.instance.hide(),e&&e.message&&this._handleNextData()},n._onUserInfoRespond=function(e){this._cachedBalances.push(e.message.money)},n._onChangeBetRespond=function(e){var a;if(e&&e.message){var t=((a={})[T.EJackpotType.MINI]=0,a[T.EJackpotType.MINOR]=0,a[T.EJackpotType.MAJOR]=0,a[T.EJackpotType.GRAND]=0,a[T.EJackpotType.DOUBLE_GRAND]=0,a);this._updateJackpotBonuses(t,e.message.jackpot_reward),m.currentChangeBetType===T.EChangeBetRequestType.SYNCHRONISE_JACKPOTS?k.runTask("synchroniseJackpots",{jackpotBonusesHash:t,jackpotSynchronTimestamp:m.changeBetTimestamp}):k.runTask("changeBet",{jackpotBonusesHash:t,jackpotSynchronTimestamp:m.changeBetTimestamp,mapCollectionProgress:e.message.cur_val,mapStageID:e.message.map_progress})}},n._onPickJackpotSymbolRespond=function(e){f.instance.hide(),e&&e.message&&(this._updateJackpotPickedLocations(e.message.jackpot_pos),this._handleNextData())},n._onPickMapItemRespond=function(e){f.instance.hide(),e&&e.message&&(this._updateMapItemPickedResults(e.message.floor_list),this._handleNextData())},n._onSlotInfoRespond=function(e){f.instance.hide(),this._handleInitialData(!0)},n._onCollectJackpotRespond=function(e){e&&e.message&&k.runTask("collectJackpot",{data:e.message})},n._handleInitialData=function(e){var a,s,o=this;k.clearTasks(),this._currentTotalScore=0,this._currentTotalFreeTimes=0,this._cachedJackpotPickedLocationsList.length=0,this._cachedMapItemPickedResultsList.length=0;var r=m.lastMap,n=m.balance,i=T.EGameMode.NORMAL,p=m.INITIAL_SYMBOLS_GROUPS,c=T.EFeatureType.NONE,l=((a={})[T.ETowerType.GREEN]=0,a[T.ETowerType.BLUE]=0,a[T.ETowerType.RED]=0,a),d=((s={})[T.EJackpotType.MINI]=0,s[T.EJackpotType.MINOR]=0,s[T.EJackpotType.MAJOR]=0,s[T.EJackpotType.GRAND]=0,s[T.EJackpotType.DOUBLE_GRAND]=0,s),u=new Map,_=0,h=0,E=0,f=0,y=T.EGameMode.NORMAL;if(r){if(m.totalBet=r.bet,this._updateFeatureProgresses(l,r.tower_list),r.free.length>0&&(this._currentTotalFreeTimes=r.free_times,_=r.free.length,r.free.forEach((function(e){e.map.forEach((function(e){e.icon.forEach((function(e){var a=m.getFreeTimesOnSymbol(e);o._currentTotalFreeTimes-=a,_-=a}))}))})),this._currentTotalFreeTimes=Math.max(0,this._currentTotalFreeTimes),_=Math.max(0,_)),h=r.cur_val,E=r.map_progress,f=r.start_prize,r.floor_list.length>0)!r.floor_list.some((function(e){var a;return e.pos>0&&(null==(a=e.item_list[0])?void 0:a.item_id)===T.EMapItem.END}))&&r.floor_list[r.floor_list.length-1].pos<=0&&(y=T.EGameMode.SUPER_MAP);else r.map_reward>0&&(y=T.EGameMode.MAP);if(r.base.length>0){var g=r.base[0];if(this._updateFeatureProgresses(l,g.tower_state),g.jackpot_open.length>0){i=T.EGameMode.BONUS,c=T.EFeatureType.RED_TOWER,this._cachedJackpotPickedLocationsList.length=0,r.jackpot_pos.forEach((function(e,a){o._cachedJackpotPickedLocationsList.push(e);var t=m.getJackpotSymbolType(g.jackpot_open[a]),s=u.get(t);null==s&&(s=[],u.set(t,s)),s.push(e)}));for(var S,b=t(u);!(S=b()).done;){var R=S.value,I=R[0],G=R[1];if(I!==T.EJackpotSymbolType.UNKNOWN&&I!==T.EJackpotSymbolType.BOOST&&G.length>=3){i=T.EGameMode.NORMAL,c=T.EFeatureType.NONE;break}}i===T.EGameMode.BONUS&&(n-=g.jp_chose_add,this._currentTotalScore=r.win-g.jp_chose_add-r.map_reward,this._updateJackpotBonuses(d,g.jackpot_before),this._updateJackpotPickedLocations(r.jackpot_pos))}}if(i===T.EGameMode.NORMAL&&(r.free.length>0?(i=T.EGameMode.FREE,c=m.getFeatureType(r.free_tower_ids),this._currentTotalScore=r.win-r.map_reward):y===T.EGameMode.SUPER_MAP&&(i=T.EGameMode.SUPER_MAP,this._currentTotalScore=r.win-r.map_reward,this._updateMapItemPickedResults(r.floor_list))),i===T.EGameMode.NORMAL)this._updateFeatureProgresses(l,r.reset_tower_list),this._updateJackpotBonuses(d,r.jackpot_reward);else{if(r.base.length>0){var M=r.base[0];p=this._symbolsDataToGroups(M.map,M.tower_reward),this._updateFeatureProgresses(l,M.tower_state)}l[T.ETowerType.RED]>=3&&(l[T.ETowerType.RED]=0),i!==T.EGameMode.BONUS&&(this._updateFeatureProgresses(l,r.reset_tower_list),i===T.EGameMode.FREE?this._updateJackpotBonuses(d,r.jackpot_before):this._updateJackpotBonuses(d,r.jackpot_reward)),y===T.EGameMode.NORMAL||i!==T.EGameMode.BONUS&&i!==T.EGameMode.FREE||(h<=0&&(h=1e4),E=(E-1+m.MAP_STAGES_NUMBER)%m.MAP_STAGES_NUMBER)}}k.runTask("initialize",{entrance:!e&&i===T.EGameMode.NORMAL,balance:n,totalBet:m.totalBet,gameMode:i,symbolsGroups:p,featureType:c,featureProgressesHash:l,jackpotBonusesHash:d,jackpotSynchronTimestamp:m.lastMapTimestamp<=0?Date.now():m.lastMapTimestamp,jackpotSymbolLocationsMap:u,totalFreeTimes:this._currentTotalFreeTimes,freeTimesRemaining:_,currentScoreInSpecialMode:this._currentTotalScore,mapCollectionProgress:h,mapStageID:E,mapStartPrize:f,mapTierInfosGroup:this._cachedMapItemPickedResultsList,mapStageInfo:m.getMapStageInfo(E)}),r&&(this._spinResultHandler=this._generateInitialDataHandler(r,i,u),this._handleNextData())},n._handlePlayBackData=function(e){var a,t,s;m.balance=d.playbackAllData.startScore*d.SCORE_EXCHANGE,m.totalBet=d.playbackData.bet*(null!=(a=d.playbackData.line_num)?a:1),m.jackpotsLockedStatesWhenPlayBack=d.playbackData.lock_list,this._cachedJackpotPickedLocationsList.length=0,this._cachedMapItemPickedResultsList.length=0;var o=d.playbackData,r=((t={})[T.ETowerType.GREEN]=0,t[T.ETowerType.BLUE]=0,t[T.ETowerType.RED]=0,t),n=((s={})[T.EJackpotType.MINI]=0,s[T.EJackpotType.MINOR]=0,s[T.EJackpotType.MAJOR]=0,s[T.EJackpotType.GRAND]=0,s[T.EJackpotType.DOUBLE_GRAND]=0,s);this._updateFeatureProgresses(r,o.old_tower_list),this._updateJackpotBonuses(n,o.jackpot_before);var i=o.map_progress;(o.map_reward>0||o.floor_list.length>0)&&(i=Math.max(0,i-1)),k.clearTasks(),k.runTask("initialize",{entrance:!1,balance:m.balance,totalBet:m.totalBet,gameMode:T.EGameMode.NORMAL,symbolsGroups:m.INITIAL_SYMBOLS_GROUPS,featureType:T.EFeatureType.NONE,featureProgressesHash:r,jackpotBonusesHash:n,jackpotSynchronTimestamp:Date.now(),jackpotSymbolLocationsMap:new Map,totalFreeTimes:0,freeTimesRemaining:0,currentScoreInSpecialMode:0,mapCollectionProgress:o.old_cur_val,mapStageID:i,mapStartPrize:o.start_prize,mapTierInfosGroup:[],mapStageInfo:m.getMapStageInfo(i)}),dispatch(u.NOTIFY_USERINFO_SCORE,m.balance),dispatch(u.NOTIFY_PLAYBACK),m.balance-=d.playbackAllData.bet*d.SCORE_EXCHANGE;var p={base:o.base,free:o.free,reward:o.reward,jackpot_before:o.jackpot_before,jackpot_reward:o.jackpot_reward,free_tower_ids:o.free_tower_ids,tower_list:o.tower_list,reset_tower_list:o.reset_tower_list,cur_val:o.cur_val,map_progress:o.map_progress,map_reward:o.map_reward,floor_list:o.floor_list,start_prize:o.start_prize};this._onBetSpinRespond({message:p,type:g.BET_SPIN})},n._handleNextData=function(){if(!this._spinResultHandler||this._spinResultHandler.next().done){this._spinResultHandler=null;var e=this._spinResultsCacheList.shift();null!=e&&(this._spinResultHandler=this._generateSpinResultHandler(e),this._spinResultHandler.next())}},n._generateInitialDataHandler=s().mark((function e(a,t,o){var r,n,i,p,c,l,d,u,_;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===T.EGameMode.NORMAL){e.next=16;break}if(i=a.base[0],t!==T.EGameMode.BONUS){e.next=5;break}return p=a.free.length>=a.free_times?T.EFeatureType.NONE:m.getFeatureType(a.free_tower_ids),e.delegateYield(this._handleBonusGameResult(i,p,a.free.length<=0,o),"t0",5);case 5:return(r={})[T.ETowerType.GREEN]=0,r[T.ETowerType.BLUE]=0,r[T.ETowerType.RED]=0,c=r,this._updateFeatureProgresses(c,a.tower_list),i&&(this._updateFeatureProgresses(c,i.tower_state),i.jackpot_open.length>0&&(c[T.ETowerType.RED]=0)),l=i?this._symbolsDataToGroups(i.map,i.tower_reward):m.INITIAL_SYMBOLS_GROUPS,e.delegateYield(this._handleFreeGameResult(a.free,a.free_tower_ids,c,a.reset_tower_list,l,t===T.EGameMode.FREE||a.free.length<a.free_times?a.win:void 0),"t1",10);case 10:return e.delegateYield(this._handleMapGameResult(a.cur_val,a.map_progress,a.start_prize,a.floor_list,a.map_reward,t===T.EGameMode.MAP||t===T.EGameMode.SUPER_MAP),"t2",11);case 11:d=a.free.reduce((function(e,a){return e+a.add+a.jp_chose_add+a.jp_icon_add}),0),u=d+a.map_reward>0?m.balance:void 0,(n={})[T.EJackpotType.MINI]=0,n[T.EJackpotType.MINOR]=0,n[T.EJackpotType.MAJOR]=0,n[T.EJackpotType.GRAND]=0,n[T.EJackpotType.DOUBLE_GRAND]=0,_=n,this._updateJackpotBonuses(_,a.jackpot_reward),k.addTask("roundEnd",{balance:u,jackpotBonusesHash:_,jackpotSynchronTimestamp:m.lastMapTimestamp});case 16:this._spinResultHandler=null;case 17:case"end":return e.stop()}}),e,this)})),n._generateSpinResultHandler=s().mark((function e(a){var t,o,r,n,i,p,c,l,d,u,_,h,E;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.base.length>0)){e.next=25;break}return this._currentTotalScore=0,p=a.base[0],c=this._symbolsDataToGroups(p.map,[]),l=null!=(t=this._cachedBalances[0])?t:m.balance,(o={})[T.ETowerType.GREEN]=0,o[T.ETowerType.BLUE]=0,o[T.ETowerType.RED]=0,d=o,(r={})[T.EJackpotType.MINI]=0,r[T.EJackpotType.MINOR]=0,r[T.EJackpotType.MAJOR]=0,r[T.EJackpotType.GRAND]=0,r[T.EJackpotType.DOUBLE_GRAND]=0,u=r,this._updateFeatureProgresses(d,a.tower_list),this._updateJackpotBonuses(u,a.jackpot_before),k.addTask("spinStop",{spinType:T.ESpinType.BET,symbolsGroups:c,balance:l,featureProgressesHash:d,shouldWaitFeatureUpdate:this._isBonusGameTriggered(p)||this._isFreeGameTriggered(a.free),jackpotBonusesHash:u,jackpotSynchronTimestamp:m.spinTimestamp}),k.addTask("spinEnd",{spinType:T.ESpinType.BET,symbolsGroups:c,mapCollectionProgress:a.cur_val,mapGameTriggered:this._isMapGameTriggered(a.floor_list,a.map_reward)}),p.icons.length>0&&k.addTask("hitPayways",{symbolsGroups:c,paywayColumnsMap:this._paywaysDataToColumnsMap(p.icons),celebrating:!1}),p.add>0&&k.addTask("bigWin",{score:p.add}),this._currentTotalScore+=p.add,k.addTask("spinBreak",{totalScore:this._currentTotalScore,score:p.add,shouldBreak:!1,breakInFreeGame:!1}),e.delegateYield(this._handleBonusGameResult(p,T.EFeatureType.NONE,a.free.length<=0),"t0",16);case 16:return(n={})[T.ETowerType.GREEN]=0,n[T.ETowerType.BLUE]=0,n[T.ETowerType.RED]=0,_=n,this._updateFeatureProgresses(_,a.tower_list),p.jackpot_open.length>0&&(_[T.ETowerType.RED]=0),e.delegateYield(this._handleFreeGameResult(a.free,a.free_tower_ids,_,a.reset_tower_list,c),"t1",20);case 20:return e.delegateYield(this._handleMapGameResult(a.cur_val,a.map_progress,a.start_prize,a.floor_list,a.map_reward,!1),"t2",21);case 21:h=a.reward+a.map_reward>0?m.balance:void 0,(i={})[T.EJackpotType.MINI]=0,i[T.EJackpotType.MINOR]=0,i[T.EJackpotType.MAJOR]=0,i[T.EJackpotType.GRAND]=0,i[T.EJackpotType.DOUBLE_GRAND]=0,E=i,this._updateJackpotBonuses(E,a.jackpot_reward),k.addTask("roundEnd",{balance:h,jackpotBonusesHash:E,jackpotSynchronTimestamp:m.spinTimestamp});case 25:this._currentTotalScore=0,this._spinResultHandler=null;case 27:case"end":return e.stop()}}),e,this)})),n._handleBonusGameResult=s().mark((function e(a,o,r,n){var i,c,l,u,_,h,E,f,y,g,S,b,R,I,G,M,B,w,N,L,P,J,D=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isBonusGameTriggered(a)){e.next=2;break}return e.abrupt("return");case 2:if(l=this._symbolsDataToGroups(a.map,a.tower_reward),(i={})[T.EJackpotSymbolType.UNKNOWN]=0,i[T.EJackpotSymbolType.MINI]=0,i[T.EJackpotSymbolType.MINOR]=0,i[T.EJackpotSymbolType.MAJOR]=0,i[T.EJackpotSymbolType.GRAND]=0,i[T.EJackpotSymbolType.BOOST]=0,u=i,_=!1,h=!1,!n){e.next=23;break}E=t(n);case 8:if((f=E()).done){e.next=21;break}if(y=f.value,g=y[0],S=y[1],u[g]=S.length,!(S.length>=3)){e.next=19;break}if(g!==T.EJackpotSymbolType.BOOST){e.next=16;break}h=!0,e.next=19;break;case 16:if(g===T.EJackpotSymbolType.UNKNOWN){e.next=19;break}return _=!0,e.abrupt("break",21);case 19:e.next=8;break;case 21:e.next=30;break;case 23:(b={})[T.EJackpotType.MINI]=0,b[T.EJackpotType.MINOR]=0,b[T.EJackpotType.MAJOR]=0,b[T.EJackpotType.GRAND]=0,b[T.EJackpotType.DOUBLE_GRAND]=0,R=b,this._updateJackpotBonuses(R,a.jackpot_before),this._cachedJackpotPickedLocationsList.length=0,k.addTask("bonusGameTrigger",null),k.addTask("bonusGameTransit",{type:"enter",previousFeatureTypeBefore:o,previousSymbolsGroups:l,shouldResetRedTower:r,jackpotBonusesHash:R,jackpotSynchronTimestamp:0}),k.addTask("bonusGameStart",null),k.addTask("bonusGameEnter",null);case 30:if(_){e.next=42;break}if(I=this._cachedJackpotPickedLocationsList.length,d.playback){for(M=[],B=0;B<15;B++)M.push(B);for(w=0,N=0;N<M.length;++N)w=p.randomRangeInt(1,M.length),M[0]=M[0]^M[w],M[w]=M[0]^M[w],M[0]=M[0]^M[w];this._cachedJackpotPickedLocationsList.length=0,(G=this._cachedJackpotPickedLocationsList).push.apply(G,M)}L=s().mark((function e(){var t,o,r,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.addTask("bonusGamePickStart",{jackpotSymbolPickedLocationsList:D._cachedJackpotPickedLocationsList.slice()}),d.playback){e.next=4;break}return void(e.next=4);case 4:if(r=m.getJackpotSymbolType(null!=(t=a.jackpot_open[P])?t:-1),k.addTask("bonusGamePickEnd",{index:null!=(o=D._cachedJackpotPickedLocationsList[P])?o:-1,jackpotSymbol:r}),null==r||3!=++u[r]){e.next=19;break}if(r!==T.EJackpotSymbolType.BOOST){e.next=12;break}h=!0,k.addTask("bonusGameUpgrade",null),e.next=19;break;case 12:if(r===T.EJackpotSymbolType.UNKNOWN){e.next=19;break}return n=[],a.jackpot_open.slice(P+1).forEach((function(e){var a=m.getJackpotSymbolType(e);n.push(a)})),k.addTask("bonusGameReveal",{jackpotSymbolTypeWon:r,jackpotSymbolsList:n}),null!=(i=m.getJackpotTypeFromJackpotSymbolType(r))&&k.addTask("bonusGameWinJackpot",{jackpotType:h?i+1:i,locked:m.isJackpotLocked(i,h),score:a.jp_chose_add}),e.abrupt("return",1);case 19:case"end":return e.stop()}}),e)})),P=I;case 35:if(!(P<a.jackpot_open.length)){e.next=42;break}return e.delegateYield(L(),"t0",37);case 37:if(!e.t0){e.next=39;break}return e.abrupt("break",42);case 39:++P,e.next=35;break;case 42:(c={})[T.EJackpotType.MINI]=0,c[T.EJackpotType.MINOR]=0,c[T.EJackpotType.MAJOR]=0,c[T.EJackpotType.GRAND]=0,c[T.EJackpotType.DOUBLE_GRAND]=0,J=c,this._updateJackpotBonuses(J,a.jackpot_after),k.addTask("bonusGameTransit",{type:"exit",previousFeatureTypeBefore:o,previousSymbolsGroups:l,shouldResetRedTower:r,jackpotBonusesHash:J,jackpotSynchronTimestamp:n?m.lastMapTimestamp:m.spinTimestamp}),a.jp_chose_add>0&&(k.addTask("bigWin",{score:a.jp_chose_add}),this._currentTotalScore+=a.jp_chose_add,k.addTask("spinBreak",{totalScore:this._currentTotalScore,score:a.jp_chose_add,shouldBreak:!0,breakInFreeGame:(o&T.EFeatureType.BLUE_TOWER)>0||(o&T.EFeatureType.GREEN_TOWER)>0})),o===T.EFeatureType.NONE?k.addTask("normalGameBack",null):((o&T.EFeatureType.GREEN_TOWER)>0||(o&T.EFeatureType.BLUE_TOWER)>0)&&k.addTask("freeGameEnter",{featureType:o});case 47:case"end":return e.stop()}}),e,this)})),n._handleFreeGameResult=s().mark((function e(a,o,r,n,i,p){var c,l,u,_,h,E,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isFreeGameTriggered(a)){e.next=2;break}return e.abrupt("return");case 2:l=m.getFeatureType(o),u=null!=p?p:0,null==p&&(this._currentTotalFreeTimes=m.INITIAL_FREE_TIMES,k.addTask("freeGameTrigger",{featureType:l}),k.addTask("freeGameStart",{featureType:l}),k.addTask("freeGameTransit",{type:"enter",featureType:l,previousSymbolsGroups:i,featureProgressesHash:r}),k.addTask("freeGameEnter",{featureType:l})),_=t(a);case 6:if((h=_()).done){e.next=16;break}if(E=h.value,k.addTask("spinStart",{spinType:T.ESpinType.FREE}),d.playback){e.next=12;break}return void(e.next=12);case 12:return e.delegateYield(this._handleFreePageData(E,l),"t0",13);case 13:u+=E.add+E.jp_chose_add+E.jp_icon_add;case 14:e.next=6;break;case 16:(c={})[T.ETowerType.GREEN]=0,c[T.ETowerType.BLUE]=0,c[T.ETowerType.RED]=0,f=c,this._updateFeatureProgresses(f,n),k.addTask("freeGameSettle",{featureType:l,totalScore:this._currentTotalScore}),k.addTask("freeGameTransit",{type:"exit",featureType:l,previousSymbolsGroups:i,featureProgressesHash:f}),k.addTask("bigWin",{score:u}),this._currentTotalFreeTimes=0,k.addTask("normalGameBack",null);case 23:case"end":return e.stop()}}),e,this)})),n._handleFreePageData=s().mark((function e(a,t){var o,r,n,i,p,c,l,d,u,_,h,E,f,y,g,S,b,R;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._symbolsDataToGroups(a.map,a.tower_reward),(o={})[T.ETowerType.GREEN]=0,o[T.ETowerType.BLUE]=0,o[T.ETowerType.RED]=0,n=o,this._updateFeatureProgresses(n,a.tower_state),a.jackpot_open.length>0&&(n[T.ETowerType.RED]=3),k.addTask("spinStop",{spinType:T.ESpinType.FREE,symbolsGroups:r,balance:0,featureProgressesHash:n,shouldWaitFeatureUpdate:this._isBonusGameTriggered(a),jackpotSynchronTimestamp:0}),k.addTask("spinEnd",{spinType:T.ESpinType.FREE,symbolsGroups:r,mapGameTriggered:!1}),(i=a.tower_reward.reduce((function(e,a){return e+a}),0))>0&&(this._currentTotalScore+=i,k.addTask("freeGameCollectScores",{symbolsGroups:r,totalScore:this._currentTotalScore,score:i})),!(a.jp_icon_add>0)){e.next=32;break}p=void 0,c=0;case 11:if(!(c<r.length)){e.next=32;break}l=r[c],d=0;case 14:if(!(d<l.length)){e.next=27;break}if(u=l[d],null==(p=m.getJackpotTypeOnSymbol(u.id))){e.next=24;break}return this._currentTotalScore+=a.jp_icon_add,(_={})[T.EJackpotType.MINI]=0,_[T.EJackpotType.MINOR]=0,_[T.EJackpotType.MAJOR]=0,_[T.EJackpotType.GRAND]=0,_[T.EJackpotType.DOUBLE_GRAND]=0,h=_,this._updateJackpotBonuses(h,a.jackpot_after),k.addTask("freeGameCollectJackpot",{symbolInfo:u,reelIndex:c,symbolIndex:d,jackpotType:p,locked:m.isJackpotLocked(p,!1),score:a.jp_icon_add,totalScore:this._currentTotalScore}),k.addTask("freeGameUnhighlightJackpot",{jackpotType:p,jackpotBonusesHash:h,jackpotSynchronTimestamp:m.spinTimestamp>m.lastMapTimestamp?m.spinTimestamp:m.lastMapTimestamp}),e.abrupt("break",27);case 24:++d,e.next=14;break;case 27:if(null==p){e.next=29;break}return e.abrupt("break",32);case 29:++c,e.next=11;break;case 32:for(E=[],f=0;f<r.length;++f)for(y=r[f],g=0;g<y.length;++g)S=y[g],(b=m.getFreeTimesOnSymbol(S.id))>0&&(this._currentTotalFreeTimes+=b,E.push({symbolInfo:S,reelIndex:f,symbolIndex:g}));return E.length>0&&k.addTask("freeGameCollectFreeTimes",{symbolsWithFreeTimes:E,totalFreeTimes:this._currentTotalFreeTimes}),a.icons.length>0&&k.addTask("hitPayways",{symbolsGroups:r,paywayColumnsMap:this._paywaysDataToColumnsMap(a.icons),celebrating:!1}),(R=a.add+a.jp_icon_add)>0&&k.addTask("bigWin",{score:R}),this._currentTotalScore+=a.add-i,k.addTask("spinBreak",{totalScore:this._currentTotalScore,score:a.add-i,shouldBreak:!0,breakInFreeGame:!0}),e.delegateYield(this._handleBonusGameResult(a,t,!0),"t0",41);case 41:case"end":return e.stop()}}),e,this)})),n._handleMapGameResult=s().mark((function e(a,t,o,r,n,i){var c,l,u,_,h,E,f,y,g=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isMapGameTriggered(r,n)){e.next=2;break}return e.abrupt("return");case 2:if(c=T.EGameMode.NORMAL,i||(a>=1e4&&k.addTask("mapGameTrigger",{mapStartPrize:o}),k.addTask("mapGameMoveCursor",{mapStageID:t})),l=m.getMapStageInfo(t),!(r.length>0)){e.next=40;break}if(c=T.EGameMode.SUPER_MAP,u=-1,!i){e.next=25;break}_=0;case 10:if(!(_<this._cachedMapItemPickedResultsList.length)){e.next=23;break}if((null==(E=this._cachedMapItemPickedResultsList[_])||null==(h=E.itemInfosList[E.pickedIndex])?void 0:h.itemID)!==T.EMapItem.END){e.next=17;break}return u=r.length-1,e.abrupt("break",23);case 17:if(E&&!(E.pickedIndex<0)){e.next=19;break}return e.abrupt("break",23);case 19:u=_;case 20:++_,e.next=10;break;case 23:e.next=27;break;case 25:this._cachedMapItemPickedResultsList.length=0,k.addTask("mapGameStart",null);case 27:d.playback&&(this._cachedMapItemPickedResultsList.length=0,r.forEach((function(e){var a=p.randomRangeInt(0,e.item_list.length);g._cachedMapItemPickedResultsList.push({pickedIndex:a,itemInfosList:g._mapItemsDataToInfos(e.item_list,a+1)})}))),f=s().mark((function e(a){var t,o,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.addTask("mapGamePickStart",null),d.playback){e.next=4;break}return void(e.next=4);case 4:if(n=null!=(t=g._cachedMapItemPickedResultsList[a])?t:{pickedIndex:-1,itemInfosList:g._mapItemsDataToInfos(r[a].item_list,0)},k.addTask("mapGamePickEnd",{tier:a,itemIndex:n.pickedIndex,itemInfosList:n.itemInfosList}),(i=null==(o=n.itemInfosList[n.pickedIndex])?void 0:o.itemID)!==T.EMapItem.WIN_ALL){e.next=11;break}n.itemInfosList.forEach((function(e,t){t!==n.pickedIndex&&k.addTask("mapGameCollectItem",{tier:a,itemIndex:t,itemInfo:e})})),e.next=13;break;case 11:if(i!==T.EMapItem.END){e.next=13;break}return e.abrupt("return",1);case 13:k.addTask("mapGameUpgrade",{tier:a+1});case 14:case"end":return e.stop()}}),e)})),y=u+1;case 30:if(!(y<r.length)){e.next=37;break}return e.delegateYield(f(y),"t0",32);case 32:if(!e.t0){e.next=34;break}return e.abrupt("break",37);case 34:++y,e.next=30;break;case 37:k.addTask("mapGameMultiply",{score:n}),e.next=41;break;case 40:i||(c=T.EGameMode.MAP,k.addTask("mapGameSellOil",{mapStageIndexInGroup:l.indexInGroup,score:n,totalScore:this._currentTotalScore+n}));case 41:c!==T.EGameMode.NORMAL&&(k.addTask("mapGameSettle",{super:c===T.EGameMode.SUPER_MAP,score:n}),k.addTask("mapGameTransit",{mapStageID:t,mapStageInfo:l}),n>0&&(k.addTask("bigWin",{score:n}),this._currentTotalScore+=n,k.addTask("spinBreak",{totalScore:this._currentTotalScore,score:c===T.EGameMode.MAP?0:n,shouldBreak:!0,breakInFreeGame:!1}))),k.addTask("normalGameBack",null);case 43:case"end":return e.stop()}}),e,this)})),n._symbolsDataToGroups=function(e,a){var t=[[],[],[],[],[]],s=0;return e.sort((function(e,a){return e.col-a.col})),e.forEach((function(e){var o=t[e.col-1];null!=o&&(o.length=0,e.icon.forEach((function(e){var t;o.push({id:e,score:15===e&&null!=(t=a[s++])?t:0})})),o.reverse())})),t},n._paywaysDataToColumnsMap=function(e){var a=new Map,t=0;return e.forEach((function(e){a.set(e.icon,e.col-1),t=Math.max(t,e.col-1)})),t>0&&a.set(m.WILD_SYMBOL_ID,t),a},n._updateFeatureProgresses=function(e,a){a.forEach((function(a){var t=m.getTowerType(a.id);null!=t&&(e[t]=a.state)}))},n._updateJackpotBonuses=function(e,a){a.forEach((function(a){var t=m.getJackpotType(a.id);null!=t&&(e[t]=a.num)})),e[T.EJackpotType.DOUBLE_GRAND]=2*e[T.EJackpotType.GRAND]},n._updateJackpotPickedLocations=function(e){var a;this._cachedJackpotPickedLocationsList.length=0,(a=this._cachedJackpotPickedLocationsList).push.apply(a,e)},n._mapItemsDataToInfos=function(e,a){var t=this,s=[];if(e.length>0){var o=Math.max(0,a-1);e.slice(1,o+1).forEach((function(e){return s.push(t._mapItemDataToInfo(e))})),s.push(this._mapItemDataToInfo(e[0])),e.slice(o+1).forEach((function(e){return s.push(t._mapItemDataToInfo(e))}))}return s},n._mapItemDataToInfo=function(e){return{itemID:e.item_id,value:e.num}},n._updateMapItemPickedResults=function(e){var a=this;this._cachedMapItemPickedResultsList.length=0,e.forEach((function(e){a._cachedMapItemPickedResultsList.push({pickedIndex:e.pos-1,itemInfosList:a._mapItemsDataToInfos(e.item_list,e.pos)})}))},n._isBonusGameTriggered=function(e){return e.jackpot_open.length>0},n._isFreeGameTriggered=function(e){return e.length>0},n._isMapGameTriggered=function(e,a){return e.length>0||a>0},n._onConnectionClose=function(e){Log.d(e.module+" 断开连接!"),k.clearTasks()},n._onPlayBack=function(){this._handlePlayBackData(!1)},o(r,[{key:"_gameService",get:function(){return App.serviceManager.get(_)}},{key:"_gameSender",get:function(){return App.senderManager.get(y)}}]),r}(l))||S)||S);r._RF.pop()}}}));

System.register("chunks:///_virtual/BigWinControllerLayer3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BigWinLayer7.ts","./SubGameData18.ts","./Display3.ts"],(function(n){var i,t,a,e,o,r,s;return{setters:[function(n){i=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator},function(n){e=n.default},function(n){o=n.SubGameData},function(n){r=n.DisplayTaskManager,s=n.Display}],execute:function(){var l;t._RF.push({},"0ac94GX/fpPxaU6sjU97WIG","BigWinControllerLayer",void 0);var u=a.ccclass,c=a.menu;a.property,n("BigWinControllerLayer",u("BigWinControllerLayer")(l=c(o.module+"/layers/BigWinControllerLayer")(l=function(n){function t(){return n.apply(this,arguments)||this}i(t,n);var a=t.prototype;return a.onLoad=function(){n.prototype.onLoad.call(this),r.addHandler(this)},a.onTaskInitialize=function(n,i){this.stopAllDisplays(),App.uiManager.close(e)},a.onTaskBigWin=function(n,i){var t=this,a=i.score/o.totalBet;e.isBigWin(a)&&(this.startDisplay(),App.uiManager.open({type:e,bundle:o.module,args:[-1,i.score,function(){t.isValid&&t.endDisplay()},a]}))},t}(s))||l)||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/BigWinDefines2.ts",["cc"],(function(o){var i;return{setters:[function(o){i=o.cclegacy}],execute:function(){i._RF.push({},"7acb8ZW4wNOxLletS26gHgx","BigWinDefines",void 0);o("SoundName",function(o){return o.sound_big="commonmodule/bigwin/audio/big",o.sound_mega="commonmodule/bigwin/audio/mega",o.sound_epic="commonmodule/bigwin/audio/epic",o.sound_super="commonmodule/bigwin/audio/super",o.sound_ultimate="commonmodule/bigwin/audio/ultimate",o.sound_big_win_01="commonmodule/bigwin/audio/sound_big_win_01",o.sound_epic_win_01="commonmodule/bigwin/audio/sound_epic_win_01",o.sound_super_win_01="commonmodule/bigwin/audio/sound_super_win_01",o.sound_mega_win_01="commonmodule/bigwin/audio/sound_mega_win_01",o.sound_ultimate_win_01="commonmodule/bigwin/audio/sound_ultimate_win_01",o.sound_big_win_02="commonmodule/bigwin/audio/sound_big_win_02",o.sound_epic_win_02="commonmodule/bigwin/audio/sound_epic_win_02",o.sound_super_win_02="commonmodule/bigwin/audio/sound_super_win_02",o.sound_mega_win_02="commonmodule/bigwin/audio/sound_mega_win_02",o.sound_ultimate_win_02="commonmodule/bigwin/audio/sound_ultimate_win_02",o.sound_big_win_03="commonmodule/bigwin/audio/sound_big_win_03",o.sound_epic_win_03="commonmodule/bigwin/audio/sound_epic_win_03",o.sound_super_win_03="commonmodule/bigwin/audio/sound_super_win_03",o.sound_mega_win_03="commonmodule/bigwin/audio/sound_mega_win_03",o.sound_ultimate_win_03="commonmodule/bigwin/audio/sound_ultimate_win_03",o}({})),o("preloadAudio_bigwin",["commonmodule/bigwin/audio/big","commonmodule/bigwin/audio/epic","commonmodule/bigwin/audio/mega","commonmodule/bigwin/audio/super","commonmodule/bigwin/audio/ultimate","commonmodule/bigwin/audio/sound_big_win_01","commonmodule/bigwin/audio/sound_big_win_02","commonmodule/bigwin/audio/sound_big_win_03","commonmodule/bigwin/audio/sound_epic_win_01","commonmodule/bigwin/audio/sound_epic_win_02","commonmodule/bigwin/audio/sound_epic_win_03","commonmodule/bigwin/audio/sound_mega_win_01","commonmodule/bigwin/audio/sound_mega_win_02","commonmodule/bigwin/audio/sound_mega_win_03","commonmodule/bigwin/audio/sound_super_win_01","commonmodule/bigwin/audio/sound_super_win_02","commonmodule/bigwin/audio/sound_super_win_03","commonmodule/bigwin/audio/sound_ultimate_win_01","commonmodule/bigwin/audio/sound_ultimate_win_02","commonmodule/bigwin/audio/sound_ultimate_win_03"]);i._RF.pop()}}}));

System.register("chunks:///_virtual/BigWinLayer7.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./NumberRoller.ts","./SubGameData18.ts","./AudioHelper3.ts"],(function(i){var e,n,t,a,o,s,c,l,r,_,p,u,f,S,I,E,h,y,d;return{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inheritsLoose,t=i.initializerDefineProperty,a=i.assertThisInitialized,o=i.createClass},function(i){s=i.cclegacy,c=i._decorator,l=i.Node,r=i.sp,_=i.Animation,p=i.find,u=i.ParticleSystem2D,f=i.tween,S=i.Vec3},function(i){I=i.default},function(i){E=i.inject},function(i){h=i.NumberRoller},function(i){y=i.SubGameData},function(i){d=i.AudioHelper}],execute:function(){var m,U,w,A,g,b,N,T,B,k,D,L,W,G,R,O,C,v,P,M,V,z;s._RF.push({},"738c5Vr369OIoDpbhU/6G0s","BigWinLayer",void 0);var X=c.ccclass,H=c.menu,F=c.property;i("default",(m=X("BigWinLayer"),U=H(y.module+"/commonmodule/bigwin/BigWinLayer"),w=E("content",l),A=F({displayName:"glow1",type:r.Skeleton}),g=F({displayName:"thecoins",type:l}),b=F({displayName:"coin",type:l}),N=F({displayName:"animation",type:r.Skeleton}),T=F({displayName:"dk",type:r.Skeleton}),B=F({displayName:"winScoreNode",type:l}),k=F({displayName:"winScore",type:h}),D=F({displayName:"animCoin",type:_}),m(L=U((G=e((W=function(i){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=i.call.apply(i,[this].concat(o))||this,t(e,"content",G,a(e)),t(e,"glow1",R,a(e)),t(e,"thecoins",O,a(e)),t(e,"coin",C,a(e)),t(e,"animation",v,a(e)),t(e,"dk",P,a(e)),t(e,"winScoreNode",M,a(e)),t(e,"winScore",V,a(e)),t(e,"animCoin",z,a(e)),e.cinType=[2,3,10,6,4,3,3,3,3,3,3,3,3,3,3,3,1,1],e.winTypeSkin=["default","big","super","epic","mega","ultimate"],e.winTypeSkinAni=["ani_intro","ani_idle_big","ani_idle_super","ani_idle_epic","ani_idle_mega","ani_idle_ultimate"],e.winTypeAnim=["ani_idle","ani_intro","ani_out"],e.winTypeDuration=[0,6.4,6.4,8,8,11.2],e.winType=0,e.winNum=0,e.WinMusicTimes=[0,3,3,4,4,6],e.cb=null,e.tb=1,e.close_type=0,e.scoreTween=null,e.isout=!1,e}n(e,i),e.getPrefabUrl=function(){return"commonmodule/bigwin/prefabs/BigWinLayer"};var s=e.prototype;return s.onLoad=function(){i.prototype.onLoad.call(this),this.onN(p("mask",this.node),l.EventType.TOUCH_END,this.onQuickClose)},s.addEvents=function(){i.prototype.addEvents.call(this)},e.isBigWin=function(i){return i>=5},s.onShow=function(){if(this.args&&this.args.length>0){if(this.winType=this.args[0],this.winNum=this.args[1],this.cb=this.args[2],this.winType<=0&&this.args.length>3){var e=this.args[3];this.winType=e>=5&&e<10?1:e>=10&&e<15?2:e>=15&&e<30?3:e>=30&&e<50?4:5}this.stopScoreEffect(),this.isout=!1,this.close_type=0,this.coin.active=!1,this.glow1.node.active=!1,this.animCoin.stop(),this.dk.node.active=!1,this.init(this.winType,this.winNum,this.args[2]),this.playBigWinStartSound(this.winTypeSkin[this.winType])}i.prototype.onShow.call(this)},s.onClose=function(){this.unscheduleAllCallbacks(),this._stopAllEffect(this.winTypeSkin[this.winType]),i.prototype.onClose.call(this)},s.init=function(i,e,n){for(var t=this,a=0;a<this.thecoins.children.length;a++){this.thecoins.children[a].getComponent(u).emissionRate=this.cinType[a]}this.animation.clearTracks(),this.animation.node.active=!0,this.animation.setSkin(this.winTypeSkin[i]),this.playBigWinVocals(this.winTypeSkin[i]),this.animation.setAnimation(0,this.winTypeAnim[1],!1),this.animation.addAnimation(0,this.winTypeAnim[0],!0);var o=0;this.animation.setCompleteListener((function(e){(e.animation?e.animation.name:"")===t.winTypeAnim[0]&&++o===t.WinMusicTimes[i]&&t.stopAnimation()})),this.dk.setAnimation(0,this.winTypeSkinAni[0],!1),this.glow1.node.active=!0,this.glow1.setAnimation(0,"glow_intro",!1),this.dk.node.active=!0,this.scheduleOnce((function(){var e;"ani_idle_out"!=(null==(e=t.dk.getComponent(r.Skeleton))?void 0:e.animation)&&(t.dk.setAnimation(0,t.winTypeSkinAni[i],!1),t.glow1.setAnimation(0,"glow_idle",!0))}),2),this.scheduleOnce((function(){t.coin.active=!0,t.winType<=2?t.animCoin.play("coin_ani_level12"):t.winType>2&&t.winType<5?t.animCoin.play("coin_ani_level34"):t.animCoin.play("coin_ani_level5")}),1),this.winScore.startRolling(0,e,this.winTypeDuration[i],(function(){f(t.winScoreNode).to(.2,{scale:new S(1.5,1.5,1.5)}).to(.2,{scale:new S(1,1,1)}).start()}))},s.onQuickClose=function(){this.isout||(0==this.close_type?(this.StopBigWinStartSound(this.winTypeSkin[this.winType]),this.playBigWinFinishSound(this.winTypeSkin[this.winType]),this.stopAnimation()):1==this.close_type&&(this.playBigWinlastSound(this.winTypeSkin[this.winType]),this.unscheduleAllCallbacks(),this.stopAndCloseView()))},s.stopAnimation=function(){var i=this;this.close_type=1,this.winScore.stopRollingAndShowNumber(this.winNum),this.animation.setAnimation(0,this.winTypeAnim[2],!1),this.animation.setCompleteListener((function(e){(e.animation?e.animation.name:"")===i.winTypeAnim[2]&&(i.animation.node.active=!1,i.dk.node.active=!1,i.isout=!0,i.glow1.node.active=!1)})),this.dk.setAnimation(0,"ani_idle_out",!1),this.glow1.setAnimation(0,"glow_out",!1),this.scheduleOnce((function(){for(var e=0;e<i.thecoins.children.length;e++){i.thecoins.children[e].getComponent(u).emissionRate=0}}),.01),this.scheduleOnce((function(){for(var e=0;e<i.thecoins.children.length;e++){i.thecoins.children[e].getComponent(u).spriteFrame=null}i.animCoin.stop()}),1.5),this.scheduleOnce((function(){i.stopAndCloseView()}),1.5)},s.playScoreEffect=function(){this.scoreTween=f(this.dk.node).to(.4,{scale:new S(1,1,1)}).to(.4,{scale:new S(.8,.8,.8)}).union().repeatForever().start()},s.stopScoreEffect=function(){this.scoreTween&&this.scoreTween.stop()},s.stopAndCloseView=function(){this.close_type=2,this.stopScoreEffect(),this.cb&&this.cb(),d.instance.revokeLoweringMusicVolume("bigWin"),this.close()},s.playBigWinVocals=function(i){switch(i){case"big":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_SPEECH_BIG);break;case"mega":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_SPEECH_MEGA);break;case"epic":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_SPEECH_EPIC);break;case"super":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_SPEECH_SUPER);break;case"ultimate":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_SPEECH_ULTIMATE)}},s.playBigWinStartSound=function(i){switch(d.instance.requestLoweringMusicVolume(0,"bigWin"),i){case"big":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_BIG);break;case"epic":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_EPIC);break;case"super":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_SUPER);break;case"mega":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_MEGA);break;case"ultimate":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_ULTIMATE)}},s.StopBigWinStartSound=function(i){switch(i){case"big":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_BIG);break;case"epic":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_EPIC);break;case"super":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_SUPER);break;case"mega":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_MEGA);break;case"ultimate":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_ULTIMATE)}},s.playBigWinFinishSound=function(i){switch(i){case"big":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_BIG);break;case"epic":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_EPIC);break;case"super":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_SUPER);break;case"mega":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_MEGA);break;case"ultimate":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_ULTIMATE)}},s.playBigWinlastSound=function(i){switch(i){case"big":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_END_BIG);break;case"epic":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_END_EPIC);break;case"super":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_END_SUPER);break;case"mega":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_END_MEGA);break;case"ultimate":d.instance.playSoundEffect(y.AUDIO_URLS.SE_BIG_WIN_END_ULTIMATE)}},s._stopAllEffect=function(i){switch(i){case"big":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_BIG),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_BIG),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_END_BIG);break;case"epic":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_EPIC),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_EPIC),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_END_EPIC);break;case"super":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_SUPER),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_SUPER),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_END_SUPER);break;case"mega":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_MEGA),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_MEGA),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_END_MEGA);break;case"ultimate":d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_ULTIMATE),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_EXIT_ULTIMATE),d.instance.stopEffect(y.AUDIO_URLS.SE_BIG_WIN_END_ULTIMATE)}},o(e,[{key:"showAction",get:function(){var i=this;return function(e){App.utils.showView(i.content,e)}}},{key:"closeAction",get:function(){var i=this;return function(e){App.utils.hideView(i.content,e)}}}]),e}(I)).prototype,"content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(W.prototype,"glow1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(W.prototype,"thecoins",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(W.prototype,"coin",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(W.prototype,"animation",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(W.prototype,"dk",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(W.prototype,"winScoreNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(W.prototype,"winScore",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(W.prototype,"animCoin",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=W))||L)||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/BonusGameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./JackpotSymbol.ts","./AudioHelper3.ts","./GameSender18.ts"],(function(t){var a,e,o,i,s,n,c,p,l,r,y,S,_,u,E,L,k,d;return{setters:[function(t){a=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.createClass,n=t.createForOfIteratorHelperLoose},function(t){c=t.cclegacy,p=t._decorator,l=t.Tween,r=t.tween},function(t){y=t.Global},function(t){S=t.SubGameData},function(t){_=t.common},function(t){u=t.DisplayTaskManager,E=t.Display},function(t){L=t.JackpotSymbol},function(t){k=t.AudioHelper},function(t){d=t.GameSender}],execute:function(){var h,m,f,b,O,T;c._RF.push({},"ac854kFDExOmLFZ2+lr33RX","BonusGameLayer",void 0);var U=p.ccclass,N=p.menu,D=p.property;t("BonusGameLayer",(h=U("BonusGameLayer"),m=N(S.module+"/layers/BonusGameLayer"),f=D([L]),h(b=m((T=a((O=function(t){function a(){for(var a,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return a=t.call.apply(t,[this].concat(s))||this,o(a,"jackpotSymbolsList",T,i(a)),a._symbolLocationsMap=new Map,a._pickedLocationFlagsMap=new Map,a._pickedLocationsList=[],a._pickable=!1,a}e(a,t);var c=a.prototype;return c.onLoad=function(){var a=this;t.prototype.onLoad.call(this),u.addHandler(this),this.jackpotSymbolsList.forEach((function(t){return t.setClickListener(a._onSymbolClick.bind(a))}))},c.onTaskInitialize=function(t,a){var e=this;if(this.stopAllDisplays(),this._symbolLocationsMap.clear(),this._pickedLocationFlagsMap.clear(),this._pickable=!1,l.stopAllByTarget(this.node),a.gameMode===_.EGameMode.BONUS){var o,i;this.node.active=!0;var s=(null!=(o=null==(i=a.jackpotSymbolLocationsMap.get(_.EJackpotSymbolType.BOOST))?void 0:i.length)?o:0)>=3;this.jackpotSymbolsList.forEach((function(t){t.type=_.EJackpotSymbolType.UNKNOWN,t.state=L.EState.IDLE,t.setUpgraded(s,!1)})),a.jackpotSymbolLocationsMap.forEach((function(t,a){e._symbolLocationsMap.set(a,[].concat(t));var o=2===t.length?L.EState.EXCITING:L.EState.FLOPPED;t.forEach((function(t){e._pickedLocationFlagsMap.set(t,!0);var i=e.jackpotSymbolsList[t];i&&(i.type=a,i.state=o)}))}))}else this.node.active=!1},c.onTaskBonusGamePickStart=function(t,a){var e;this._pickedLocationsList.length=0,(e=this._pickedLocationsList).push.apply(e,a.jackpotSymbolPickedLocationsList),this._pickable=!y.playback},c.onTaskBonusGamePickEnd=function(t,a){var e=this;if(this._pickable=!1,!this._pickedLocationFlagsMap.has(a.index)){var o=this._critical,i=this._symbolLocationsMap.get(a.jackpotSymbol);null==i&&(i=[],this._symbolLocationsMap.set(a.jackpotSymbol,i)),i.push(a.index),this._pickedLocationFlagsMap.set(a.index,!0);var s=this.jackpotSymbolsList[a.index];if(s){this.startDisplay();var n=2===i.length&&a.jackpotSymbol!==_.EJackpotSymbolType.UNKNOWN;s.type=a.jackpotSymbol,s.flop(o,(function(t){t.state=L.EState.EXCITING,n?(e.jackpotSymbolsList.forEach((function(t){t.type===a.jackpotSymbol&&t.state===L.EState.FLOPPED&&(t.state=L.EState.EXCITING)})),a.jackpotSymbol===_.EJackpotSymbolType.GRAND&&k.instance.playSoundEffect(S.AUDIO_URLS.SE_BONUS_GAME_SPEECH_BIG_PRIZE_AHEAD)):t.state=L.EState.FLOPPED,e.endDisplay()})),a.jackpotSymbol===_.EJackpotSymbolType.BOOST?k.instance.playSoundEffect(o?S.AUDIO_URLS.SE_BONUS_GAME_PICK_BOOST_SYMBOL_CRITICALLY:S.AUDIO_URLS.SE_BONUS_GAME_PICK_BOOST_SYMBOL):k.instance.playSoundEffect(o?S.AUDIO_URLS.SE_BONUS_GAME_PICK_JACKPOT_SYMBOL_CRITICALLY:S.AUDIO_URLS.SE_BONUS_GAME_PICK_JACKPOT_SYMBOL)}}},c.onTaskBonusGameUpgrade=function(t,a){var e=this;this.startDisplay(),l.stopAllByTarget(this.node),this.jackpotSymbolsList.forEach((function(t){t.type===_.EJackpotSymbolType.BOOST&&(t.state=L.EState.WINNING)})),k.instance.playSoundEffect(S.AUDIO_URLS.SE_BONUS_GAME_COLLECT_ALL),r(this.node).delay(1.4).call((function(){e.jackpotSymbolsList.forEach((function(t){switch(t.type){case _.EJackpotSymbolType.UNKNOWN:t.setUpgraded(!0,!1);break;case _.EJackpotSymbolType.BOOST:t.setUpgraded(!0,!1),t.state=L.EState.FLOPPED;break;default:e.startDisplay(),t.setUpgraded(!0,!0,(function(){return e.endDisplay()}))}})),e.endDisplay(),k.instance.playSoundEffect(S.AUDIO_URLS.SE_BONUS_GAME_UPGRADE),k.instance.playSoundEffect(S.AUDIO_URLS.SE_BONUS_GAME_SPEECH_UPGRADE)})).start()},c.onTaskBonusGameReveal=function(t,a){var e=0;this.jackpotSymbolsList.forEach((function(t,o){var i;t.state===L.EState.IDLE?(t.type=null!=(i=a.jackpotSymbolsList[e++])?i:_.EJackpotSymbolType.UNKNOWN,t.state=L.EState.NOT_FLOPPED):t.type===a.jackpotSymbolTypeWon?t.state=L.EState.WINNING:t.state=L.EState.NOT_WON})),k.instance.playSoundEffect(S.AUDIO_URLS.SE_BONUS_GAME_COLLECT_ALL)},c.onTaskChangeGame=function(t,a){a.previousFeatureType!==a.nextFeatureType&&(a.previousFeatureType===_.EFeatureType.RED_TOWER?(this._symbolLocationsMap.clear(),this._pickedLocationFlagsMap.clear(),this._pickable=!1,this.node.active=!1):a.nextFeatureType===_.EFeatureType.RED_TOWER&&(this._symbolLocationsMap.clear(),this._pickedLocationFlagsMap.clear(),this._pickable=!1,this.node.active=!0,this.jackpotSymbolsList.forEach((function(t){t.state=L.EState.IDLE,t.type=_.EJackpotSymbolType.UNKNOWN,t.setUpgraded(!1,!1)}))))},c._onSymbolClick=function(t){this._pickable&&!this._pickedLocationFlagsMap.has(t.index)&&(this._pickedLocationsList.push(t.index),App.senderManager.get(d).c2sPickJackpotSymbol({id:this._pickedLocationsList}))},s(a,[{key:"_critical",get:function(){for(var t,a=!1,e=n(this._symbolLocationsMap);!(t=e()).done;){var o=t.value,i=o[0];if(2===o[1].length&&i!==_.EJackpotSymbolType.UNKNOWN&&i!==_.EJackpotSymbolType.BOOST){a=!0;break}}return a}}]),a}(E)).prototype,"jackpotSymbolsList",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=O))||b)||b));c._RF.pop()}}}));

System.register("chunks:///_virtual/BonusGameTitleLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./Display3.ts","./AudioHelper3.ts"],(function(t){var e,i,n,a,o,s,l,r,c,u,p,h,y,m,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,l=t.UIOpacity,r=t.Node,c=t.sp,u=t.Tween,p=t.tween},function(t){h=t.SubGameData},function(t){y=t.DisplayTaskManager,m=t.Display},function(t){_=t.AudioHelper}],execute:function(){var d,f,I,D,O,k,S,N,H,T;o._RF.push({},"035feLmFtFIvZ8z7n0ZUIKp","BonusGameTitleLayer",void 0);var U=s.ccclass,A=s.menu,E=s.property,b=function(t){return t[t.HIDDEN=0]="HIDDEN",t[t.SHOWING=1]="SHOWING",t[t.SHOWN=2]="SHOWN",t[t.HIDING=3]="HIDING",t}(b||{}),G="animation1",L="animation2",B="animation3";t("BonusGameTitleLayer",(d=U("BonusGameTitleLayer"),f=A(h.module+"/layers/BonusGameTitleLayer"),I=E(l),D=E(r),O=E(c.Skeleton),d(k=f((N=e((S=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"maskUIOpacity",N,a(e)),n(e,"inputBlockerNode",H,a(e)),n(e,"skeleton",T,a(e)),e._state=b.HIDDEN,e}i(e,t);var o=e.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this),y.addHandler(this),this.inputBlockerNode.on(r.EventType.TOUCH_END,this._onTouchEnd,this),this.skeleton.setCompleteListener(this._onSkeletonAnimationComplete.bind(this))},o.onTaskInitialize=function(t,e){this.stopAllDisplays(),this._state=b.HIDDEN,this.node.active=!1},o.onTaskBonusGameStart=function(t,e){this.stopAllDisplays(),this.startDisplay(),this._state=b.SHOWING,this.node.active=!0,this.skeleton.setAnimation(0,G,!1),u.stopAllByTarget(this.maskUIOpacity),this.maskUIOpacity.opacity=0,p(this.maskUIOpacity).to(.3,{opacity:255}).start(),_.instance.playSoundEffect(h.AUDIO_URLS.SE_POPUP_BONUS_GAME_START)},o._hide=function(){this._state===b.SHOWN&&(this._state=b.HIDING,this.skeleton.setAnimation(0,B,!1),u.stopAllByTarget(this.maskUIOpacity),p(this.maskUIOpacity).delay(.6).to(.25,{opacity:0}).start(),_.instance.playSoundEffect(h.AUDIO_URLS.SE_COMMON_POPUP_HIDE))},o._onTouchEnd=function(){this._hide(),_.instance.playSoundEffect(h.AUDIO_URLS.SE_COMMON_BUTTON_CLICK)},o._onSkeletonAnimationComplete=function(t){switch(t.animation.name){case G:this._state=b.SHOWN,this.skeleton.setAnimation(0,L,!1);break;case L:this._hide();break;case B:this._state=b.HIDDEN,this.node.active=!1,this.endDisplay()}},e}(m)).prototype,"maskUIOpacity",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(S.prototype,"inputBlockerNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(S.prototype,"skeleton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=S))||k)||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/ControllerLayer3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./Config.ts","./CommonEvent.ts","./BigWinLayer7.ts","./GamePlay3.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./AudioHelper3.ts","./GameSender18.ts"],(function(t){var n,e,o,i,a,s,r,c,l,S,_,u,T,p,h,I;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Tween,a=t.tween},function(t){s=t.Global},function(t){r=t.ViewZOrder},function(t){c=t.CommonEvent},function(t){l=t.default},function(t){S=t.default},function(t){_=t.SubGameData},function(t){u=t.common},function(t){T=t.DisplayTaskManager,p=t.Display},function(t){h=t.AudioHelper},function(t){I=t.GameSender}],execute:function(){var f;e._RF.push({},"b689fTtxMNPuo9i95QT0Iys","ControllerLayer",void 0);var d=o.ccclass,E=o.menu,O=(o.property,"winScore"),N=function(){return h.instance.revokeLoweringMusicVolume(O)};t("ControllerLayer",d("ControllerLayer")(f=E(_.module+"/layer/ControllerLayer")(f=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._spinnable=!0,n._currentTotalScore=0,n._freeTimes=0,n._initCountForChangingBet=0,n}n(e,t);var o=e.prototype;return o.onLoad=function(){var n;null==(n=t.prototype.onLoad)||n.call(this),T.addHandler(this),this.onD(c.DISPATCH_SPIN_START,this._onControllerSpinStart),this.onD(c.DISPATCH_SPIN_STOP,this._onControllerSpinStop),this.onD(c.DISPATCH_TOTAL_BET,this._onTotalBetChange),this.onD(c.DISPATCH_START_AUTOPLAY,this._onAutoPlayStateChange),this.onD(c.DISPATCH_QUICK_SPIN,this._onQuickSpinChange),this.onD(c.DISPATCH_TURBO_SPIN,this._onTurboSpinChange),this.onD(c.DISPATCH_SKIP_SCREENS,this._onSkipScreensChange),this.onD(c.DISPATCH_GAME_PLAY,this._onShowHelp),dispatch(c.NOTIFY_NO_INTRO)},o.start=function(){var n;if(null==(n=t.prototype.start)||n.call(this),dispatch(c.NOTIFY_GMTOOL_VISIBLE,_.gmEnabled),!s.playback){var e,o=null!=(e=_.slotInfo.mode)?e:0;1===o?dispatch(c.NOTIFY_QUICK_SPIN,!0):2===o?dispatch(c.NOTIFY_TURBO_SPIN,!0):(dispatch(c.NOTIFY_QUICK_SPIN,!1),dispatch(c.NOTIFY_TURBO_SPIN,!1))}},o.onTaskInitialize=function(t,n){this.stopAllDisplays();var e=this._spinnable,o=n.gameMode===u.EGameMode.NORMAL;this._spinnable=o,this._currentTotalScore=o?0:n.currentScoreInSpecialMode,this._freeTimes=n.gameMode===u.EGameMode.FREE?n.freeTimesRemaining:0,++this._initCountForChangingBet,dispatch(c.NOTIFY_SLOT_INFO,_.slotInfo),dispatch(c.NOTIFY_USERINFO_SCORE,n.balance),i.stopAllByTarget(this.node),i.stopAllByTarget(this),this._stopWinScoreSoundEffect(),o?e||dispatch(c.NOTIFY_SPIN_END):(dispatch(c.NOTIFY_FREE_MODE),dispatch(c.NOTIFY_WINSCORE_TIPS,this._currentTotalScore,!1))},o.onTaskSpinStart=function(t,n){this._spinnable=!1,n.spinType===u.ESpinType.FREE?dispatch(c.NOTIFY_SPIN_STOP_NORMAL,!0):this._stopWinScoreSoundEffect()},o.onTaskSpinStop=function(t,n){n.spinType===u.ESpinType.FREE?this._freeTimes=Math.max(0,this._freeTimes-1):(this._currentTotalScore=0,dispatch(c.NOTIFY_BALANCE_SCORE,n.balance))},o.onTaskSpinEnd=function(t,n){dispatch(c.NOTIFY_SPIN_STOP_NORMAL,!1)},o.onTaskSpinBreak=function(t,n){var e=this;if(n.score>0&&(this._currentTotalScore=n.totalScore,dispatch(c.NOTIFY_WINSCORE_TIPS,this._currentTotalScore,!1),this._playWinScoreSoundEffect(n.score)),i.stopAllByTarget(this.node),_.autoPlaying||n.shouldBreak){this.startDisplay();var o=_.turboSpin||_.quickSpin?.1:.366667;n.score>0&&(o=1),a(this.node).delay(o).call((function(){e._freeTimes>0&&dispatch(c.NOTIFY_SPIN_START_NORMAL),e.endDisplay()})).start()}},o.onTaskBonusGameTransit=function(t,n){"enter"===n.type&&(dispatch(c.NOTIFY_FREE_MODE),this._currentTotalScore>0&&dispatch(c.NOTIFY_WINSCORE_TIPS,this._currentTotalScore,!1))},o.onTaskFreeGameTransit=function(t,n){"enter"===n.type&&(dispatch(c.NOTIFY_FREE_MODE),this._currentTotalScore>0&&dispatch(c.NOTIFY_WINSCORE_TIPS,this._currentTotalScore,!1))},o.onTaskMapGameMoveCursor=function(t,n){dispatch(c.NOTIFY_FREE_MODE),this._currentTotalScore>0&&dispatch(c.NOTIFY_WINSCORE_TIPS,this._currentTotalScore,!1)},o.onTaskFreeGameStart=function(t,n){this._freeTimes=_.INITIAL_FREE_TIMES},o.onTaskFreeGameCollectScores=function(t,n){var e=this;this._currentTotalScore=n.totalScore,i.stopAllByTarget(this),a(this).delay(1).call((function(){dispatch(c.NOTIFY_WINSCORE_TIPS,e._currentTotalScore,!1),e._playWinScoreSoundEffect(n.score)})).start()},o.onTaskFreeGameCollectJackpot=function(t,n){var e=this;this._currentTotalScore=n.totalScore,i.stopAllByTarget(this),a(this).delay(1).call((function(){return dispatch(c.NOTIFY_WINSCORE_TIPS,e._currentTotalScore,!1)})).start()},o.onTaskFreeGameCollectFreeTimes=function(t,n){this._freeTimes=n.totalFreeTimes},o.onTaskRoundEnd=function(t,n){this._spinnable=!0,this._currentTotalScore=0,this._freeTimes=0,null!==n.balance&&void 0!==n.balance&&dispatch(c.NOTIFY_BALANCE_SCORE,n.balance),dispatch(c.NOTIFY_SPIN_END)},o.onTaskUpdateTotalScoreAfterSellingOil=function(t,n){this._currentTotalScore=n.totalScore,dispatch(c.NOTIFY_WINSCORE_TIPS,this._currentTotalScore,!0),this._playWinScoreSoundEffect(n.score)},o._playWinScoreSoundEffect=function(t){t<=0||(l.isBigWin(t/_.totalBet)?h.instance.playSoundEffect(_.AUDIO_URLS.SE_WIN_BIG_SCORE):h.instance.playSoundEffect(_.AUDIO_URLS.SE_WIN_SCORE),h.instance.requestLoweringMusicVolume(.2,O),this.scheduleOnce(N,1))},o._stopWinScoreSoundEffect=function(){this.unschedule(N),N(),h.instance.stopEffect(_.AUDIO_URLS.SE_WIN_BIG_SCORE),h.instance.stopEffect(_.AUDIO_URLS.SE_WIN_SCORE)},o._onControllerSpinStart=function(t){var n,e;(void 0===t&&(t=0),this._spinnable)&&(0!==t?null==(n=_.spinRequestor)||n.request(u.ESpinRequestType.GM_SPIN,t):null==(e=_.spinRequestor)||e.request(u.ESpinRequestType.SPIN))},o._onControllerSpinStop=function(){_.turboSpin||_.quickSpin||T.runTask("manualStop",null)},o._onTotalBetChange=function(t){var n=this._initCountForChangingBet;this._initCountForChangingBet=Math.max(0,this._initCountForChangingBet-1),null!=t&&(_.totalBet=t,n<=0&&App.senderManager.get(I).c2sChangeBet({bet:t},u.EChangeBetRequestType.CHANGE_BET))},o._onAutoPlayStateChange=function(t){_.autoPlaying=t},o._onQuickSpinChange=function(t){_.quickSpin=t},o._onTurboSpinChange=function(t){_.turboSpin=t},o._onSkipScreensChange=function(t){_.skipScreens=t},o._onShowHelp=function(){App.uiManager.open({type:S,bundle:_.module,zIndex:r.UI})},e}(p))||f)||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/CountdownableButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts"],(function(t){var e,n,r,o,i,a,s,u,l,c,p,y,f,b,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.createClass},function(t){a=t.cclegacy,s=t._decorator,u=t.Animation,l=t.ProgressBar,c=t.Button,p=t.Enum,y=t.EventHandler,f=t.tween,b=t.Tween,h=t.Component},function(t){g=t.SubGameData}],execute:function(){var m,d,C,w,B,v,T,_,L,E,S,k,z,A,D,O;a._RF.push({},"d8b820mZSNLc6ULv22jyKCs","CountdownableButton",void 0);var R=s.ccclass,P=s.menu,j=s.property,F=function(t){return t[t.START=0]="START",t[t.COLLECT=1]="COLLECT",t}(F||{});t("CountdownableButton",(m=R("CountdownableButton"),d=P(g.module+"/elements/CountdownableButton"),C=j(u),w=j(l),B=j(c),v=j({type:p(F)}),T=j([y]),_=j({type:p(F)}),m(L=d(((O=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,r(e,"animation",S,o(e)),r(e,"progressBar",k,o(e)),r(e,"button",z,o(e)),r(e,"clickEvents",A,o(e)),r(e,"_type",D,o(e)),e}n(e,t);var a=e.prototype;return a.onLoad=function(){this._refreshStyle(),this.progressBar.progress=0},a.startCountdown=function(t,e){var n=this;this.stopCountdown(),f(this.progressBar).to(t,{progress:1}).call((function(){return null==e?void 0:e(n)})).start()},a.stopCountdown=function(){b.stopAllByTarget(this.progressBar),this.progressBar.progress=0},a.onButtonClick=function(t,e){this.stopCountdown(),y.emitEvents(this.clickEvents,t,e)},a._refreshStyle=function(){this._type===F.COLLECT?this.animation.play("style-collect"):this.animation.play("style-start")},i(e,[{key:"type",get:function(){return this._type},set:function(t){t!=this._type&&(this._type=t,this._refreshStyle())}},{key:"interactable",get:function(){return this.button.interactable},set:function(t){this.button.interactable=t}}]),e}(h)).EType=F,S=e((E=O).prototype,"animation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"progressBar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(E.prototype,"button",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(E.prototype,"type",[v],Object.getOwnPropertyDescriptor(E.prototype,"type"),E.prototype),A=e(E.prototype,"clickEvents",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=e(E.prototype,"_type",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.START}}),L=E))||L)||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/DebugVersion3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Config.ts","./CommonEvent.ts","./SubGameData18.ts"],(function(n){var e,t,i,o,r,a,s,u,c,l,p,f;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,s=n.Label,u=n.view},function(n){c=n.default},function(n){l=n.Config},function(n){p=n.CommonEvent},function(n){f=n.SubGameData}],execute:function(){var g,b,h,v,d,m;r._RF.push({},"482dbfZQUVLvpxGodWLYA4y","DebugVersion",void 0);var D=a.ccclass,L=a.menu,y=a.property;n("DebugVersion",(g=D("DebugVersion"),b=L(f.module+"/components/DebugVersion"),h=y(s),g(v=b((m=e((d=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r))||this,i(e,"versionLabel",m,o(e)),e}t(e,n);var r=e.prototype;return r.onLoad=function(){this.onD(p.SWITCH_SCREEN,this._onOrientationChange)},r.start=function(){this.versionLabel.string="v0.4.1",this.versionLabel.node.active=l.isDebugLogin,this._onOrientationChange(App.utils.getOrientation())},r._onOrientationChange=function(n){var e=u.getVisibleSize();this.node.setPosition(.5*e.width,.5*e.height,1)},e}(c)).prototype,"versionLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=d))||v)||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/Defines3.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"3f489LfS/lDcZ/1axgqXinb","Defines",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Display3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts"],(function(t){var n,s,e,a,i;return{setters:[function(t){n=t.createClass,s=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy},function(t){i=t.default}],execute:function(){a._RF.push({},"fc212SR101MRYReRwrtDN9E","Display",void 0);var o=t("DisplayTaskManager",function(){function t(){}return t.clearTasks=function(){this._sTasksQueue.length=0},t.addTask=function(t,n){this._sTasksQueue.push({name:t,data:n})},t.runTask=function(t,n){Log.d("run display task: "+t),this._sHandlersSet.forEach((function(s){var e=s["onTask"+t[0].toUpperCase()+t.substring(1)];null!=e&&e.call(s,t,n)}))},t.runNextTask=function(){if(!(r.displaying||this._sTasksQueue.length<=0)){var t=this._sTasksQueue.shift();null!=t&&this.runTask(t.name,t.data)}},t.clearHandlers=function(){this._sHandlersSet.clear()},t.addHandler=function(t){this._sHandlersSet.add(t)},t.removeHandler=function(t){return this._sHandlersSet.delete(t)},t}());o._sTasksQueue=[],o._sHandlersSet=new Set;var r=t("DisplayPool",function(){function t(){}return t.clear=function(){this._sPoolSet.clear()},t.add=function(t){this._sPoolSet.add(t)},t.remove=function(t){return this._sPoolSet.delete(t)},n(t,null,[{key:"displaying",get:function(){for(var t,n=e(this._sPoolSet);!(t=n()).done;){if(t.value.displaying)return!0}return!1}}]),t}());r._sPoolSet=new Set;t("Display",function(t){function e(){for(var n,s=arguments.length,e=new Array(s),a=0;a<s;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this)._displayCount=0,n}s(e,t);var a=e.prototype;return a.onLoad=function(){r.add(this)},a.onDestroy=function(){r.remove(this)},a.stopAllDisplays=function(){this._displayCount=0},a.startDisplay=function(){++this._displayCount},a.endDisplay=function(){this._displayCount<=0||--this._displayCount},n(e,[{key:"displaying",get:function(){return this._displayCount>0}}]),e}(i));a._RF.pop()}}}));

System.register("chunks:///_virtual/ExBannerContentProvider3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BannerContentProvider.ts","./SubGameData18.ts"],(function(n){var e,t,r,o,i;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,r=n._decorator},function(n){o=n.BannerContentProvider},function(n){i=n.SubGameData}],execute:function(){var c;t._RF.push({},"c0e2fiKcz5IEbK3c/2z1TWc","ExBannerContentProvider",void 0);var a=r.ccclass,u=(r.property,r.menu);n("ExBannerContentProvider",a("ExBannerContentProvider")(c=u(i.module+"/components/ExBannerContentProvider")(c=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.dataList=function(){return["<img src='1'/>","<img src='2'/>","<img src='3'/>"]},t}(o))||c)||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/FrameLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./AudioHelper3.ts"],(function(e){var t,n,o,i,a,l,r,c,s,u,p,m,E,y,h,g,f,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,r=e.Animation,c=e.sp,s=e.ProgressBar,u=e.Button,p=e.Tween,m=e.tween,E=e.math},function(e){y=e.SubGameData},function(e){h=e.common},function(e){g=e.DisplayTaskManager,f=e.Display},function(e){S=e.AudioHelper}],execute:function(){var T,d,b,_,k,A,R,v,B,D,L,F,M,P,O,N,I,C,G,U,w,H,W,z,x,Q,j;a._RF.push({},"6df76AokQFELZh7SyQn7Nin","FrameLayer",void 0);var K=l.ccclass,Z=l.menu,q=l.property,J=((T={})[h.EFeatureType.NONE]="style-0",T[h.EFeatureType.GREEN_TOWER]="style-1",T[h.EFeatureType.BLUE_TOWER]="style-2",T[h.EFeatureType.BLUE_AND_GREEN_TOWER]="style-3",T[h.EFeatureType.RED_TOWER]="style-4",T[h.EFeatureType.RED_AND_GREEN_TOWER]="style-1",T[h.EFeatureType.RED_AND_BLUE_TOWER]="style-2",T[h.EFeatureType.SUPER_TOWER]="style-3",T),V=((d={})[h.EFeatureType.NONE]="animation4",d[h.EFeatureType.GREEN_TOWER]="animation3",d[h.EFeatureType.BLUE_TOWER]="animation2",d[h.EFeatureType.BLUE_AND_GREEN_TOWER]="animation",d[h.EFeatureType.RED_TOWER]="animation4",d[h.EFeatureType.RED_AND_GREEN_TOWER]="animation3",d[h.EFeatureType.RED_AND_BLUE_TOWER]="animation2",d[h.EFeatureType.SUPER_TOWER]="animation",d),X="animation",Y=((b={})[h.EStageType.GREEN]={normal:"animation7",super:"animation5"},b[h.EStageType.BLUE]={normal:"animation6",super:"animation4"},b[h.EStageType.PURPLE]={normal:"animation8",super:"animation3"},b[h.EStageType.RED]={normal:"animation9",super:"animation2"},b[h.EStageType.GOLD]={normal:"animation10",super:"animation1"},b);e("FrameLayer",(_=K("FrameLayer"),k=Z(y.module+"/layers/FrameLayer"),A=q(r),R=q(c.Skeleton),v=q(s),B=q(c.Skeleton),D=q(c.Skeleton),L=q(c.Skeleton),F=q(c.Skeleton),M=q(u),P=q(u),O=q(u),_(N=k((C=t((I=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,o(t,"animation",C,i(t)),o(t,"feverSkeleton",G,i(t)),o(t,"collectionProgressBar",U,i(t)),o(t,"collectionIncreaseSkeleton",w,i(t)),o(t,"collectionHighlightSkeleton",H,i(t)),o(t,"collectionAvatarSkeleton",W,i(t)),o(t,"collectionMapSkeleton",z,i(t)),o(t,"collectionAvatarButton",x,i(t)),o(t,"collectionProgressButton",Q,i(t)),o(t,"collectionMapButton",j,i(t)),t._featureType=h.EFeatureType.NONE,t}n(t,e);var a=t.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),g.addHandler(this),this.feverSkeleton.setCompleteListener(this._onFeverSkeletonAnimationComplete.bind(this))},a.onTaskInitialize=function(e,t){this.stopAllDisplays(),this._featureType=t.featureType,this.node.active=t.gameMode!==h.EGameMode.MAP&&t.gameMode!==h.EGameMode.SUPER_MAP,this.animation.play(J[t.featureType]),this.feverSkeleton.enabled=!1,this._updateProgress(1e-4*t.mapCollectionProgress,!1,!1),p.stopAllByTarget(this.collectionHighlightSkeleton.node),this.collectionHighlightSkeleton.enabled=!1,this.collectionAvatarSkeleton.setAnimation(0,X,!0),this._updateMapIcon(t.mapStageID);var n=t.gameMode===h.EGameMode.NORMAL;this.collectionAvatarButton.interactable=n,this.collectionProgressButton.interactable=n,this.collectionMapButton.interactable=n},a.onTaskSpinStart=function(e,t){this.collectionAvatarButton.interactable=!1,this.collectionProgressButton.interactable=!1,this.collectionMapButton.interactable=!1},a.onTaskSpinEnd=function(e,t){t.spinType===h.ESpinType.BET&&null!==t.mapCollectionProgress&&void 0!==t.mapCollectionProgress&&(t.symbolsGroups.some((function(e){return e.some((function(e){return y.isCollectableSymbol(e.id)}))}))&&this._updateProgress(1e-4*t.mapCollectionProgress,!0,t.mapGameTriggered))},a.onTaskHitPayways=function(e,t){t.celebrating?(this.feverSkeleton.enabled=!0,this.feverSkeleton.setAnimation(0,V[this._featureType],!1)):this.feverSkeleton.enabled=!1},a.onTaskMapGameTrigger=function(e,t){var n=this;this.startDisplay(),this.collectionHighlightSkeleton.enabled=!0,this.collectionHighlightSkeleton.setAnimation(0,"animation",!0),p.stopAllByTarget(this.collectionHighlightSkeleton.node),m(this.collectionHighlightSkeleton.node).delay(1).call((function(){n.collectionHighlightSkeleton.enabled=!1,n.endDisplay()})).start(),S.instance.playSoundEffect(y.AUDIO_URLS.SE_COLLECTION_FULL)},a.onTaskRoundEnd=function(e,t){this.collectionAvatarButton.interactable=!0,this.collectionProgressButton.interactable=!0,this.collectionMapButton.interactable=!0},a.onTaskChangeBet=function(e,t){this._updateMapIcon(t.mapStageID),this._updateProgress(1e-4*t.mapCollectionProgress,!1,!1)},a.onTaskChangeGame=function(e,t){t.previousFeatureType!==t.nextFeatureType&&(this._featureType=t.nextFeatureType,this.animation.play(J[t.nextFeatureType]))},a.onTaskShowMapGame=function(e,t){var n=t.mapStageID>=y.MAP_STAGES_NUMBER-1?0:t.mapStageID;this.node.active=!1,this._updateProgress(0,!1,!1),this._updateMapIcon(n),this.collectionHighlightSkeleton.enabled=!1},a.onTaskHideMapGame=function(e,t){this.node.active=!0},a.onCollectionIconButtonClick=function(){g.runTask("showMap",null),S.instance.playSoundEffect(y.AUDIO_URLS.SE_COMMON_BUTTON_CLICK)},a._updateProgress=function(e,t,n){var o=this;if(e=E.clamp01(e),p.stopAllByTarget(this.collectionProgressBar),!t)return this.collectionProgressBar.progress=e,void(this.collectionIncreaseSkeleton.enabled=!1);n&&this.startDisplay(),m(this.collectionProgressBar).delay(.65).call((function(){o.collectionAvatarSkeleton.setAnimation(0,"animation2",!1),o.collectionAvatarSkeleton.addAnimation(0,X,!0),o.collectionIncreaseSkeleton.enabled=!0,o.collectionIncreaseSkeleton.setAnimation(0,"animation",!1)})).to(.35,{progress:e}).call((function(){o.collectionIncreaseSkeleton.enabled=!1,n&&o.endDisplay()})).start(),S.instance.playSoundEffect(y.AUDIO_URLS.SE_COLLECTION_COLLECT)},a._updateMapIcon=function(e){var t,n=y.getMapStageInfo(e+1),o=Y[null!=(t=n.type)?t:h.EStageType.GREEN],i=n.super?o.super:o.normal;this.collectionMapSkeleton.setAnimation(0,i,!0)},a._onFeverSkeletonAnimationComplete=function(e){this.feverSkeleton.enabled=!1},t}(f)).prototype,"animation",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(I.prototype,"feverSkeleton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(I.prototype,"collectionProgressBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(I.prototype,"collectionIncreaseSkeleton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(I.prototype,"collectionHighlightSkeleton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(I.prototype,"collectionAvatarSkeleton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"collectionMapSkeleton",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(I.prototype,"collectionAvatarButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(I.prototype,"collectionProgressButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(I.prototype,"collectionMapButton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=I))||N)||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/FreeGamePopupLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NumberRoller.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./CountdownableButton.ts","./AudioHelper3.ts"],(function(t){var e,i,a,n,o,s,r,l,p,u,c,y,h,T,_,f,b,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,a=t.inheritsLoose,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.Enum,l=t.sp,p=t.UIOpacity,u=t.Tween,c=t.tween},function(t){y=t.NumberRoller},function(t){h=t.SubGameData},function(t){T=t.common},function(t){_=t.DisplayTaskManager,f=t.Display},function(t){b=t.CountdownableButton},function(t){m=t.AudioHelper}],execute:function(){var S,E,O,I,U,D,d,A,R,k,L,N,P,g,H,w,G,F,C,v,z,B,M,W,J,j,x;o._RF.push({},"1dfa0XuJrdJm6/YN6NMyJ2a","FreeGamePopupLayer",void 0);var K=s.ccclass,X=s.menu,Y=s.property,q=function(t){return t[t.START=1]="START",t[t.SETTLE=2]="SETTLE",t}(q||{}),Q=function(t){return t[t.HIDDEN=0]="HIDDEN",t[t.SHOWING=1]="SHOWING",t[t.SHOWN=2]="SHOWN",t[t.HIDING=3]="HIDING",t}(Q||{}),V=t("FreeGamePopupSkeletonData",(S=K("FreeGamePopupSkeletonData"),E=Y({type:r(T.EFeatureType)}),O=Y(l.SkeletonData),S((D=e((U=function(){i(this,"featureType",D,this),i(this,"skeletonData",d,this)}).prototype,"featureType",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.EFeatureType.SUPER_TOWER}}),d=e(U.prototype,"skeletonData",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=U))||I));t("FreeGamePopupLayer",(A=K("FreeGamePopupLayer"),R=X(h.module+"/layers/FreeGamePopupLayer"),k=Y(p),L=Y(l.Skeleton),N=Y(p),P=Y(y),g=Y(p),H=Y(b),w=Y(p),G=Y([V]),A(F=R((v=e((C=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,i(e,"maskUIOpacity",v,n(e)),i(e,"skeleton",z,n(e)),i(e,"freeTimesUIOpacity",B,n(e)),i(e,"scoreNumberRoller",M,n(e)),i(e,"scoreUIOpacity",W,n(e)),i(e,"button",J,n(e)),i(e,"buttonUIOpacity",j,n(e)),i(e,"skeletonDatasList",x,n(e)),e._type=q.START,e._state=Q.HIDDEN,e._score=0,e._skeletonDatasHash={},e}a(e,t);var o=e.prototype;return o.onLoad=function(){var e=this;t.prototype.onLoad.call(this),_.addHandler(this),this.skeleton.setCompleteListener(this._onSkeletonAnimationComplete.bind(this)),this.skeletonDatasList.forEach((function(t){e._skeletonDatasHash[t.featureType]=t.skeletonData}))},o.onTaskInitialize=function(t,e){this.stopAllDisplays(),this._state=Q.HIDDEN,this.node.active=!1,this.button.stopCountdown()},o.onTaskFreeGameStart=function(t,e){var i=this._skeletonDatasHash[e.featureType];i&&(this._type=q.START,this._show(e.featureType===T.EFeatureType.SUPER_TOWER,i,0))},o.onTaskFreeGameSettle=function(t,e){var i=this._skeletonDatasHash[e.featureType];i&&(this._type=q.SETTLE,this._show(e.featureType===T.EFeatureType.SUPER_TOWER,i,e.totalScore))},o.onButtonClick=function(){this._hide(),m.instance.playSoundEffect(h.AUDIO_URLS.SE_COMMON_BUTTON_CLICK)},o._show=function(t,e,i){this.stopAllDisplays(),this.startDisplay(),this._state=Q.SHOWING,this._score=i,this.node.active=!0,u.stopAllByTarget(this.maskUIOpacity),this.maskUIOpacity.opacity=0,c(this.maskUIOpacity).to(.3,{opacity:255}).start(),this.skeleton.skeletonData=e,this.skeleton.setAnimation(0,"animation"+this._type+"_"+this._state,!1),u.stopAllByTarget(this.freeTimesUIOpacity),this.freeTimesUIOpacity.opacity=0,u.stopAllByTarget(this.scoreUIOpacity),this.scoreUIOpacity.opacity=0,c(this._type===q.START?this.freeTimesUIOpacity:this.scoreUIOpacity).delay(this._type===q.START?.25:.3).to(.25,{opacity:255}).start(),this._type===q.SETTLE&&this.scoreNumberRoller.startRolling(0,i,2),u.stopAllByTarget(this.buttonUIOpacity),this.buttonUIOpacity.opacity=0,this.button.type=this._type===q.START?b.EType.START:b.EType.COLLECT,this.button.interactable=!0,this.button.stopCountdown(),c(this.buttonUIOpacity).delay(this._type===q.START?.6:.45).to(.25,{opacity:255}).start(),this._type===q.SETTLE?m.instance.playSoundEffect(h.AUDIO_URLS.SE_POPUP_FREE_GAME_SETTLE):m.instance.playSoundEffect(t?h.AUDIO_URLS.SE_POPUP_SUPER_FREE_GAME_START:h.AUDIO_URLS.SE_POPUP_FREE_GAME_START)},o._hide=function(){this._state===Q.SHOWN&&(this._state=Q.HIDING,u.stopAllByTarget(this.maskUIOpacity),c(this.maskUIOpacity).delay(1).to(.2,{opacity:0}).start(),this.skeleton.setAnimation(0,"animation"+this._type+"_"+this._state,!1),this.freeTimesUIOpacity.opacity>0&&(u.stopAllByTarget(this.freeTimesUIOpacity),c(this.freeTimesUIOpacity).delay(.55).to(.25,{opacity:0}).start()),this._type===q.SETTLE&&this.scoreNumberRoller.stopRollingAndShowNumber(this._score),this.scoreUIOpacity.opacity>0&&(u.stopAllByTarget(this.scoreUIOpacity),c(this.scoreUIOpacity).delay(.6).to(.25,{opacity:0}).start()),u.stopAllByTarget(this.buttonUIOpacity),this.button.interactable=!1,this.button.stopCountdown(),c(this.buttonUIOpacity).delay(this._type===q.START?.25:.4).to(.25,{opacity:0}).start(),m.instance.stopEffect(h.AUDIO_URLS.SE_POPUP_FREE_GAME_SETTLE),m.instance.playSoundEffect(h.AUDIO_URLS.SE_COMMON_POPUP_HIDE))},o._onSkeletonAnimationComplete=function(t){var e=this,i=t.animation.name.split("_");i.length<2||(i[1]===""+Q.SHOWING?(this._state=Q.SHOWN,this.skeleton.setAnimation(0,"animation"+this._type+"_"+this._state,!0),this.button.interactable=!0,this.button.startCountdown(4,(function(){return e._hide()}))):i[1]===""+Q.HIDING&&(this._state=Q.HIDDEN,this.node.active=!1,this.button.stopCountdown(),this.endDisplay()))},e}(f)).prototype,"maskUIOpacity",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(C.prototype,"skeleton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(C.prototype,"freeTimesUIOpacity",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(C.prototype,"scoreNumberRoller",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(C.prototype,"scoreUIOpacity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(C.prototype,"button",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(C.prototype,"buttonUIOpacity",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(C.prototype,"skeletonDatasList",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=C))||F)||F));o._RF.pop()}}}));

System.register("chunks:///_virtual/FreeTimesLayer2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts"],(function(e){var t,i,s,r,a,n,o,l,T,m,u,c,F;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,n=e._decorator,o=e.Label,l=e.Tween,T=e.tween},function(e){m=e.default},function(e){u=e.SubGameData},function(e){c=e.common},function(e){F=e.DisplayTaskManager}],execute:function(){var h,f,p,d,y,_;a._RF.push({},"6824arQfwFGqLp2Zi+nhZ3a","FreeTimesLayer",void 0);var L=n.ccclass,b=n.menu,g=n.property;e("FreeTimesLayer",(h=L("FreeTimesLayer"),f=b(u.module+"/layer/FreeTimesLayer"),p=g(o),h(d=f((_=t((y=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a))||this,s(t,"freeTimesLabel",_,r(t)),t._totalFreeTimes=0,t._usedFreeTimes=0,t}i(t,e);var a=t.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),F.addHandler(this),this.node.active=!1},a.onTaskInitialize=function(e,t){l.stopAllByTarget(this.freeTimesLabel.node),this._totalFreeTimes=t.totalFreeTimes,this._usedFreeTimes=t.totalFreeTimes-t.freeTimesRemaining,this.node.active=t.gameMode===c.EGameMode.FREE,this.freeTimesLabel.string=this._usedFreeTimes+"/"+this._totalFreeTimes},a.onTaskSpinStop=function(e,t){t.spinType===c.ESpinType.FREE&&(this._usedFreeTimes=Math.min(this._usedFreeTimes+1,this._totalFreeTimes),this.node.active=!0,this.freeTimesLabel.string=this._usedFreeTimes+"/"+this._totalFreeTimes)},a.onTaskFreeGameStart=function(e,t){this._totalFreeTimes=u.INITIAL_FREE_TIMES,this._usedFreeTimes=0,this.freeTimesLabel.string=this._usedFreeTimes+"/"+this._totalFreeTimes},a.onTaskFreeGameCollectFreeTimes=function(e,t){var i=this;this._totalFreeTimes=t.totalFreeTimes,l.stopAllByTarget(this.freeTimesLabel.node),T(this.freeTimesLabel.node).delay(1.5).call((function(){i.freeTimesLabel.string=i._usedFreeTimes+"/"+i._totalFreeTimes})).start()},a.onTaskFreeGameSettle=function(e,t){this._totalFreeTimes=0,this._usedFreeTimes=0},a.onTaskChangeGame=function(e,t){this.node.active=t.nextFeatureType!==c.EFeatureType.NONE&&t.nextFeatureType!==c.EFeatureType.RED_TOWER},t}(m)).prototype,"freeTimesLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d)||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameEntry18.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Resource.ts","./Entry.ts","./Decorators.ts","./Global.ts","./CommonEvent.ts","./GameService.ts","./SubGameData18.ts","./SubGameLanguage18.ts","./GameHandler18.ts","./AnimatedSymbolNodePool2.ts","./SymbolNodePool3.ts","./BaseView3.ts","./IntroView3.ts"],(function(){var e,o,n,t,a,r,i,s,u,c,l,d,p,f,m,g,h;return{setters:[function(o){e=o.inheritsLoose},function(e){o=e.cclegacy,n=e.AudioClip,t=e.Prefab},function(e){a=e.Resource},function(e){r=e.Entry},function(e){i=e.registerEntry},function(e){s=e.Global},function(e){u=e.CommonEvent},function(e){c=e.GameService},function(e){l=e.SubGameData},function(e){d=e.SubGameLanguage},function(e){p=e.default},function(e){f=e.AnimatedSymbolNodePool},function(e){m=e.SymbolNodePool},function(e){g=e.BaseView},function(e){h=e.IntroView}],execute:function(){var b;o._RF.push({},"8704eEZhCdIOYAnA7gifOMN","GameEntry",void 0);i("GameEntry",l.module,g)(b=function(o){function r(){for(var e,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return(e=o.call.apply(o,[this].concat(t))||this).language=new d,e}e(r,o);var i=r.prototype;return i.addNetHandler=function(){App.handlerManager.get(p)},i.removeNetHandler=function(){App.handlerManager.destory(p)},i.loadResources=function(e){var o=this;this.loader.getLoadResources=function(){var e=[];for(var o in["commonmodule/bigwin/prefabs/BigWinLayer","commonmodule/gameplay/prefabs/GamePlay","prefabs/slotgame/Alert","prefabs/slotgame/AutoPlayView","prefabs/slotgame/MenuView","prefabs/slotgame/MobileBetView","prefabs/views/BaseView"].forEach((function(o){return e.push({url:o,type:t,bundle:l.module})})),l.AUDIO_URLS)o.startsWith("BGM_")&&e.push({url:l.AUDIO_URLS[o],type:n,bundle:l.module});return e},this.loader.onLoadProgress=function(e,o,n){l.setLoadingTaskProgress("resource",Math.min(e/o,.9999))},this.loader.onLoadComplete=function(e){e===a.LoaderError.SUCCESS&&(l.setLoadingTaskProgress("resource",1),m.instance.preload().then((function(e){e||o.popLoadFailed()})).catch((function(){return o.popLoadFailed()})),f.instance.preload().then((function(e){e||o.popLoadFailed()})).catch((function(){return o.popLoadFailed()})))},App.uiManager.open({type:h,bundle:l.module,args:{completeCallback:e}}).then((function(){o.loader.loadResources()})).catch((function(){return o.popLoadFailed()}))},i.initData=function(){App.serviceManager.get(c,!0),dispatch(u.NOTIFY_SWITCH_ORIENTION,"portrait"),s.playback?l.setLoadingTaskProgress("network",1):this._connectServer()},i.pauseMessageQueue=function(){},i.resumeMessageQueue=function(){},i.popLoadFailed=function(){App.alert.show({text:App.getLanguage("loadFailed",[""])})},i._connectServer=function(){var e=App.serviceManager.get(c);if(e){if(e.isConnected)return Log.d(e.module+" 断开连接中..."),void e.close();Log.d(e.module+" 连接中..."),e.connect()}else this.popLoadFailed()},r}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameHandler18.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Handler.ts","./Global.ts","./CommonEvent.ts","./GameService.ts","./SubGameData18.ts","./SubGameDefines18.ts","./LoadingHelper3.ts","./GameSender18.ts","./Protocol19.ts"],(function(e){var n,t,s,o,a,c,i,r,u,l,g,m;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){s=e.cclegacy},function(e){o=e.Handler},function(e){a=e.Global},function(e){c=e.CommonEvent},function(e){i=e.GameService},function(e){r=e.SubGameData},function(e){u=e.common},function(e){l=e.LoadingHelper},function(e){g=e.GameSender},function(e){m=e.Protocol}],execute:function(){s._RF.push({},"b861eo6kIJIOYIDBcFHBDzj","GameHandler",void 0),e("default",function(e){function s(){return e.apply(this,arguments)||this}n(s,e);var o=s.prototype;return o.onLoad=function(){e.prototype.onLoad.call(this),this.onD(c.GAME_SERVICE_CONNECTED,this._onConnectionConnected),this.onD(c.GAME_SERVICE_CLOSE,this._onConnectionClose),this.onS(m.LOGIN,this._s2cLogin),this.onS(m.USERINFO,this._s2cUserInfo),this.onS(m.SLOT_INFO,this._s2cSlotInfo),this.onS(m.BET_SPIN,this._s2cSlotBet),this.onS(m.CHANGE_BET,this._s2cChangeBet),this.onS(m.PICK_JACKPOT_SYMBOL,this._s2cPickJackpotSymbol),this.onS(m.PICK_MAP_ITEM,this._s2cPickMapItem),this.onS(m.LAST_MAP,this._s2cLastMap),this.onS(m.COLLECT_JACKPOT,this._s2cCollectJackpot)},o._onConnectionConnected=function(e){var n;Log.d(e.module+" 连接成功!"),null==(n=this.sender)||n.c2sLogin(a.gameId)},o._onConnectionClose=function(e){r.changeBetRequestTypesQueue.length=0},o._s2cLogin=function(e){var n,t;r.setLoadingTaskProgress("network",.3),e&&e.message&&1==e.message.issucc&&(a.account=e.message.account,a.currency=e.message.mtype,dispatch(c.SWITCH_CURRENCY),null==(n=this.sender)||n.c2sUserInfo(),null==(t=this.sender)||t.c2sSlotInfo())},o._s2cUserInfo=function(e){Log.d("s2cUserInfo message.money = ",e.message.money),r.setLoadingTaskProgress("network",.7),r.balance=e.message.money},o._s2cSlotInfo=function(e){r.setLoadingTaskProgress("network",1),r.slotInfo=e.message,r.gmEnabled=1===e.message.can_gm,r.isJackpotsLockable=1===e.message.is_jackpot_lock},o._s2cSlotBet=function(e){r.spinTimestamp=Date.now()},o._s2cChangeBet=function(e){var n;r.changeBetTimestamp=Date.now(),r.currentChangeBetType=null!=(n=r.changeBetRequestTypesQueue.shift())?n:u.EChangeBetRequestType.CHANGE_BET,l.instance.hide()},o._s2cPickJackpotSymbol=function(e){l.instance.hide()},o._s2cPickMapItem=function(e){l.instance.hide()},o._s2cLastMap=function(e){r.lastMap=e.message,r.lastMapTimestamp=Date.now()},o._s2cCollectJackpot=function(e){var n;null==(n=this.sender)||n.c2sChangeBet({bet:r.totalBet},u.EChangeBetRequestType.SYNCHRONISE_JACKPOTS)},t(s,[{key:"gameData",get:function(){return App.dataCenter.get(r)}},{key:"service",get:function(){return App.serviceManager.get(i)}},{key:"sender",get:function(){return App.senderManager.get(g)}}]),s}(o)).module="Game",s._RF.pop()}}}));

System.register("chunks:///_virtual/GameLogic18.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logic.ts"],(function(t){var e,i,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.Logic}],execute:function(){i._RF.push({},"de788tyiZtD5YMVruxNyVke","GameLogic",void 0);t("GameLogic",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/GamePlay3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./CommonEvent.ts","./SlotGameDefines.ts"],(function(t){var n,e,o,i,c,a,r,s,l,u,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,c=t.createClass},function(t){a=t.cclegacy,r=t._decorator,s=t.Node},function(t){l=t.default},function(t){u=t.inject},function(t){p=t.CommonEvent},function(t){f=t.SoundName}],execute:function(){var h,y,d,m,E;a._RF.push({},"6e3f3F2FOhC0aTskXQeeSy+","GamePlay",void 0);var P=r.ccclass;r.property,t("default",(h=P("GamePlay"),y=u("content",s),h((E=n((m=function(t){function n(){for(var n,e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];return n=t.call.apply(t,[this].concat(c))||this,o(n,"content",E,i(n)),n}e(n,t),n.getPrefabUrl=function(){return"commonmodule/gameplay/prefabs/GamePlay"};var a=n.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this)},a.addEvents=function(){t.prototype.addEvents.call(this)},a.onShow=function(){t.prototype.onShow.call(this)},a.onClose=function(){t.prototype.onClose.call(this)},a.onBackToGame=function(){dispatch(p.PLAY_EFFECT,f.SOUND_CLOSE_HELP_PAGE),this.close()},a.onMoreLanguage=function(){dispatch(p.PLAY_EFFECT,f.SOUND_HELP_PLAY_CHANGE),dispatch(p.NOTIFY_GAME_PLAY),this.close()},c(n,[{key:"showAction",get:function(){var t=this;return function(n){App.utils.showView(t.content,n)}}},{key:"closeAction",get:function(){var t=this;return function(n){App.utils.hideView(t.content,n)}}}]),n}(l)).prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameSender18.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Sender.ts","./Config.ts","./Global.ts","./GameService.ts","./SubGameData18.ts","./LoadingHelper3.ts","./Protocol19.ts"],(function(e){var s,n,t,i,c,a,o,r,u,g;return{setters:[function(e){s=e.inheritsLoose,n=e.createClass},function(e){t=e.cclegacy},function(e){i=e.Sender},function(e){c=e.Config},function(e){a=e.Global},function(e){o=e.GameService},function(e){r=e.SubGameData},function(e){u=e.LoadingHelper},function(e){g=e.Protocol}],execute:function(){t._RF.push({},"bd958XBW+pCA5BgMSWLfZCq","GameSender",void 0),e("GameSender",function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var i=t.prototype;return i.c2sLogin=function(e){c.isDebugLogin?this.c2sDebug_login({uid:a.userId,game_id:e,money:Number(a.money),money_type:a.currency}):this.c2sOfficial_login({token:a.token,gameid:e,direct:a.direct_login})},i.c2sDebug_login=function(e){var s,n={type:g.DEBUG_LOGIN,message:e};null==(s=this.service)||s.sendMessage(g.DEBUG_LOGIN,n)},i.c2sOfficial_login=function(e){var s,n={type:g.LOGIN,message:e};null==(s=this.service)||s.sendMessage(g.LOGIN,n)},i.c2sMark=function(e){var s,n={type:g.MARK,message:e};null==(s=this.service)||s.sendMessage(g.MARK,n)},i.c2sUserInfo=function(){var e,s={type:g.USERINFO,message:{}};null==(e=this.service)||e.sendMessage(g.USERINFO,s)},i.c2sSlotInfo=function(){var e,s={type:g.SLOT_INFO,message:{}};null==(e=this.service)||e.sendMessage(g.SLOT_INFO,s)},i.sendPack=function(e,s){var n;a.playback||null==(n=this.service)||n.sendMessage(e,s)},i.c2sGMBet=function(e){var s={type:g.GM_SPIN,message:e};this.sendPack(g.GM_SPIN,s)},i.c2sBetSpin=function(e){var s={type:g.BET_SPIN,message:e};this.sendPack(g.BET_SPIN,s)},i.c2sFreeSpin=function(){var e={type:g.FREE_SPIN,message:{}};this.sendPack(g.FREE_SPIN,e)},i.c2sChangeBet=function(e,s){u.instance.show(2,!0),r.changeBetRequestTypesQueue.push(s);var n={type:g.CHANGE_BET,message:e};this.sendPack(g.CHANGE_BET,n)},i.c2sPickJackpotSymbol=function(e){u.instance.show(2,!0);var s={type:g.PICK_JACKPOT_SYMBOL,message:e};this.sendPack(g.PICK_JACKPOT_SYMBOL,s)},i.c2sPickMapItem=function(e){u.instance.show(2,!0);var s={type:g.PICK_MAP_ITEM,message:e};this.sendPack(g.PICK_MAP_ITEM,s)},n(t,[{key:"service",get:function(){return App.serviceManager.get(o)}}]),t}(i)).module="Game",t._RF.pop()}}}));

System.register("chunks:///_virtual/IntroView3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./GameLogic18.ts","./SubGameData18.ts"],(function(e){var t,o,r,i,n,s,a,u,c,l,p,h,g,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,a=e.Node,u=e.ProgressBar,c=e.tween,l=e.v3},function(e){p=e.default},function(e){h=e.inject},function(e){g=e.GameLogic},function(e){d=e.SubGameData}],execute:function(){var _,f,b,m,v,y,w,N,k,D,P,B,T;n._RF.push({},"d5892rdVc5EibOjtemgYbpA","IntroView",void 0);var V=s.ccclass,E=s.menu;s.property,e("IntroView",(_=V("IntroView"),f=E(d.module+"/views/IntroView"),b=h({type:g,name:"logic"}),m=h("SpriteBackground",a),v=h("SpriteHint",a),y=h("ProgressBar",u),_(w=f(((T=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,r(t,"logic",k,i(t)),r(t,"_backgroundNode",D,i(t)),r(t,"_hintNode",P,i(t)),r(t,"_progressBar",B,i(t)),t._progress=0,t}o(t,e),t.getPrefabUrl=function(){return"prefabs/views/IntroView"};var n=t.prototype;return n.onLoad=function(){e.prototype.onLoad.call(this),this._progress=0,this._hintNode.active=!1,this._updateProgress(0)},n.onDestroy=function(){var t;this.isValid&&null!=(t=this._backgroundNode)&&t.isValid&&this._backgroundNode.off(a.EventType.TOUCH_END,this._onBackgroundTouchEnd,this),e.prototype.onDestroy.call(this)},n.onShow=function(){e.prototype.onShow.call(this),App.utils.closeDocumentFrameAnimation(),this.schedule(this._updateProgress)},n._updateProgress=function(e){if(this._progress>=1){if(App.utils.closeDocumentLoading(),this.unschedule(this._updateProgress),this._backgroundNode.on(a.EventType.TOUCH_END,this._onBackgroundTouchEnd,this),1==App.utils.PlatformType)return this._hintNode.active=!1,void this._onBackgroundTouchEnd();this._hintNode.active=!0;return c(this._hintNode).to(.28,{scale:l(1.1,1.1,1.1)},{easing:"sineOut"}).to(.28,{scale:l(1,1,1)}).union().repeatForever().start(),void(this._progressBar.node.active=!1)}var t=d.loadingProgress>=1?.8:.2;this._progress=Math.min(this._progress+e*t,d.loadingProgress),this._progressBar.progress=this._progress,App.utils.onDocumentProgress(100*this._progress)},n._onBackgroundTouchEnd=function(){var e;null==(e=this.args)||null==e.completeCallback||e.completeCallback(),this.close()},t}(p)).logicType=g,k=t((N=T).prototype,"logic",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(N.prototype,"_backgroundNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(N.prototype,"_hintNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(N.prototype,"_progressBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=N))||w)||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/Jackpot3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollNumber.ts","./SubGameData18.ts","./SubGameDefines18.ts","./JackpotProgress.ts"],(function(e){var t,i,n,o,r,a,l,s,u,c,p,h,d,g,k,S,m,_,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,l=e._decorator,s=e.sp,u=e.Sprite,c=e.Node,p=e.Enum,h=e.Tween,d=e.tween,g=e.clamp,k=e.Color,S=e.Component},function(e){m=e.default},function(e){_=e.SubGameData},function(e){b=e.common},function(e){f=e.JackpotProgress}],execute:function(){var y,T,v,A,N,w,C,F,z,I,H,R,J,L,E,P,j,B,U,D,M,x,W,G,O,K,Y,q,Q,V,X,Z,$,ee,te,ie,ne;a._RF.push({},"1f896js5RxGb71ysstot0Sj","Jackpot",void 0);var oe=l.ccclass,re=l.menu,ae=l.property,le=((y={})[b.EJackpotType.MINI]=4,y[b.EJackpotType.MINOR]=3,y[b.EJackpotType.MAJOR]=2,y[b.EJackpotType.GRAND]=1,y[b.EJackpotType.DOUBLE_GRAND]=1,y);e("Jackpot",(T=oe("Jackpot"),v=re(_.module+"/elements/Jackpot"),A=ae(s.Skeleton),N=ae(u),w=ae(u),C=ae(s.Skeleton),F=ae(s.Skeleton),z=ae(m),I=ae(s.Skeleton),H=ae(s.Skeleton),R=ae(s.Skeleton),J=ae(s.Skeleton),L=ae(s.Skeleton),E=ae(c),P=ae([f]),j=ae({type:p(b.EJackpotType),visible:!0}),T(B=v((D=t((U=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"decorationSkeleton",D,o(t)),n(t,"backgroundSprite",M,o(t)),n(t,"titleSprite",x,o(t)),n(t,"defaultHighlightSkeleton",W,o(t)),n(t,"upgradedHighlightSkeleton",G,o(t)),n(t,"scoreScrollNumber",O,o(t)),n(t,"unlockSkeleton",K,o(t)),n(t,"lockSkeleton",Y,o(t)),n(t,"upgradingSkeleton",q,o(t)),n(t,"defaultWinSkeleton",Q,o(t)),n(t,"upgradedWinSkeleton",V,o(t)),n(t,"progressesRootNode",X,o(t)),n(t,"progressesList",Z,o(t)),n(t,"defaultBackgroundSpriteFrameName",$,o(t)),n(t,"upgradedBackgroundSpriteFrameName",ee,o(t)),n(t,"defaultTitleSpriteFrameName",te,o(t)),n(t,"upgradedTitleSpriteFrameName",ie,o(t)),n(t,"_jackpotType",ne,o(t)),t._locked=!1,t._upgraded=!1,t._progress=0,t._startScore=0,t._currentScore=0,t._startTimestamp=0,t._updating=!1,t._lockAnimationCallback=void 0,t._upgradingAnimationCallback=void 0,t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.unlockSkeleton.setCompleteListener(this._onLockSkeletonAnimationComplete.bind(this)),this.lockSkeleton.setCompleteListener(this._onLockSkeletonAnimationComplete.bind(this)),this.upgradingSkeleton.setCompleteListener(this._onUpgradingSkeletonAnimationComplete.bind(this)),this._updateUI(),this._updateColor(),this._updateHighlightSkeleton(!0),this._updateProgressSprites(),this.progressesRootNode.active=!1},a.start=function(){this._startTimestamp=Date.now()},a.startUpdate=function(e,t,i){var n=this;this._startScore=e,this._startTimestamp=t,i&&(this._currentScore=this._calculateScore(),this.scoreScrollNumber.show(this._currentScore,this._currentScore)),this._updating||(this._updating=!0,h.stopAllByTarget(this),d(this).delay(.5).call((function(){return n._updateScore()})).union().repeatForever().start())},a.stopUpdate=function(e,t){this._updating=!1,h.stopAllByTarget(this),null!=e&&(null!=t?(this._startScore=e,this._startTimestamp=t,this._currentScore=this._calculateScore(),this.scoreScrollNumber.show(this._currentScore,this._currentScore)):this.scoreScrollNumber.show(e,e))},a.setLocked=function(e,t,i){if(!t)return this._lockAnimationCallback=void 0,void((e!==this._locked||this.unlockSkeleton.enabled||this.lockSkeleton.enabled)&&(this._locked=e,this._updateColor(),this._updateHighlightSkeleton(!this._locked),this.unlockSkeleton.enabled=!1,this.lockSkeleton.enabled=!1));if(this._lockAnimationCallback=i,e!==this._locked){this._locked=e,this._updateColor(),this._updateHighlightSkeleton(!1),this.unlockSkeleton.enabled=!1,this.lockSkeleton.enabled=!1;var n=this._locked?this.lockSkeleton:this.unlockSkeleton;n.enabled=!0,n.setAnimation(0,"animation"+this._animationIndex,!1)}},a.setUpgraded=function(e,t,i){if(!t)return this._upgradingAnimationCallback=void 0,void((e!==this._upgraded||this.upgradingSkeleton.enabled)&&(this._upgraded=e,this._updateUI(),this._updateHighlightSkeleton(!this._locked),this._updateProgressSprites(),this.upgradingSkeleton.enabled=!1));this._upgradingAnimationCallback=i,e!==this._upgraded&&(this._upgraded=e,this._updateUI(),this._updateHighlightSkeleton(!1),this._updateProgressSprites(),this.upgradingSkeleton.enabled=!0,this.upgradingSkeleton.setAnimation(0,"animation"+this._animationIndex,!1))},a.win=function(e){if(this.defaultWinSkeleton.enabled=!1,this.upgradedWinSkeleton.enabled=!1,e){var t=this._upgraded?this.upgradedWinSkeleton:this.defaultWinSkeleton;t.enabled=!0,t.setAnimation(0,"animation"+this._animationIndex,!0)}},a.setProgress=function(e,t){(e=Math.floor(g(e,0,3)))!==this._progress&&(this._progress=e,this.collectable&&this._updateProgressStates(t))},a._calculateScore=function(){var e=this._upgraded?_.getUpgradedJackpotType(this._jackpotType):this._jackpotType,t=_.JACKPOT_SCORE_CONFIGURATIONS[e],i=.001*Math.max(0,Date.now()-this._startTimestamp),n=_.totalBet*t.startingMultiple*t.multipleIncreaseRate*i,o=_.totalBet*t.maxMultiple;return Math.min(this._startScore+n,o)},a._updateUI=function(){this.decorationSkeleton&&this.decorationSkeleton.setAnimation(0,this._upgraded?"animation2_2":"animation1_2",!0),this._upgraded?(this.backgroundSprite.changeSpriteFrameFromAtlas(this.upgradedBackgroundSpriteFrameName),this.titleSprite.changeSpriteFrameFromAtlas(this.upgradedTitleSpriteFrameName)):(this.backgroundSprite.changeSpriteFrameFromAtlas(this.defaultBackgroundSpriteFrameName),this.titleSprite.changeSpriteFrameFromAtlas(this.defaultTitleSpriteFrameName))},a._updateColor=function(){var e=this._locked?k.GRAY:k.WHITE;this.decorationSkeleton&&(this.decorationSkeleton.color=e),this.backgroundSprite.color=e,this.titleSprite.color=e,App.utils.setColorRecursive(this.scoreScrollNumber.node,e)},a._updateHighlightSkeleton=function(e){var t=this._upgraded?this.upgradedHighlightSkeleton:this.defaultHighlightSkeleton,i=t.enabled?t.animation:void 0;if(this.defaultHighlightSkeleton.enabled=!1,this.upgradedHighlightSkeleton.enabled=!1,e&&!this._locked){t.enabled=!0;var n="animation"+this._animationIndex;n!==i&&t.setAnimation(0,n,!0)}},a._updateProgressSprites=function(){var e=this.realType;this.progressesList.forEach((function(t){t.jackpotType=e}))},a._updateProgressStates=function(e){var t=this;this.progressesList.forEach((function(i,n){n<t._progress?i.won||i.win(!0,e):i.win(!1,!1)})),this.progressesList[this.progressesList.length-1].highlight=2===this._progress},a._updateScore=function(){var e=this._currentScore;this._currentScore=this._calculateScore(),this.scoreScrollNumber.show(e,this._currentScore)},a._onLockSkeletonAnimationComplete=function(e){this._updateHighlightSkeleton(!this._locked),this.unlockSkeleton.enabled=!1,this.lockSkeleton.enabled=!1;var t=this._lockAnimationCallback;this._lockAnimationCallback=void 0,null==t||t(this)},a._onUpgradingSkeletonAnimationComplete=function(e){this._updateHighlightSkeleton(!this._locked),this.upgradingSkeleton.enabled=!1;var t=this._upgradingAnimationCallback;this._upgradingAnimationCallback=void 0,null==t||t(this)},r(t,[{key:"type",get:function(){return this._jackpotType}},{key:"realType",get:function(){return this._upgraded?this._jackpotType+1:this._jackpotType}},{key:"locked",get:function(){return this._locked}},{key:"upgraded",get:function(){return this._upgraded}},{key:"collectable",get:function(){return this.progressesRootNode.active},set:function(e){e!==this.progressesRootNode.active&&(this.progressesRootNode.active=e,e&&this._updateProgressStates(!1))}},{key:"_animationIndex",get:function(){return le[this._jackpotType]}}]),t}(S)).prototype,"decorationSkeleton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(U.prototype,"backgroundSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(U.prototype,"titleSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(U.prototype,"defaultHighlightSkeleton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(U.prototype,"upgradedHighlightSkeleton",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(U.prototype,"scoreScrollNumber",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(U.prototype,"unlockSkeleton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(U.prototype,"lockSkeleton",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(U.prototype,"upgradingSkeleton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(U.prototype,"defaultWinSkeleton",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(U.prototype,"upgradedWinSkeleton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(U.prototype,"progressesRootNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(U.prototype,"progressesList",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=t(U.prototype,"defaultBackgroundSpriteFrameName",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ee=t(U.prototype,"upgradedBackgroundSpriteFrameName",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),te=t(U.prototype,"defaultTitleSpriteFrameName",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ie=t(U.prototype,"upgradedTitleSpriteFrameName",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ne=t(U.prototype,"_jackpotType",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.EJackpotType.MINI}}),B=U))||B)||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/JackpotLockHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts"],(function(e){var t,o,i,a,n,s,c,r,l,p,h,u,m,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,c=e.Node,r=e.Sprite,l=e.v3,p=e.Tween,h=e.tween,u=e.Component},function(e){m=e.SubGameData},function(e){d=e.common}],execute:function(){var N,_,f,k,y,S,g,J,P;n._RF.push({},"fa341j4VuNFh7Pz+ohJLadK","JackpotLockHint",void 0);var j=s.ccclass,F=s.menu,b=s.property,v=((N={})[d.EJackpotType.MINI]={spriteFrameName:"theme277_j_mini_1",scaleX:1.4,scaleY:1.55},N[d.EJackpotType.MINOR]={spriteFrameName:"theme277_j_minor_2_1",scaleX:1.2,scaleY:1.55},N[d.EJackpotType.MAJOR]={spriteFrameName:"theme277_j_major_1",scaleX:1,scaleY:1.4},N[d.EJackpotType.GRAND]={spriteFrameName:"theme277_j_grand",scaleX:1,scaleY:1.4},N[d.EJackpotType.DOUBLE_GRAND]={spriteFrameName:"",scaleX:1,scaleY:1},N);e("JackpotLockHint",(_=j("JackpotLockHint"),f=F(m.module+"/elements/JackpotLockHint"),k=b(c),y=b(r),_(S=f((J=t((g=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"rootNode",J,a(t)),i(t,"jackpotNameSprite",P,a(t)),t._cachedPosition=l(),t}o(t,e);var n=t.prototype;return n.onLoad=function(){this.hide(!1)},n.show=function(e,t){var o=this,i=v[e];this.jackpotNameSprite.node.setScale(i.scaleX,i.scaleY,1),this.jackpotNameSprite.changeSpriteFrameFromAtlas(i.spriteFrameName),p.stopAllByTarget(this.rootNode),t?(this.rootNode.setScale(0,0,1),this._cachedPosition.set(1.1,1.1,1),h(this.rootNode).to(.2,{scale:this._cachedPosition},{easing:"sineIn",onComplete:function(){return o._cachedPosition.set(1,1,1)}}).to(.1,{scale:this._cachedPosition},{easing:"sineOut"}).delay(1).call((function(){return o.hide(!0)})).start()):this.rootNode.setScale(1,1,1)},n.hide=function(e){var t=this;p.stopAllByTarget(this.rootNode),e?(this.rootNode.setScale(1,1,1),this._cachedPosition.set(1.1,1.1,1),h(this.rootNode).to(.1,{scale:this._cachedPosition},{easing:"sineOut",onComplete:function(){return t._cachedPosition.set(0,0,1)}}).to(.1,{scale:this._cachedPosition},{easing:"sineIn"}).start()):this.rootNode.setScale(0,0,1)},t}(u)).prototype,"rootNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(g.prototype,"jackpotNameSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=g))||S)||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/JackpotProgress.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts"],(function(t){var e,i,o,n,r,s,a,p,h,l,c,u,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,a=t._decorator,p=t.Enum,h=t.Sprite,l=t.sp,c=t.Component},function(t){u=t.SubGameData},function(t){g=t.common}],execute:function(){var _,k,y,m,f,S,d,T,E,b,P,J,L,A,M;s._RF.push({},"03b58XWRi9BVoDwOdhRfSOK","JackpotProgress",void 0);var v=a.ccclass,I=a.menu,D=a.property,N=t("EState",function(t){return t[t.EMPTY=0]="EMPTY",t[t.FILLING=1]="FILLING",t[t.FULL=2]="FULL",t}({})),R=((_={})[g.EJackpotType.MINI]="theme277_c_mini_1",_[g.EJackpotType.MINOR]="theme277_c_minor_3",_[g.EJackpotType.MAJOR]="theme277_c_major_4",_[g.EJackpotType.GRAND]="theme277_c_grand_3",_[g.EJackpotType.DOUBLE_GRAND]="theme277_c_doublegrand_5",_),F=((k={})[g.EJackpotType.MINI]="animation5",k[g.EJackpotType.MINOR]="animation4",k[g.EJackpotType.MAJOR]="animation3",k[g.EJackpotType.GRAND]="animation2",k[g.EJackpotType.DOUBLE_GRAND]="animation1",k);t("JackpotProgress",(y=v("JackpotProgress"),m=I(u.module+"/elements/JackpotProgress"),f=D({type:p(g.EJackpotType)}),S=D(h),d=D(l.Skeleton),T=D(l.Skeleton),E=D({type:p(g.EJackpotType),serializable:!0}),y(b=m((e((P=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"sprite",J,n(e)),o(e,"progressSkeleton",L,n(e)),o(e,"highlightSkeleton",A,n(e)),o(e,"_type",M,n(e)),e._state=N.EMPTY,e._highlight=!1,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.progressSkeleton.setCompleteListener(this._onProgressSkeletonAnimationComplete.bind(this)),this.progressSkeleton.node.active=!1,this._updateProgress(),this._updateHighlight()},s.win=function(t,e){t&&this._state!==N.EMPTY||!t&&this._state===N.EMPTY||(t?(this._state=N.FILLING,this.progressSkeleton.node.active=!0,this.progressSkeleton.setAnimation(0,F[this._type],!1),e||(this._state=N.FULL,this.progressSkeleton.updateAnimation(999))):(this._state=N.EMPTY,this.progressSkeleton.node.active=!1),this._updateHighlight())},s._updateProgress=function(){if(this.sprite.changeSpriteFrameFromAtlas(R[this._type]),this.progressSkeleton.node.active){var t,e=null==(t=this.progressSkeleton.getCurrent(0))?void 0:t.getAnimationTime();this.progressSkeleton.setAnimation(0,F[this._type],!1),null!=e&&this.progressSkeleton.updateAnimation(null!=e?e:0)}},s._updateHighlight=function(){this._highlight&&this._state===N.EMPTY?(this.highlightSkeleton.node.active=!0,this.highlightSkeleton.setAnimation(0,"animation",!0)):this.highlightSkeleton.node.active=!1},s._onProgressSkeletonAnimationComplete=function(t){this._state=N.FULL},r(e,[{key:"jackpotType",get:function(){return this._type},set:function(t){t!==this._type&&(this._type=t,this._updateProgress())}},{key:"won",get:function(){return this._state!==N.EMPTY}},{key:"highlight",get:function(){return this._highlight},set:function(t){t!==this._highlight&&(this._highlight=t,this._updateHighlight())}}]),e}(c)).prototype,"jackpotType",[f],Object.getOwnPropertyDescriptor(P.prototype,"jackpotType"),P.prototype),J=e(P.prototype,"sprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(P.prototype,"progressSkeleton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(P.prototype,"highlightSkeleton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(P.prototype,"_type",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.EJackpotType.MINI}}),b=P))||b)||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/JackpotsLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./ShowJackpot.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./Jackpot3.ts","./JackpotLockHint.ts","./JackpotUnlockHint.ts","./AudioHelper3.ts"],(function(t){var e,a,o,s,n,i,p,c,r,u,h,l,k,d,y,m,f,T,_,E,B,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,i=t._decorator,p=t.v3,c=t.Animation,r=t.Node,u=t.Prefab,h=t.Tween,l=t.tween,k=t.instantiate},function(t){d=t.default},function(t){y=t.ShowJackpot},function(t){m=t.SubGameData},function(t){f=t.common},function(t){T=t.DisplayTaskManager},function(t){_=t.Jackpot},function(t){E=t.JackpotLockHint},function(t){B=t.JackpotUnlockHint},function(t){M=t.AudioHelper}],execute:function(){var g,J,L,j,U,H,O,R,v,G,S,b,A,N,F,w,D,I;n._RF.push({},"233a3tKRpBIfq4yViR90SKZ","JackpotsLayer",void 0);var P=i.ccclass,C=i.menu,x=i.property,z=((g={})[f.EJackpotType.MINI]={positionOffset:p(-35,-21,0),scale:.9},g[f.EJackpotType.MINOR]={positionOffset:p(41,-21,0),scale:.9},g[f.EJackpotType.MAJOR]={positionOffset:p(0,-25,0),scale:1},g[f.EJackpotType.GRAND]={positionOffset:p(0,-31,0),scale:1},g[f.EJackpotType.DOUBLE_GRAND]={positionOffset:p(),scale:1},g),K=((J={})[f.EJackpotType.MINI]={positionOffset:p(0,-21,0),scale:.9},J[f.EJackpotType.MINOR]={positionOffset:p(0,-21,0),scale:.9},J[f.EJackpotType.MAJOR]={positionOffset:p(0,-25,0),scale:1},J[f.EJackpotType.GRAND]={positionOffset:p(0,-31,0),scale:1},J[f.EJackpotType.DOUBLE_GRAND]={positionOffset:p(),scale:1},J);t("JackpotsLayer",(L=P("JackpotsLayer"),j=C(m.module+"/layer/JackpotsLayer"),U=x(c),H=x({type:[_],tooltip:"按从小到大的顺序赋值"}),O=x(B),R=x(E),v=x(r),G=x(u),L(S=j((A=e((b=function(t){function e(){for(var e,a,n,i=arguments.length,p=new Array(i),c=0;c<i;c++)p[c]=arguments[c];return n=t.call.apply(t,[this].concat(p))||this,o(n,"animation",A,s(n)),o(n,"jackpotsList",N,s(n)),o(n,"jackpotUnlockHint",F,s(n)),o(n,"jackpotLockHint",w,s(n)),o(n,"showJackpotRootNode",D,s(n)),o(n,"showJackpotPrefab",I,s(n)),n._gameMode=f.EGameMode.NORMAL,n._progressesMap=new Map,n._startBonusHash=((e={})[f.EJackpotType.MINI]=0,e[f.EJackpotType.MINOR]=0,e[f.EJackpotType.MAJOR]=0,e[f.EJackpotType.GRAND]=0,e[f.EJackpotType.DOUBLE_GRAND]=0,e),n._synchronTimestamp=0,n._startBonusHashForBonusGame=((a={})[f.EJackpotType.MINI]=0,a[f.EJackpotType.MINOR]=0,a[f.EJackpotType.MAJOR]=0,a[f.EJackpotType.GRAND]=0,a[f.EJackpotType.DOUBLE_GRAND]=0,a),n._synchronTimestampForBonusGame=0,n}a(e,t);var n=e.prototype;return n.onLoad=function(){t.prototype.onLoad.call(this),T.addHandler(this)},n.onTaskInitialize=function(t,e){var a=this;if(this._gameMode=e.gameMode,this._progressesMap.clear(),this.node.active=!0,h.stopAllByTarget(this),e.gameMode===f.EGameMode.BONUS){this._updateBonusHash(this._startBonusHashForBonusGame,e.jackpotBonusesHash),this._synchronTimestampForBonusGame=e.jackpotSynchronTimestamp,this.animation.play("bonus-game");var o=!1;e.jackpotSymbolLocationsMap.forEach((function(t,e){if(e!==f.EJackpotSymbolType.BOOST){var s=m.getJackpotTypeFromJackpotSymbolType(e);null!=s&&a._progressesMap.set(s,t.length)}else o=t.length>=3})),this.jackpotsList.forEach((function(t,e){var s,n=m.isJackpotLocked(t.type,o);t.setLocked(n,!1),t.setUpgraded(o,!1),t.win(!1),n?t.stopUpdate(a._calculateMinBonus(t.realType)):t.stopUpdate(a._startBonusHashForBonusGame[t.realType]),t.collectable=!0,t.setProgress(null!=(s=a._progressesMap.get(t.type))?s:0,!1)}))}else this._updateStartBonuses(e.jackpotBonusesHash,e.jackpotSynchronTimestamp,!0),this.jackpotsList.forEach((function(t,e){var o=m.isJackpotLocked(t.type,!1);t.setLocked(o,!1),t.setUpgraded(!1,!1),t.win(!1),o?t.stopUpdate(a._calculateMinBonus(t.realType)):t.startUpdate(a._startBonusHash[t.realType],a._synchronTimestamp,!0),t.collectable=!1,t.setProgress(0,!1)})),e.gameMode===f.EGameMode.FREE?(this.animation.play("free-game"),(e.featureType&f.EFeatureType.RED_TOWER)<=0&&(this.node.active=!1)):e.gameMode===f.EGameMode.NORMAL?this.animation.play("normal-game"):this.node.active=!1;this.jackpotUnlockHint.hide(!1),this.jackpotLockHint.hide(!1)},n.onTaskSpinStop=function(t,e){var a=this;e.jackpotBonusesHash&&(this._updateStartBonuses(e.jackpotBonusesHash,e.jackpotSynchronTimestamp,!1),this.jackpotsList.forEach((function(t,e){t.locked?t.stopUpdate(a._calculateMinBonus(t.realType)):t.startUpdate(a._startBonusHash[t.realType],a._synchronTimestamp,!1)})))},n.onTaskBonusGameStart=function(t,e){h.stopAllByTarget(this)},n.onTaskBonusGamePickEnd=function(t,e){var a,o=m.getJackpotTypeFromJackpotSymbolType(e.jackpotSymbol);if(null!=o){var s=(null!=(a=this._progressesMap.get(o))?a:0)+1;this._progressesMap.set(o,s),this.jackpotsList.forEach((function(t){t.type===o&&t.setProgress(s,!0)}))}},n.onTaskBonusGameUpgrade=function(t,e){var a=this;h.stopAllByTarget(this),l(this).delay(1.4).call((function(){a.jackpotsList.forEach((function(t,e){var o,s=m.isJackpotLocked(t.type,!0);t.setLocked(s,!1),t.setUpgraded(!0,!0),s?t.stopUpdate(a._calculateMinBonus(t.realType)):t.stopUpdate(a._startBonusHashForBonusGame[t.realType]),t.setProgress(null!=(o=a._progressesMap.get(t.type))?o:0,!1)}))})).start()},n.onTaskBonusGameWinJackpot=function(t,e){h.stopAllByTarget(this),this.jackpotsList.forEach((function(t){t.realType===e.jackpotType&&(t.locked||t.stopUpdate(e.score),t.win(!0))}))},n.onTaskBonusGameTransit=function(t,e){this._updateBonusHash(this._startBonusHashForBonusGame,e.jackpotBonusesHash),this._synchronTimestampForBonusGame=e.jackpotSynchronTimestamp},n.onTaskFreeGameCollectJackpot=function(t,e){this.node.active&&this.jackpotsList.forEach((function(t){t.type===e.jackpotType&&(t.locked||t.stopUpdate(e.score),t.win(!0))}))},n.onTaskFreeGameUnhighlightJackpot=function(t,e){var a=this;this._updateStartBonuses(e.jackpotBonusesHash,e.jackpotSynchronTimestamp,!1),this.node.active&&this.jackpotsList.forEach((function(t){t.type===e.jackpotType&&t.win(!1),t.locked?t.stopUpdate(a._calculateMinBonus(t.realType)):t.startUpdate(a._startBonusHash[t.realType],a._synchronTimestamp,!0)}))},n.onTaskRoundEnd=function(t,e){var a=this;this._updateStartBonuses(e.jackpotBonusesHash,e.jackpotSynchronTimestamp,!1),this.jackpotsList.forEach((function(t){t.locked?t.stopUpdate(a._calculateMinBonus(t.realType)):t.startUpdate(a._startBonusHash[t.realType],a._synchronTimestamp,!1)}))},n.onTaskChangeBet=function(t,e){var a=this;if(this._updateStartBonuses(e.jackpotBonusesHash,e.jackpotSynchronTimestamp,!1),this._gameMode!==f.EGameMode.BONUS&&this._gameMode!==f.EGameMode.FREE){var o=-1,s=this.jackpotsList.length;this.jackpotsList.forEach((function(t,e){var n=t.locked,i=m.isJackpotLocked(t.type,t.upgraded);n!==i&&(i?s=Math.min(s,e):o=Math.max(o,e)),t.setLocked(i,!0),i?t.stopUpdate(a._calculateMinBonus(t.realType)):t.startUpdate(a._startBonusHash[t.realType],a._synchronTimestamp,!0)}));var n=this.jackpotsList[o];if(n){var i=z[n.type];this.jackpotUnlockHint.node.setPosition(n.node.position.x+i.positionOffset.x,n.node.position.y+i.positionOffset.y,0),this.jackpotUnlockHint.node.setScale(i.scale,i.scale,1),this.jackpotUnlockHint.show(n.type,!0),this.jackpotLockHint.hide(!1),M.instance.playSoundEffect(m.AUDIO_URLS.SE_JACKPOT_UNLOCK)}var p=this.jackpotsList[s];if(p){var c=K[p.type];this.jackpotLockHint.node.setPosition(p.node.position.x+c.positionOffset.x,p.node.position.y+c.positionOffset.y,0),this.jackpotLockHint.node.setScale(c.scale,c.scale,1),this.jackpotUnlockHint.hide(!1),this.jackpotLockHint.show(p.type,!0),M.instance.playSoundEffect(m.AUDIO_URLS.SE_JACKPOT_LOCK)}}},n.onTaskSynchroniseJackpots=function(t,e){var a=this;this._updateStartBonuses(e.jackpotBonusesHash,e.jackpotSynchronTimestamp,!1),this._gameMode!==f.EGameMode.BONUS&&this._gameMode!==f.EGameMode.FREE&&this.jackpotsList.forEach((function(t,e){var o=m.isJackpotLocked(t.type,t.upgraded);t.setLocked(o,!0),o?t.stopUpdate(a._calculateMinBonus(t.realType)):t.startUpdate(a._startBonusHash[t.realType],a._synchronTimestamp,!0)}))},n.onTaskChangeGame=function(t,e){var a=this;if(e.previousFeatureType!==e.nextFeatureType)switch(this.node.active=!0,this.jackpotUnlockHint.hide(!1),this.jackpotLockHint.hide(!1),e.previousFeatureType===f.EFeatureType.RED_TOWER&&this.jackpotsList.forEach((function(t,e){var o=m.isJackpotLocked(t.type,!1);t.setLocked(o,!1),t.setUpgraded(!1,!1),t.win(!1),o?t.stopUpdate(a._calculateMinBonus(t.type)):t.startUpdate(a._startBonusHashForBonusGame[t.type],a._synchronTimestamp,!0),t.setProgress(0,!1),t.collectable=!1})),e.nextFeatureType){case f.EFeatureType.RED_TOWER:this._gameMode=f.EGameMode.BONUS,this._progressesMap.clear(),this.animation.play("bonus-game"),this.jackpotsList.forEach((function(t,e){var o=m.isJackpotLocked(t.type,!1);t.setLocked(o,!1),t.setUpgraded(!1,!1),t.win(!1),o?t.stopUpdate(a._calculateMinBonus(t.type)):t.stopUpdate(a._startBonusHashForBonusGame[t.type]),t.collectable=!0,t.setProgress(0,!1)}));break;case f.EFeatureType.NONE:this._gameMode=f.EGameMode.NORMAL,this.animation.play("normal-game");var o=this._startBonusHash,s=this._synchronTimestamp;this._synchronTimestampForBonusGame>this._synchronTimestamp&&(o=this._startBonusHashForBonusGame,s=this._synchronTimestampForBonusGame),this.jackpotsList.forEach((function(t,e){t.locked?t.stopUpdate(a._calculateMinBonus(t.type)):t.startUpdate(o[t.type],s,!0)}));break;default:this._gameMode=f.EGameMode.FREE,this.animation.play("free-game"),(e.nextFeatureType&f.EFeatureType.RED_TOWER)<=0&&(this.node.active=!1)}},n.onTaskShowMapGame=function(t,e){this._gameMode=e.mapStageInfo.super?f.EGameMode.SUPER_MAP:f.EGameMode.MAP,this.node.active=!1},n.onTaskHideMapGame=function(t,e){this._gameMode=f.EGameMode.NORMAL,this.node.active=!0},n.onTaskCollectJackpot=function(t,e){if(this._gameMode===f.EGameMode.NORMAL){var a=k(this.showJackpotPrefab);if(a){a.setPosition(550,450),this.showJackpotRootNode.addChild(a);var o=a.getComponent(y);o&&(o.jpMove(),o.onRefreshAvatarHead(e.data.image_id),o.onRefreshAvatarTheme(e.data.game_id),o.onRefreshUserId(e.data.uid),o.onRefreshJackpotWin(e.data.reward_num))}}},n._calculateMinBonus=function(t){return m.JACKPOT_SCORE_CONFIGURATIONS[t].startingMultiple*m.totalBet},n._updateStartBonuses=function(t,e,a){!a&&e<this._synchronTimestamp||(this._updateBonusHash(this._startBonusHash,t),this._synchronTimestamp=e)},n._updateBonusHash=function(t,e){for(var a=0,o=[f.EJackpotType.MINI,f.EJackpotType.MINOR,f.EJackpotType.MAJOR,f.EJackpotType.GRAND,f.EJackpotType.DOUBLE_GRAND];a<o.length;a++){var s=o[a],n=e[s];n<=0&&(n=this._calculateMinBonus(s)),t[s]=n}},e}(d)).prototype,"animation",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(b.prototype,"jackpotsList",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=e(b.prototype,"jackpotUnlockHint",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(b.prototype,"jackpotLockHint",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(b.prototype,"showJackpotRootNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(b.prototype,"showJackpotPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=b))||S)||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/JackpotSymbol.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts"],(function(e){var t,n,o,i,l,a,r,s,p,u,d,c,m,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,l=e.createClass},function(e){a=e.cclegacy,r=e._decorator,s=e.Color,p=e.sp,u=e.Tween,d=e.tween,c=e.math,m=e.Component},function(e){h=e.SubGameData},function(e){y=e.common}],execute:function(){var g,k,b,_,f,S,I,C,N,T,L,P,O;a._RF.push({},"a7e94o5TE5EUJPJqvq7BBke","JackpotSymbol",void 0);var A=r.ccclass,E=r.menu,v=r.property,D=function(e){return e[e.IDLE=0]="IDLE",e[e.FLOPPING=1]="FLOPPING",e[e.CRITICAL_FLOPPING=2]="CRITICAL_FLOPPING",e[e.FLOPPED=3]="FLOPPED",e[e.WINNING=4]="WINNING",e[e.NOT_WON=5]="NOT_WON",e[e.EXCITING=6]="EXCITING",e[e.NOT_FLOPPED=7]="NOT_FLOPPED",e}(D||{}),G=((g={})[y.EJackpotSymbolType.UNKNOWN]={default:0,upgraded:0},g[y.EJackpotSymbolType.MINI]={default:3,upgraded:1},g[y.EJackpotSymbolType.MINOR]={default:1,upgraded:4},g[y.EJackpotSymbolType.MAJOR]={default:4,upgraded:2},g[y.EJackpotSymbolType.GRAND]={default:2,upgraded:6},g[y.EJackpotSymbolType.BOOST]={default:5,upgraded:5},g),F=((k={})[D.IDLE]={loop:!1,color:s.WHITE},k[D.FLOPPING]={loop:!1,color:s.WHITE},k[D.CRITICAL_FLOPPING]={loop:!1,color:s.WHITE},k[D.FLOPPED]={loop:!0,color:s.WHITE},k[D.WINNING]={loop:!0,color:s.WHITE},k[D.NOT_WON]={loop:!1,color:s.GRAY},k[D.EXCITING]={loop:!0,color:s.WHITE},k[D.NOT_FLOPPED]={loop:!1,color:s.GRAY},k);e("JackpotSymbol",(b=A("JackpotSymbol"),_=E(h.module+"/elements/JackpotSymbol"),f=v(p.Skeleton),S=v(p.Skeleton),I=v({visible:!0}),b(C=_(((O=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,o(t,"symbolSkeleton",T,i(t)),o(t,"upgradingSkeleton",L,i(t)),o(t,"_index",P,i(t)),t._type=y.EJackpotSymbolType.BOOST,t._upgraded=!1,t._state=D.IDLE,t._playingIdleAnimation=!1,t._clickListener=void 0,t._floppingCompleteCallback=void 0,t._upgradingCompleteCallback=void 0,t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.symbolSkeleton.setCompleteListener(this._onSymbolSkeletonAnimationComplete.bind(this)),this.upgradingSkeleton.setCompleteListener(this._onUpgradingSkeletonAnimationComplete.bind(this)),this._refreshWhenDirty(!1),this.upgradingSkeleton.enabled=!1},a.setClickListener=function(e){this._clickListener=e},a.flop=function(e,t){this._floppingCompleteCallback=t,this.state=e?D.CRITICAL_FLOPPING:D.FLOPPING},a.setUpgraded=function(e,t,n){var o=this;if(this._upgraded=e,!t)return this._upgradingCompleteCallback=void 0,this._refreshWhenDirty(!0),u.stopAllByTarget(this.upgradingSkeleton.node),void(this.upgradingSkeleton.enabled=!1);this._upgradingCompleteCallback=n,u.stopAllByTarget(this.upgradingSkeleton.node),d(this.upgradingSkeleton.node).delay(.3).call((function(){return o._refreshWhenDirty(!1)})).start(),this.upgradingSkeleton.enabled=!0,this.upgradingSkeleton.setAnimation(0,"animation6",!1)},a.onSymbolClick=function(){var e;null==(e=this._clickListener)||e.call(this,this)},a._refreshWhenDirty=function(e){var t,n,o=this,i=F[this._state];if(this.symbolSkeleton.color=i.color,this._state!==D.IDLE){this._playingIdleAnimation=!1,u.stopAllByTarget(this.symbolSkeleton.node),u.stopAllByTarget(this.symbolSkeleton);var l=this._animationName;if(this.symbolSkeleton.findAnimation(l)){var a=this.symbolSkeleton.enabled&&null!=(t=null==(n=this.symbolSkeleton.getCurrent(0))?void 0:n.getAnimationTime())?t:0;this.symbolSkeleton.enabled=!0,this.symbolSkeleton.setAnimation(0,l,i.loop),e&&this.symbolSkeleton.updateAnimation(a)}else this.symbolSkeleton.enabled=!1}else if(!this._playingIdleAnimation){this._playingIdleAnimation=!0,this.symbolSkeleton.enabled=!0,this.symbolSkeleton.setAnimation(0,"animation1",!1);var r=this._animationName;u.stopAllByTarget(this.symbolSkeleton.node),u.stopAllByTarget(this.symbolSkeleton),d(this.symbolSkeleton.node).delay(3*c.randomRangeInt(0,5)).call((function(){d(o.symbolSkeleton).call((function(){return o.symbolSkeleton.setAnimation(0,r,!1)})).delay(9).union().repeatForever().start()})).start()}},a._onSymbolSkeletonAnimationComplete=function(e){var t=e.animation.name.split("_");if(!(t.length<2||t[1]!==""+D.FLOPPING&&t[1]!==""+D.CRITICAL_FLOPPING)){var n=this._floppingCompleteCallback;this._floppingCompleteCallback=void 0,null==n||n(this)}},a._onUpgradingSkeletonAnimationComplete=function(e){this.upgradingSkeleton.enabled=!1;var t=this._upgradingCompleteCallback;this._upgradingCompleteCallback=void 0,null==t||t(this)},l(t,[{key:"index",get:function(){return this._index}},{key:"type",get:function(){return this._type},set:function(e){e!==this._type&&(this._type=e,this._refreshWhenDirty(!0))}},{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,this._refreshWhenDirty(!1))}},{key:"upgraded",get:function(){return this._upgraded}},{key:"_animationName",get:function(){if(this._state===D.IDLE)return"animation";var e=G[this._type];return"animation"+(this._upgraded?e.upgraded:e.default)+"_"+this._state}}]),t}(m)).EState=D,T=t((N=O).prototype,"symbolSkeleton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(N.prototype,"upgradingSkeleton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(N.prototype,"_index",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),C=N))||C)||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/JackpotUnlockHint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts"],(function(e){var t,o,i,a,n,s,c,r,l,p,h,u,m,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,c=e.Node,r=e.Sprite,l=e.v3,p=e.Tween,h=e.tween,u=e.Component},function(e){m=e.SubGameData},function(e){d=e.common}],execute:function(){var _,N,f,k,y,S,g,b,J;n._RF.push({},"035e5bdqyBLYJxsbP9E0xkt","JackpotUnlockHint",void 0);var P=s.ccclass,j=s.menu,v=s.property,F=((_={})[d.EJackpotType.MINI]={spriteFrameName:"theme277_j_mini_1",scaleX:1.4,scaleY:1.55},_[d.EJackpotType.MINOR]={spriteFrameName:"theme277_j_minor_2_1",scaleX:1.2,scaleY:1.55},_[d.EJackpotType.MAJOR]={spriteFrameName:"theme277_j_major_1",scaleX:1,scaleY:1.4},_[d.EJackpotType.GRAND]={spriteFrameName:"theme277_j_grand",scaleX:1,scaleY:1.4},_[d.EJackpotType.DOUBLE_GRAND]={spriteFrameName:"",scaleX:1,scaleY:1},_);e("JackpotUnlockHint",(N=P("JackpotUnlockHint"),f=j(m.module+"/elements/JackpotUnlockHint"),k=v(c),y=v(r),N(S=f((b=t((g=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"rootNode",b,a(t)),i(t,"jackpotNameSprite",J,a(t)),t._cachedPosition=l(),t}o(t,e);var n=t.prototype;return n.onLoad=function(){this.hide(!1)},n.show=function(e,t){var o=this,i=F[e];this.jackpotNameSprite.node.setScale(i.scaleX,i.scaleY,1),this.jackpotNameSprite.changeSpriteFrameFromAtlas(i.spriteFrameName),p.stopAllByTarget(this.rootNode),t?(this.rootNode.setScale(0,0,1),this._cachedPosition.set(1.1,1.1,1),h(this.rootNode).to(.2,{scale:this._cachedPosition},{easing:"sineIn",onComplete:function(){return o._cachedPosition.set(1,1,1)}}).to(.1,{scale:this._cachedPosition},{easing:"sineOut"}).delay(1).call((function(){return o.hide(!0)})).start()):this.rootNode.setScale(1,1,1)},n.hide=function(e){var t=this;p.stopAllByTarget(this.rootNode),e?(this.rootNode.setScale(1,1,1),this._cachedPosition.set(1.1,1.1,1),h(this.rootNode).to(.1,{scale:this._cachedPosition},{easing:"sineOut",onComplete:function(){return t._cachedPosition.set(0,0,1)}}).to(.1,{scale:this._cachedPosition},{easing:"sineIn"}).start()):this.rootNode.setScale(0,0,1)},t}(u)).prototype,"rootNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(g.prototype,"jackpotNameSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=g))||S)||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/JackpotWinningLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NumberRoller.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./CountdownableButton.ts","./AudioHelper3.ts"],(function(t){var e,o,n,i,a,s,l,r,c,p,u,y,_,O,k,h,D,I,b,U;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty,n=t.inheritsLoose,i=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,l=t._decorator,r=t.Enum,c=t.sp,p=t.Node,u=t.UIOpacity,y=t.Tween,_=t.tween},function(t){O=t.NumberRoller},function(t){k=t.SubGameData},function(t){h=t.common},function(t){D=t.DisplayTaskManager,I=t.Display},function(t){b=t.CountdownableButton},function(t){U=t.AudioHelper}],execute:function(){var d,f,N,m,A,T,E,P,S,C,L,g,R,J,H,w,K,G,v,B,M,W,j,z,F,x,X,Z;s._RF.push({},"babd4jj9tpCj7XtCfAZycPE","JackpotWinningLayer",void 0);var q=l.ccclass,Q=l.menu,V=l.property,Y=function(t){return t[t.HIDDEN=0]="HIDDEN",t[t.SHOWING=1]="SHOWING",t[t.SHOWN=2]="SHOWN",t[t.HIDING=3]="HIDING",t}(Y||{}),$=((d={})[h.EJackpotType.MINI]={unlocked:k.AUDIO_URLS.SE_POPUP_JACKPOT_MINI_UNLOCKED,locked:k.AUDIO_URLS.SE_POPUP_JACKPOT_MINI_LOCKED},d[h.EJackpotType.MINOR]={unlocked:k.AUDIO_URLS.SE_POPUP_JACKPOT_MINOR_UNLOCKED,locked:k.AUDIO_URLS.SE_POPUP_JACKPOT_MINOR_LOCKED},d[h.EJackpotType.MAJOR]={unlocked:k.AUDIO_URLS.SE_POPUP_JACKPOT_MAJOR_UNLOCKED,locked:k.AUDIO_URLS.SE_POPUP_JACKPOT_MAJOR_LOCKED},d[h.EJackpotType.GRAND]={unlocked:k.AUDIO_URLS.SE_POPUP_JACKPOT_GRAND_UNLOCKED,locked:k.AUDIO_URLS.SE_POPUP_JACKPOT_GRAND_LOCKED},d[h.EJackpotType.DOUBLE_GRAND]={unlocked:k.AUDIO_URLS.SE_POPUP_JACKPOT_DOUBLE_GRAND_UNLOCKED,locked:k.AUDIO_URLS.SE_POPUP_JACKPOT_DOUBLE_GRAND_LOCKED},d),tt=t("JackpotWinningSkeletonData",(f=q("JackpotWinningSkeletonData"),N=V({type:r(h.EJackpotType)}),m=V(c.SkeletonData),f((E=e((T=function(){o(this,"jackpotType",E,this),o(this,"skeletonData",P,this)}).prototype,"jackpotType",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.EJackpotType.MINI}}),P=e(T.prototype,"skeletonData",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=T))||A));t("JackpotWinningLayer",(S=q("JackpotWinningLayer"),C=Q(k.module+"/layers/JackpotWinningLayer"),L=V(p),g=V(u),R=V(c.Skeleton),J=V(O),H=V(u),w=V(b),K=V(u),G=V([tt]),S(v=C((M=e((B=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,o(e,"rootNode",M,i(e)),o(e,"maskUIOpacity",W,i(e)),o(e,"skeleton",j,i(e)),o(e,"scoreNumberRoller",z,i(e)),o(e,"scoreUIOpacity",F,i(e)),o(e,"button",x,i(e)),o(e,"buttonUIOpacity",X,i(e)),o(e,"skeletonDatasList",Z,i(e)),e._jackpotType=h.EJackpotType.MINI,e._locked=!1,e._state=Y.HIDDEN,e._score=0,e._skeletonDatasHash={},e}n(e,t);var s=e.prototype;return s.onLoad=function(){var e=this;t.prototype.onLoad.call(this),D.addHandler(this),this.skeleton.setCompleteListener(this._onSkeletonAnimationComplete.bind(this)),this.skeletonDatasList.forEach((function(t){e._skeletonDatasHash[t.jackpotType]=t.skeletonData})),this.button.type=b.EType.COLLECT},s.onTaskInitialize=function(t,e){this.stopAllDisplays(),this._state=Y.HIDDEN,y.stopAllByTarget(this.node),this.rootNode.active=!1,this.button.stopCountdown()},s.onTaskBonusGameWinJackpot=function(t,e){var o=this._skeletonDatasHash[e.jackpotType];o&&(this._jackpotType=e.jackpotType,this._locked=e.locked,this._show(o,e.score,2))},s.onTaskFreeGameCollectJackpot=function(t,e){var o=this._skeletonDatasHash[e.jackpotType];o&&(this._jackpotType=e.jackpotType,this._locked=e.locked,this._show(o,e.score,1))},s.onButtonClick=function(){this._hide(),U.instance.playSoundEffect(k.AUDIO_URLS.SE_COMMON_BUTTON_CLICK)},s._show=function(t,e,o){var n=this;this.stopAllDisplays(),this.startDisplay(),this._state=Y.HIDDEN,this._score=e,this.rootNode.active=!1,y.stopAllByTarget(this.node),_(this.node).delay(null!=o?o:0).call((function(){n._state=Y.SHOWING,n.rootNode.active=!0,y.stopAllByTarget(n.maskUIOpacity),n.maskUIOpacity.opacity=0,_(n.maskUIOpacity).to(.3,{opacity:255}).start(),n.skeleton.skeletonData=t,n.skeleton.setAnimation(0,"animation"+n._animationTypeID+"_"+n._state,!1),y.stopAllByTarget(n.scoreUIOpacity),n.scoreUIOpacity.opacity=0,_(n.scoreUIOpacity).delay(.15).to(.25,{opacity:255}).start(),n.scoreNumberRoller.startRolling(0,e,2),y.stopAllByTarget(n.buttonUIOpacity),n.buttonUIOpacity.opacity=0,n.button.interactable=!0,n.button.stopCountdown(),_(n.buttonUIOpacity).delay(.3).to(.25,{opacity:255}).start();var o=$[n._jackpotType];U.instance.playSoundEffect(n._locked?o.locked:o.unlocked)})).start()},s._hide=function(){this._state===Y.SHOWN&&(this._state=Y.HIDING,y.stopAllByTarget(this.maskUIOpacity),_(this.maskUIOpacity).delay(.6).to(.3,{opacity:0}).start(),this.skeleton.setAnimation(0,"animation"+this._animationTypeID+"_"+this._state,!1),this.scoreNumberRoller.stopRollingAndShowNumber(this._score),y.stopAllByTarget(this.scoreUIOpacity),_(this.scoreUIOpacity).delay(.3).to(.2,{opacity:0}).start(),y.stopAllByTarget(this.buttonUIOpacity),this.button.interactable=!1,this.button.stopCountdown(),_(this.buttonUIOpacity).delay(.2).to(.3,{opacity:0}).start(),U.instance.playSoundEffect(k.AUDIO_URLS.SE_COMMON_POPUP_HIDE))},s._onSkeletonAnimationComplete=function(t){var e=this,o=t.animation.name.split("_");o.length<2||(o[1]===""+Y.SHOWING?(this._state=Y.SHOWN,this.skeleton.setAnimation(0,"animation"+this._animationTypeID+"_"+this._state,!0),this.button.interactable=!0,this.button.startCountdown(4,(function(){return e._hide()}))):o[1]===""+Y.HIDING&&(this._state=Y.HIDDEN,this.rootNode.active=!1,this.button.stopCountdown(),this.endDisplay()))},a(e,[{key:"_animationTypeID",get:function(){return this._locked?2:1}}]),e}(I)).prototype,"rootNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(B.prototype,"maskUIOpacity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(B.prototype,"skeleton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(B.prototype,"scoreNumberRoller",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(B.prototype,"scoreUIOpacity",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(B.prototype,"button",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(B.prototype,"buttonUIOpacity",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(B.prototype,"skeletonDatasList",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=B))||v)||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingHelper3.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"d0497FzMOxM7rrU998CZlw0","LoadingHelper",void 0),t("LoadingHelper",function(){function t(){this._blockInputWhenDelay=!1,this._inputBlockerNode=null,this._timeoutID=null}var n=t.prototype;return n.show=function(t,e){void 0===e&&(e=!1),this._blockInputWhenDelay=e,this._stopCountdown();var n=function(){return App.loading.show("loading...")};null!=t?this._timeoutID=setTimeout(n,1e3*t):n(),this._refreshInputBlockerNode()},n.hide=function(){this._blockInputWhenDelay=!1,this._stopCountdown(),App.loading.hide(),this._refreshInputBlockerNode()},n._stopCountdown=function(){null!==this._timeoutID&&void 0!==this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},n._refreshInputBlockerNode=function(){this._inputBlockerNode&&(this._inputBlockerNode.active=this._blockInputWhenDelay)},e(t,[{key:"inputBlockerNode",set:function(t){t!==this._inputBlockerNode&&(this._inputBlockerNode=t,this._refreshInputBlockerNode())}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingInputBlocker2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./LoadingHelper3.ts"],(function(n){var o,e,t,r,u,c,i;return{setters:[function(n){o=n.inheritsLoose},function(n){e=n.cclegacy,t=n._decorator,r=n.BlockInputEvents,u=n.Component},function(n){c=n.SubGameData},function(n){i=n.LoadingHelper}],execute:function(){var a;e._RF.push({},"ba9b46SkJ5I3KJCIkmA7B6l","LoadingInputBlocker",void 0);var p=t.ccclass,l=t.menu,s=(t.property,t.requireComponent);n("LoadingInputBlocker",p("LoadingInputBlocker")(a=l(c.module+"/components/LoadingInputBlocker")(a=s(r)(a=function(n){function e(){return n.apply(this,arguments)||this}o(e,n);var t=e.prototype;return t.onLoad=function(){i.instance.inputBlockerNode=this.node},t.onDestroy=function(){i.instance.inputBlockerNode=null},e}(u))||a)||a)||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/MapGamePickingLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./MapItem.ts","./PickingBanner.ts","./AudioHelper3.ts","./GameSender18.ts"],(function(t){var e,i,n,r,o,a,l,s,c,p,h,u,m,S,_,d,f,k,g,E,P,I,y,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,n=t.inheritsLoose,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.v3,s=t.sp,c=t.Sprite,p=t.ParticleSystem2D,h=t.color,u=t.Tween,m=t.Color,S=t.tween,_=t.math,d=t.Vec3},function(t){f=t.SubGameData},function(t){k=t.common},function(t){g=t.DisplayTaskManager,E=t.Display},function(t){P=t.MapItem},function(t){I=t.PickingBanner},function(t){y=t.AudioHelper},function(t){T=t.GameSender}],execute:function(){var b,L,M,A,v,D,G,R,O,U,C,z,H,B,w,x,N,F,W,V,Z,j,K,Y,q,J;o._RF.push({},"bd329yrIB9EE4W7tAPIH1dY","MapGamePickingLayer",void 0);var Q=a.ccclass,X=a.menu,$=a.property,tt="animation6",et=((b={})[k.EStageType.GREEN]="theme277_pick_3",b[k.EStageType.BLUE]="theme277_pick_4",b[k.EStageType.PURPLE]="theme277_pick_5",b[k.EStageType.RED]="theme277_pick_6",b[k.EStageType.GOLD]="theme277_pick_7",b),it=l(-215,387,0),nt=l(76,379,0),rt=[f.AUDIO_URLS.SE_MAP_GAME_SPEECH_SUPER_1,f.AUDIO_URLS.SE_MAP_GAME_SPEECH_SUPER_2,f.AUDIO_URLS.SE_MAP_GAME_SPEECH_SUPER_3],ot=t("MapGamePickableTier",(L=Q("MapGamePickableTier"),M=$([P]),L((D=e((v=function(){i(this,"mapItemsList",D,this)}).prototype,"mapItemsList",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=v))||A));t("MapGamePickingLayer",(G=Q("MapGamePickingLayer"),R=X(f.module+"/layers/MapGamePickingLayer"),O=$(s.Skeleton),U=$([c]),C=$(s.Skeleton),z=$([ot]),H=$(s.Skeleton),B=$(I),w=$(p),x=$(p),G(N=R((W=e((F=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"tycoonSkeleton",W,r(e)),i(e,"backgroundSpritesList",V,r(e)),i(e,"highlightSkeleton",Z,r(e)),i(e,"pickableTiersList",j,r(e)),i(e,"pickOneSkeleton",K,r(e)),i(e,"banner",Y,r(e)),i(e,"multiplierParticle",q,r(e)),i(e,"scoreParticle",J,r(e)),e._pickable=!1,e._startPrize=0,e._currentTier=0,e._currentScore=0,e._currentMultiplier=0,e._cachedColor=h(),e._cachedPosition=l(),e}n(e,t);var o=e.prototype;return o.onLoad=function(){var e=this;t.prototype.onLoad.call(this),g.addHandler(this),this.node.active=!1,this.pickableTiersList.forEach((function(t,i){t.mapItemsList.forEach((function(t,n){t.tier=i,t.index=n,t.delegate=e}))}))},o.onTaskInitialize=function(t,e){var i=this;if(this._pickable=!1,this._startPrize=e.mapStartPrize,this._currentTier=0,this._currentScore=0,this._currentMultiplier=0,this.multiplierParticle.stopSystem(),this.scoreParticle.stopSystem(),u.stopAllByTarget(this.highlightSkeleton.node),u.stopAllByTarget(this.multiplierParticle.node),u.stopAllByTarget(this.scoreParticle.node),e.gameMode===k.EGameMode.SUPER_MAP){var n;this._currentTier=e.mapTierInfosGroup.length;for(var r=e.mapTierInfosGroup.length-1;r>=0;--r){var o=e.mapTierInfosGroup[r];if(o&&o.pickedIndex>=0)break;this._currentTier=r}this.node.active=!0,this.tycoonSkeleton.setAnimation(0,tt,!0),this.backgroundSpritesList.forEach((function(t){var i;t.changeSpriteFrameFromAtlas(et[null!=(i=e.mapStageInfo.type)?i:k.EStageType.GREEN])})),this.banner.reset(),this.banner.updateMultiplier(this._currentMultiplier,!1),this.banner.updateScore(this._startPrize+this._currentScore,!1);for(var a=Math.min(this._currentTier,this.pickableTiersList.length),l=function(){var t,n=i.pickableTiersList[s],r=null!=(t=e.mapTierInfosGroup[s])?t:{pickedIndex:-1,itemInfosList:[]},o=r.itemInfosList[r.pickedIndex],a=(null==o?void 0:o.itemID)===k.EMapItem.WIN_ALL;n.mapItemsList.forEach((function(t,e){var n,o=null!=(n=r.itemInfosList[e])?n:{itemID:k.EMapItem.SCORE,value:0};a||e===r.pickedIndex?(i._collectItem(o,d.ZERO,!1),t.open(o,!1)):t.showDown(o,!1)}))},s=0;s<a;++s)l();null==(n=this.pickableTiersList[a])||n.mapItemsList.forEach((function(t){return t.cover(!0)}));for(var c=a+1;c<this.pickableTiersList.length;++c){this.pickableTiersList[c].mapItemsList.forEach((function(t){return t.cover(!1)}))}var p=this._getTierPosition(this._currentTier);p?(this.highlightSkeleton.node.setPosition(p),this.highlightSkeleton.color=m.WHITE):this.highlightSkeleton.color=m.TRANSPARENT,this._currentTier<=0?(this.pickOneSkeleton.node.setScale(1,1,1),this.pickOneSkeleton.color=m.WHITE):this.pickOneSkeleton.color=m.TRANSPARENT}else this.node.active=!1},o.onTaskMapGameTrigger=function(t,e){this._startPrize=e.mapStartPrize},o.onTaskMapGameStart=function(t,e){var i=this;this.startDisplay(),this._pickable=!1,this._currentTier=0,this._currentScore=0,this._currentMultiplier=0,this._cachedColor.set(m.WHITE),this._cachedColor.a=0,this.highlightSkeleton.color=this._cachedColor,this.pickOneSkeleton.node.setScale(.5,.5,1),this.pickOneSkeleton.color=this._cachedColor,this.multiplierParticle.stopSystem(),this.scoreParticle.stopSystem(),u.stopAllByTarget(this.highlightSkeleton.node),u.stopAllByTarget(this.multiplierParticle.node),u.stopAllByTarget(this.scoreParticle.node),S(this.highlightSkeleton.node).to(.25,{},{onStart:function(){return y.instance.playSoundEffect(f.AUDIO_URLS.SE_MAP_GAME_HIGHLIGHT_MOVE)},onUpdate:function(t,e){null!=e&&(i._cachedColor.a=_.lerp(0,255,e),i.highlightSkeleton.color=i._cachedColor)}}).call((function(){i.pickableTiersList[0].mapItemsList.forEach((function(t){return t.cover(!0)}))})).delay(.25).to(.3,{},{onUpdate:function(t,e){if(null!=e){var n=_.lerp(.5,1,e);i.pickOneSkeleton.node.setScale(n,n,1),i._cachedColor.a=_.lerp(0,255,e),i.pickOneSkeleton.color=i._cachedColor}}}).call((function(){return i.endDisplay()})).start()},o.onTaskMapGamePickStart=function(t,e){this._pickable=!0},o.onTaskMapGamePickEnd=function(t,e){var i=this;this._pickable=!1;var n=this.pickableTiersList[e.tier];if(n){var r=n.mapItemsList[e.itemIndex],o=e.itemInfosList[e.itemIndex],a=(null==o?void 0:o.itemID)===k.EMapItem.WIN_ALL,l=a?"open":"showDown",s=function(){n.mapItemsList.forEach((function(t){var n;if(t.index!==e.itemIndex){i.startDisplay();var r=null!=(n=e.itemInfosList[t.index])?n:{itemID:k.EMapItem.SCORE,value:0};t[l](r,!0,(function(){return i.endDisplay()}))}}))};if(r&&o?(this.startDisplay(),r.open(o,!0,(function(){if(a){i.tycoonSkeleton.setAnimation(0,"animation5",!1),i.tycoonSkeleton.addAnimation(0,tt,!0);var t=rt[_.randomRangeInt(0,rt.length)];y.instance.playSoundEffect(t)}else i._collectItem(o,i._getItemPositionForParticle(r),!0);s(),i.endDisplay()})),y.instance.playSoundEffect(f.AUDIO_URLS.SE_MAP_GAME_PICK)):s(),this.pickOneSkeleton.color.a>0){this._cachedColor.set(m.WHITE);var c=this.pickOneSkeleton.color.a;u.stopAllByTarget(this.highlightSkeleton.node),S(this.highlightSkeleton.node).delay(.2).to(.3,{},{onUpdate:function(t,e){null!=e&&(i._cachedColor.a=_.lerp(c,0,e),i.pickOneSkeleton.color=i._cachedColor)}}).start()}}},o.onTaskMapGameCollectItem=function(t,e){var i,n=null==(i=this.pickableTiersList[e.tier])?void 0:i.mapItemsList[e.itemIndex];n&&this._collectItem(e.itemInfo,this._getItemPositionForParticle(n),!0)},o.onTaskMapGameUpgrade=function(t,e){var i=this;if(e.tier!==this._currentTier){var n=this._getTierPosition(e.tier);n&&(this.startDisplay(),this._currentTier=e.tier,u.stopAllByTarget(this.highlightSkeleton.node),S(this.highlightSkeleton.node).delay(.4).to(.25,{position:n},{onStart:function(){return y.instance.playSoundEffect(f.AUDIO_URLS.SE_MAP_GAME_HIGHLIGHT_MOVE)}}).call((function(){i.pickableTiersList[i._currentTier].mapItemsList.forEach((function(t){return t.cover(!0)})),i.endDisplay()})).start())}},o.onTaskMapGameMultiply=function(t,e){var i=this;this.startDisplay(),this.banner.settle(!0,(function(){return i.endDisplay()}))},o.onTaskShowMapGame=function(t,e){if(e.mapStageInfo.super){this._pickable=!1,this._currentTier=0,this._currentScore=0,this._currentMultiplier=0,this.node.active=!0,this.tycoonSkeleton.setAnimation(0,tt,!0),this.banner.reset(),this.banner.updateMultiplier(this._currentMultiplier,!1),this.banner.updateScore(this._startPrize+this._currentScore,!1),this.backgroundSpritesList.forEach((function(t){var i;t.changeSpriteFrameFromAtlas(et[null!=(i=e.mapStageInfo.type)?i:k.EStageType.GREEN])})),this.pickableTiersList.forEach((function(t){return t.mapItemsList.forEach((function(t){return t.cover(!1)}))})),this.highlightSkeleton.color=m.TRANSPARENT;var i=this._getTierPosition(0);i&&this.highlightSkeleton.node.setPosition(i),this.pickOneSkeleton.color=m.TRANSPARENT,this.multiplierParticle.stopSystem(),this.scoreParticle.stopSystem(),u.stopAllByTarget(this.highlightSkeleton.node),u.stopAllByTarget(this.multiplierParticle.node),u.stopAllByTarget(this.scoreParticle.node)}},o.onTaskHideMapGame=function(t,e){this.node.active=!1},o.onMapItemClick=function(t){this._pickable&&t.tier===this._currentTier&&App.senderManager.get(T).c2sPickMapItem({floor:t.tier+1,pos:t.index+1})},o._getTierPosition=function(t){var e;return null==(e=this.pickableTiersList[t])||null==(e=e.mapItemsList)||null==(e=e[0])||null==(e=e.node.parent)?void 0:e.position},o._getItemPositionForParticle=function(t){var e,i;return this._cachedPosition.set(t.node.position).add(null!=(e=null==(i=t.node.parent)?void 0:i.position)?e:d.ZERO)},o._collectItem=function(t,e,i){var n=this;i?t.itemID===k.EMapItem.MULTIPLIER?(this.startDisplay(),this._currentMultiplier+=t.value,this.multiplierParticle.node.setPosition(e),this.multiplierParticle.resetSystem(),u.stopAllByTarget(this.multiplierParticle.node),S(this.multiplierParticle.node).to(.5,{position:it}).call((function(){n.multiplierParticle.stopSystem(),n.banner.updateMultiplier(n._currentMultiplier,!0),n.endDisplay()})).start(),y.instance.playOneShotSoundEffect(f.AUDIO_URLS.SE_MAP_GAME_MULTIPLIER_COLLECT)):t.itemID===k.EMapItem.SCORE&&(this.startDisplay(),this._currentScore+=t.value,this.scoreParticle.node.setPosition(e),this.scoreParticle.resetSystem(),u.stopAllByTarget(this.scoreParticle.node),S(this.scoreParticle.node).to(.5,{position:nt}).call((function(){n.scoreParticle.stopSystem(),n.banner.updateScore(n._startPrize+n._currentScore,!0),n.endDisplay()})).start(),y.instance.playOneShotSoundEffect(f.AUDIO_URLS.SE_MAP_GAME_SCORE_COLLECT)):t.itemID===k.EMapItem.MULTIPLIER?(this._currentMultiplier+=t.value,this.banner.updateMultiplier(this._currentMultiplier,!1)):t.itemID===k.EMapItem.SCORE&&(this._currentScore+=t.value,this.banner.updateScore(this._startPrize+this._currentScore,!1))},e}(E)).prototype,"tycoonSkeleton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(F.prototype,"backgroundSpritesList",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=e(F.prototype,"highlightSkeleton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(F.prototype,"pickableTiersList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=e(F.prototype,"pickOneSkeleton",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(F.prototype,"banner",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(F.prototype,"multiplierParticle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(F.prototype,"scoreParticle",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=F))||N)||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/MapGamePopupLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NumberRoller.ts","./SubGameData18.ts","./Display3.ts","./CountdownableButton.ts","./AudioHelper3.ts"],(function(t){var e,i,n,o,a,s,r,l,u,c,p,y,h,b,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.UIOpacity,l=t.sp,u=t.Tween,c=t.tween},function(t){p=t.NumberRoller},function(t){y=t.SubGameData},function(t){h=t.DisplayTaskManager,b=t.Display},function(t){f=t.CountdownableButton},function(t){m=t.AudioHelper}],execute:function(){var I,_,O,d,U,D,S,A,N,k,w,g,E,H,M,P,L,T;a._RF.push({},"93eber76q1FM4px/fdI3Mxt","MapGamePopupLayer",void 0);var G=s.ccclass,C=s.menu,v=s.property,R=function(t){return t[t.HIDDEN=0]="HIDDEN",t[t.SHOWING=1]="SHOWING",t[t.SHOWN=2]="SHOWN",t[t.HIDING=3]="HIDING",t}(R||{}),B="animation1",z="animation3";t("MapGamePopupLayer",(I=G("MapGamePopupLayer"),_=C(y.module+"/layers/MapGamePopupLayer"),O=v(r),d=v(l.Skeleton),U=v(p),D=v(r),S=v(f),A=v(r),N=v({visible:!0}),I(k=_((g=e((w=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"maskUIOpacity",g,o(e)),n(e,"skeleton",E,o(e)),n(e,"scoreNumberRoller",H,o(e)),n(e,"scoreUIOpacity",M,o(e)),n(e,"button",P,o(e)),n(e,"buttonUIOpacity",L,o(e)),n(e,"_super",T,o(e)),e._state=R.HIDDEN,e._score=0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),h.addHandler(this),this.skeleton.setCompleteListener(this._onSkeletonAnimationComplete.bind(this))},a.onTaskInitialize=function(t,e){this.stopAllDisplays(),this._state=R.HIDDEN,this.node.active=!1,this.button.stopCountdown()},a.onTaskMapGameSettle=function(t,e){e.super===this._super&&this._show(e.score)},a.onButtonClick=function(){this._hide(),m.instance.playSoundEffect(y.AUDIO_URLS.SE_COMMON_BUTTON_CLICK)},a._show=function(t){var e,i,n,o;this.stopAllDisplays(),this.startDisplay(),this._state=R.SHOWING,this._score=t,this.node.active=!0,u.stopAllByTarget(this.maskUIOpacity),this.maskUIOpacity.opacity=0,c(this.maskUIOpacity).to(.3,{opacity:255}).start(),this.skeleton.setAnimation(0,B,!1),this._super?(e=.4,i=.5,n=.4,o=.4):(e=.4,i=.15,n=.4,o=.25),this.scoreNumberRoller.startRolling(0,t,2),u.stopAllByTarget(this.scoreUIOpacity),this.scoreUIOpacity.opacity=0,c(this.scoreUIOpacity).delay(e).to(i,{opacity:255}).start(),this.button.interactable=!0,this.button.stopCountdown(),u.stopAllByTarget(this.buttonUIOpacity),this.buttonUIOpacity.opacity=0,c(this.buttonUIOpacity).delay(n).to(o,{opacity:255}).start(),m.instance.playSoundEffect(y.AUDIO_URLS.SE_POPUP_MAP_GAME_SETTLE)},a._hide=function(){var t,e,i,n,o,a;this._state===R.SHOWN&&(this._state=R.HIDING,this._super?(t=.8,e=.3,i=.4,n=.3,o=.25,a=.4):(t=.55,e=.25,i=.15,n=.25,o=.15,a=.25),u.stopAllByTarget(this.maskUIOpacity),c(this.maskUIOpacity).delay(t).to(e,{opacity:0}).start(),this.skeleton.setAnimation(0,z,!1),this.scoreNumberRoller.stopRollingAndShowNumber(this._score),u.stopAllByTarget(this.scoreUIOpacity),c(this.scoreUIOpacity).delay(i).to(n,{opacity:0}).start(),u.stopAllByTarget(this.buttonUIOpacity),this.button.interactable=!1,this.button.stopCountdown(),c(this.buttonUIOpacity).delay(o).to(a,{opacity:0}).start(),m.instance.stopEffect(y.AUDIO_URLS.SE_POPUP_MAP_GAME_SETTLE),m.instance.playSoundEffect(y.AUDIO_URLS.SE_COMMON_POPUP_HIDE))},a._onSkeletonAnimationComplete=function(t){var e=this;switch(t.animation.name){case B:this._state=R.SHOWN,this.skeleton.setAnimation(0,"animation2",!0),this.button.interactable=!0,this.button.startCountdown(4,(function(){return e._hide()}));break;case z:this._state=R.HIDDEN,this.node.active=!1,this.button.stopCountdown(),this.endDisplay()}},e}(b)).prototype,"maskUIOpacity",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(w.prototype,"skeleton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(w.prototype,"scoreNumberRoller",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(w.prototype,"scoreUIOpacity",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(w.prototype,"button",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(w.prototype,"buttonUIOpacity",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(w.prototype,"_super",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=w))||k)||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/MapGameSellingLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./FormatNumber.ts","./SubGameData18.ts","./Display3.ts","./AudioHelper3.ts","./ScreenHelper4.ts"],(function(e){var t,n,o,i,a,r,l,c,s,p,u,S,y,d,f,h,m,_,A,P,g,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.v3,c=e.sp,s=e.ParticleSystem2D,p=e.UIOpacity,u=e.Tween,S=e.clamp,y=e.tween,d=e.math,f=e.clamp01},function(e){h=e.Global},function(e){m=e.FormatNumber},function(e){_=e.SubGameData},function(e){A=e.DisplayTaskManager,P=e.Display},function(e){g=e.AudioHelper},function(e){k=e.ScreenHelper}],execute:function(){var b,U,O,M,v,I,E,L,D,G,T,R,H,N;a._RF.push({},"c3ab4uXghlPMrBH+uLPHKfr","MapGameSellingLayer",void 0);var w=r.ccclass,z=r.menu,C=r.property,B="animation8",F=l(129,255,0),x=l(0,-460,0),K=[_.AUDIO_URLS.SE_MAP_GAME_SPEECH_NORMAL_1,_.AUDIO_URLS.SE_MAP_GAME_SPEECH_NORMAL_2];e("MapGameSellingLayer",(b=w("MapGameSellingLayer"),U=z(_.module+"/layers/MapGameSellingLayer"),O=C(c.Skeleton),M=C(c.Skeleton),v=C(s),I=C(m),E=C(p),b(L=U((G=t((D=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"truckSkeleton",G,i(t)),o(t,"tycoonSkeleton",T,i(t)),o(t,"scoreParticle",R,i(t)),o(t,"scoreFormatNumber",H,i(t)),o(t,"scoreUIOpacity",N,i(t)),t._totalScoreAfterSelling=0,t._scoreOfSelling=0,t}n(t,e);var a=t.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),A.addHandler(this),this.truckSkeleton.setCompleteListener(this._onTruckSkeletonAnimationComplete.bind(this))},a.onTaskInitialize=function(e,t){this.stopAllDisplays(),this._totalScoreAfterSelling=0,this._scoreOfSelling=0,this.node.active=!1,u.stopAllByTarget(this.scoreParticle.node)},a.onTaskMapGameSellOil=function(e,t){this.stopAllDisplays(),this.startDisplay(),this._totalScoreAfterSelling=t.totalScore,this._scoreOfSelling=t.score,this.node.active=!0;var n=S(t.mapStageIndexInGroup,1,4);this.truckSkeleton.enabled=!0,this.truckSkeleton.setAnimation(0,"animation"+n+"_1",!1),this.truckSkeleton.addAnimation(0,"animation"+n+"_2",!0),this.scoreFormatNumber.updateNumber(t.score),g.instance.playSoundEffect(_.AUDIO_URLS.SE_MAP_GAME_TRUCK_RUN)},a.onTaskShowMapGame=function(e,t){t.mapStageInfo.super||(this.node.active=!0,this.truckSkeleton.enabled=!1,this.tycoonSkeleton.setAnimation(0,B,!0),u.stopAllByTarget(this.scoreParticle.node),this.scoreParticle.node.active=!1,this.scoreParticle.node.setPosition(F),this.scoreParticle.node.setScale(1,1,1),this.scoreParticle.stopSystem(),this.scoreUIOpacity.node.setScale(.5,.5,1),this.scoreUIOpacity.opacity=0)},a.onTaskHideMapGame=function(e,t){this.node.active=!1},a._onTruckSkeletonAnimationComplete=function(e){var t=this;e.animation.name.endsWith("_1")&&(this.tycoonSkeleton.setAnimation(0,"animation7",!1),this.tycoonSkeleton.addAnimation(0,B,!0),u.stopAllByTarget(this.scoreParticle.node),this.scoreParticle.node.active=!0,this.scoreParticle.node.setPosition(F),this.scoreParticle.node.setScale(1,1,1),this.scoreParticle.resetSystem(),this.scoreUIOpacity.node.setScale(.5,.5,1),this.scoreUIOpacity.opacity=0,y(this.scoreParticle.node).to(.35,{},{onStart:function(){g.instance.playSoundEffect(_.AUDIO_URLS.SE_MAP_GAME_BONUS_APPEAR);var e=K[d.randomRangeInt(0,K.length)];g.instance.playSoundEffect(e)},onUpdate:function(e,n){if(null!=n){t.scoreUIOpacity.opacity=d.lerp(0,255,n);var o=d.lerp(.5,1.2,n);t.scoreUIOpacity.node.setScale(o,o,1)}}}).to(.15,{},{onUpdate:function(e,n){if(null!=n){var o=d.lerp(1.2,1,n);t.scoreUIOpacity.node.setScale(o,o,1)}}}).delay(.5).to(.15,{},{onStart:function(){return g.instance.playSoundEffect(_.AUDIO_URLS.SE_MAP_GAME_BONUS_COLLECT)},onUpdate:function(e,n){if(null!=n){t.scoreParticle.node.setPosition(F.x,F.y+d.lerp(0,20,n),1);var o=d.lerp(1,1.1,n);t.scoreParticle.node.setScale(o,o,1)}}}).to(.35,{},{onUpdate:function(e,n){if(null!=n){var o=x.y+.5*(h.design_width-k.renderSize.height);t.scoreParticle.node.setPosition(d.lerp(F.x,x.x,n),d.lerp(F.y+20,o,n),1);var i=f((1-n)/.5);t.scoreUIOpacity.opacity=d.lerp(0,255,i)}},onComplete:function(){t.scoreParticle.stopSystem(),A.runTask("updateTotalScoreAfterSellingOil",{totalScore:t._totalScoreAfterSelling,score:t._scoreOfSelling})}}).delay(.5).call((function(){t.endDisplay()})).start())},t}(P)).prototype,"truckSkeleton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(D.prototype,"tycoonSkeleton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(D.prototype,"scoreParticle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(D.prototype,"scoreFormatNumber",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(D.prototype,"scoreUIOpacity",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=D))||L)||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/MapItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FormatNumber.ts","./SubGameData18.ts","./SubGameDefines18.ts"],(function(e){var t,o,i,n,a,l,r,c,s,m,u,h,p,b,k,S,v,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){l=e.cclegacy,r=e._decorator,c=e.Label,s=e.sp,m=e.color,u=e.Color,h=e.tween,p=e.math,b=e.Tween,k=e.Component},function(e){S=e.FormatNumber},function(e){v=e.SubGameData},function(e){d=e.common}],execute:function(){var I,f,_,A,L,E,N,C,R,y,M,T,g,w;l._RF.push({},"8ca30/w2BZFF6CI8XZNrszn","MapItem",void 0);var D=r.ccclass,F=r.menu,z=r.property,P="animation1_2",G="animation2_2",W="animation",H="animation2";e("MapItem",(I=D("MapItem"),f=F(v.module+"/elements/MapItem"),_=z(c),A=z(S),L=z(c),E=z(s.Skeleton),N=z(s.Skeleton),I(C=f((y=t((R=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"multiplierLabel",y,n(t)),i(t,"scoreFormatNumber",M,n(t)),i(t,"scoreLabel",T,n(t)),i(t,"specialItemSkeleton",g,n(t)),i(t,"coverSkeleton",w,n(t)),t.tier=-1,t.index=-1,t._delegate=void 0,t._callback=void 0,t._cachedColor=m(),t}o(t,e);var l=t.prototype;return l.onLoad=function(){this.coverSkeleton.setCompleteListener(this._onCoverSkeletonAnimationComplete.bind(this)),this.cover(!1)},l.cover=function(e){var t=this;this._reset(),this.coverSkeleton.setAnimation(0,W,!1),this.coverSkeleton.color=e?u.WHITE:u.GRAY,e&&h(this.coverSkeleton.node).delay(p.randomRangeInt(0,3)).call((function(){return t.coverSkeleton.setAnimation(0,"animation1",!0)})).start()},l.open=function(e,t,o){this._reset();var i=void 0;switch(e.itemID){case d.EMapItem.MULTIPLIER:this.multiplierLabel.string=e.value+"X",i=this.multiplierLabel;break;case d.EMapItem.SCORE:this.scoreFormatNumber.updateNumber(e.value),i=this.scoreLabel;break;case d.EMapItem.WIN_ALL:this.specialItemSkeleton.setAnimation(0,P,!0),i=this.specialItemSkeleton;break;case d.EMapItem.END:this.specialItemSkeleton.setAnimation(0,G,!0),i=this.specialItemSkeleton}if(i)if(t)if(this._callback=o,this.coverSkeleton.color=u.WHITE,this.coverSkeleton.setAnimation(0,H,!1),i instanceof c)i.node.setScale(0,0,1),h(this.coverSkeleton.node).delay(.15).to(.15,{},{onStart:function(){return i.color=u.WHITE},onUpdate:function(e,t){if(null!=t){var o=p.lerp(0,1,t);i.node.setScale(o,o,1)}}}).start();else{var n="animation1",a=P;e.itemID===d.EMapItem.END&&(n="animation2",a=G),h(this.coverSkeleton.node).delay(.15).call((function(){i.color=u.WHITE,i.setAnimation(0,n,!1),i.addAnimation(0,a,!0)})).start()}else i.color=u.WHITE;else t&&o&&o(this)},l.showDown=function(e,t,o){var i=this;this._reset();var n=void 0;switch(e.itemID){case d.EMapItem.MULTIPLIER:this.multiplierLabel.string=e.value+"X",n=this.multiplierLabel;break;case d.EMapItem.SCORE:this.scoreFormatNumber.updateNumber(e.value),n=this.scoreLabel;break;case d.EMapItem.WIN_ALL:this.specialItemSkeleton.setAnimation(0,"animation1_1",!1),n=this.specialItemSkeleton;break;case d.EMapItem.END:this.specialItemSkeleton.setAnimation(0,"animation2_1",!1),n=this.specialItemSkeleton}n?(n.color=u.GRAY,t&&(this._cachedColor.set(u.GRAY),this._callback=o,this.coverSkeleton.color=u.GRAY,this.coverSkeleton.setAnimation(0,W,!1),h(this.coverSkeleton.node).to(.5,{},{onUpdate:function(e,t){null!=t&&(i._cachedColor.a=p.lerp(255,0,t),i.coverSkeleton.color=i._cachedColor,i._cachedColor.a=255-i._cachedColor.a,n.color=i._cachedColor)}}).call((function(){return null==o?void 0:o(i)})).start())):t&&o&&o(this)},l.onButtonClick=function(){var e;null==(e=this._delegate)||e.onMapItemClick(this)},l._reset=function(){this.multiplierLabel.node.setScale(1,1,1),this.multiplierLabel.color=u.TRANSPARENT,this.scoreLabel.node.setScale(1,1,1),this.scoreLabel.color=u.TRANSPARENT,this.specialItemSkeleton.clearAnimation(0),this.specialItemSkeleton.color=u.TRANSPARENT,this.coverSkeleton.clearAnimation(0),this.coverSkeleton.color=u.TRANSPARENT,b.stopAllByTarget(this.coverSkeleton.node)},l._onCoverSkeletonAnimationComplete=function(e){if(e.animation.name===H){var t=this._callback;this._callback=void 0,null==t||t(this)}},a(t,[{key:"delegate",set:function(e){this._delegate=e}}]),t}(k)).prototype,"multiplierLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(R.prototype,"scoreFormatNumber",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(R.prototype,"scoreLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(R.prototype,"specialItemSkeleton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(R.prototype,"coverSkeleton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=R))||C)||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/MapLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonEvent.ts","./SubGameData18.ts","./Display3.ts","./Stage.ts","./AudioHelper3.ts","./ScreenHelper4.ts"],(function(t){var e,i,o,n,a,s,r,c,l,u,h,p,d,S,_,g,f,I,y,N,D,O,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.UIOpacity,c=t.Node,l=t.ScrollView,u=t.sp,h=t.v2,p=t.v3,d=t.Tween,S=t.tween,_=t.math,g=t.easing},function(t){f=t.CommonEvent},function(t){I=t.SubGameData},function(t){y=t.DisplayTaskManager,N=t.Display},function(t){D=t.Stage},function(t){O=t.AudioHelper},function(t){m=t.ScreenHelper}],execute:function(){var k,b,v,H,z,U,E,A,C,M,P,T,R,w,B,G;a._RF.push({},"da3f4jk4N5DU5/lLKCfts7q","MapLayer",void 0);var L=s.ccclass,W=s.menu,F=s.property,V=function(t){return t[t.HIDDEN=0]="HIDDEN",t[t.SHOWING=1]="SHOWING",t[t.SHOWN=2]="SHOWN",t[t.HIDING=3]="HIDING",t}(V||{}),x="animation1";t("MapLayer",(k=L("MapLayer"),b=W(I.module+"/layer/MapLayer"),v=F(r),H=F(c),z=F(c),U=F(l),E=F(c),A=F(u.Skeleton),k(C=b((P=e((M=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,o(e,"maskUIOpacity",P,n(e)),o(e,"innerInputBlockerNode",T,n(e)),o(e,"resizableNode",R,n(e)),o(e,"scrollView",w,n(e)),o(e,"stagesRootNode",B,n(e)),o(e,"cursorSkeleton",G,n(e)),e._state=V.HIDDEN,e._currentStageID=0,e._cachedPositionForSpace=h(),e._cachedPositionForCursor=p(),e}i(e,t);var a=e.prototype;return a.onLoad=function(){t.prototype.onLoad.call(this),y.addHandler(this),this.onD(f.SWITCH_SCREEN,this._onOrientationChange),this._hide(!1),this.cursorSkeleton.setAnimation(0,x,!0),this.innerInputBlockerNode.active=!1},a.onTaskInitialize=function(t,e){this.stopAllDisplays(),this._currentStageID=e.mapStageID,d.stopAllByTarget(this.stagesRootNode),d.stopAllByTarget(this.resizableNode),d.stopAllByTarget(this.cursorSkeleton.node),this._hide(!1),this._updateStageStates(),this._focusOnStage(this._currentStageID),this._updateCursorPosition(this._currentStageID),this.innerInputBlockerNode.active=!1},a.onTaskMapGameMoveCursor=function(t,e){var i=this;this.startDisplay(),this._focusOnStage(this._currentStageID),this._currentStageID=e.mapStageID,this.innerInputBlockerNode.active=!0;var o=function(){i._focusOnStage(i._currentStageID,.55),i._updateCursorPosition(i._currentStageID,.55),d.stopAllByTarget(i.stagesRootNode),S(i.stagesRootNode).delay(.55).call((function(){var t,e=null==(t=i.stagesRootNode.children[i._currentStageID])?void 0:t.getComponent(D);e&&(e.highlight(),I.getMapStageInfo(i._currentStageID).super?O.instance.playSoundEffect(I.AUDIO_URLS.SE_MAP_SUPER_STAGE_HIGHLIGHT):O.instance.playSoundEffect(I.AUDIO_URLS.SE_MAP_STAGE_HIGHLIGHT))})).delay(1).call((function(){y.runTask("showMapGame",{mapStageID:i._currentStageID,mapStageInfo:I.getMapStageInfo(i._currentStageID)}),i._hide(!0,(function(){i._currentStageID>=I.MAP_STAGES_NUMBER-1&&(i._currentStageID=0,i._updateCursorPosition(0)),i._updateStageStates(),i.innerInputBlockerNode.active=!1,i.endDisplay()}))})).start()};this._state===V.SHOWN?o():this._show(!1,!0,o)},a.onTaskChangeBet=function(t,e){this._currentStageID=e.mapStageID,this._updateStageStates(),this._focusOnStage(this._currentStageID),this._updateCursorPosition(this._currentStageID)},a.onTaskShowMap=function(t,e){this._show(!0,!0)},a.onTaskHideMap=function(t,e){this._hide(!0)},a._show=function(t,e,i){var o=this;if(t&&this._focusOnStage(this._currentStageID),!e)return this._state=V.SHOWN,this.maskUIOpacity.node.active=!0,this.maskUIOpacity.opacity=255,void this._onOrientationChange();if(this._state!==V.SHOWING&&this._state!==V.SHOWN){this._state=V.SHOWING;var n=m.renderSize.height,a=Math.abs(.5*-n-this.resizableNode.position.y)/n,s=255*(1-a),r=this.resizableNode.position.y;this.maskUIOpacity.node.active=!0,this.maskUIOpacity.opacity=s,d.stopAllByTarget(this.resizableNode),S(this.resizableNode).to(.6*a,{},{onUpdate:function(t,e){null!=e&&(o.maskUIOpacity.opacity=_.lerp(s,255,e),o.resizableNode.setPosition(0,_.lerp(r,.5*-m.renderSize.height,g.sineOut(e)),0))},onComplete:function(){o._state=V.SHOWN,o.maskUIOpacity.node.active=!0,o.maskUIOpacity.opacity=255,o.resizableNode.setPosition(0,.5*-m.renderSize.height,0),null==i||i()}}).start(),O.instance.playSoundEffect(I.AUDIO_URLS.SE_MAP_SHOW)}},a._hide=function(t,e){var i=this;if(!t)return this._state=V.HIDDEN,this.maskUIOpacity.node.active=!1,this.maskUIOpacity.opacity=0,void this._onOrientationChange();if(this._state!==V.HIDING&&this._state!==V.HIDDEN){this._state=V.HIDING;var o=m.renderSize.height,n=255*(Math.abs(.5*o-this.resizableNode.position.y)/o),a=this.resizableNode.position.y;this.maskUIOpacity.node.active=!0,this.maskUIOpacity.opacity=n,d.stopAllByTarget(this.resizableNode),S(this.resizableNode).to(.6*Math.abs(.5*o-this.resizableNode.position.y)/o,{},{onUpdate:function(t,e){null!=e&&(i.maskUIOpacity.opacity=_.lerp(n,0,e),i.resizableNode.setPosition(0,_.lerp(a,.5*m.renderSize.height,g.sineOut(e)),0))},onComplete:function(){i._state=V.HIDDEN,i.maskUIOpacity.node.active=!1,i.maskUIOpacity.opacity=0,i.resizableNode.setPosition(0,.5*m.renderSize.height,0),null==e||e()}}).start(),O.instance.playSoundEffect(I.AUDIO_URLS.SE_MAP_HIDE)}},a.onBackButtonClick=function(){this._hide(!0),O.instance.playSoundEffect(I.AUDIO_URLS.SE_COMMON_BUTTON_CLICK)},a._updateStageStates=function(){var t=this;this.stagesRootNode.children.forEach((function(e,i){var o=e.getComponent(D);o&&(o.completed=i<=t._currentStageID)}))},a._focusOnStage=function(t,e){var i,o=(null!=(i=this.stagesRootNode.children[t])?i:this.stagesRootNode.children[0]).position,n=this.scrollView.getMaxScrollOffset().y,a=Math.min(Math.max(0,n-(o.y-.5*m.renderSize.height)),n);this._cachedPositionForSpace.set(this.scrollView.getScrollOffset().x,a),this.scrollView.scrollToOffset(this._cachedPositionForSpace,e,!1)},a._updateCursorPosition=function(t,e){d.stopAllByTarget(this.cursorSkeleton.node);var i=this._getPositionForCursor(t);if(null==e||e<=0)return this.cursorSkeleton.node.setPosition(i),void this.cursorSkeleton.setAnimation(0,x,!0);S(this.cursorSkeleton.node).to(e,{position:i},{easing:"cubicOut"}).start(),this.cursorSkeleton.setAnimation(0,"animation2",!1),this.cursorSkeleton.addAnimation(0,x,!0),O.instance.playSoundEffect(I.AUDIO_URLS.SE_MAP_MOVE_CUSOR)},a._getPositionForCursor=function(t){var e,i=null!=(e=this.stagesRootNode.children[t])?e:this.stagesRootNode.children[0],o=0===t?145:95;return this._cachedPositionForCursor.set(i.position.x,i.position.y+o,0),this._cachedPositionForCursor},a._onOrientationChange=function(){if(this._state===V.HIDDEN){var t=m.renderSize;this.resizableNode.setPosition(0,.5*t.height,0)}else if(this._state===V.SHOWN){var e=m.renderSize;this.resizableNode.setPosition(0,.5*-e.height,0)}},e}(N)).prototype,"maskUIOpacity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(M.prototype,"innerInputBlockerNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(M.prototype,"resizableNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(M.prototype,"scrollView",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(M.prototype,"stagesRootNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(M.prototype,"cursorSkeleton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=M))||C)||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/PageChange3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonEvent.ts","./SlotGameDefines.ts"],(function(e){var t,n,r,a,i,o,g,u,s,c,l,P,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,g=e.PageView,u=e.Node,s=e.SpriteFrame,c=e.Sprite,l=e.Component},function(e){P=e.CommonEvent},function(e){h=e.SoundName}],execute:function(){var p,d,f,m,C,y,L,x,b;i._RF.push({},"2d25cuiWXVJjYrcE3cJgEan","PageChange",void 0);var v=o.ccclass,I=o.property;e("PageChange",(p=v("PageChange"),d=I({type:g}),f=I({type:u}),m=I({type:[s]}),p((L=t((y=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"Page",L,a(t)),r(t,"Layout",x,a(t)),r(t,"Sprite",b,a(t)),t.PageNum=7,t}n(t,e);var i=t.prototype;return i.GoNextPage=function(){Log.d(this.Page.getCurrentPageIndex()+"!!!!"),this.Page.getCurrentPageIndex()<this.PageNum?this.Page.scrollToPage(this.Page.getCurrentPageIndex()+1):this.Page.scrollToPage(0)},i.GoLastPage=function(){this.Page.getCurrentPageIndex()>0?this.Page.scrollToPage(this.Page.getCurrentPageIndex()-1):this.Page.scrollToPage(this.PageNum)},i.ChangeIndex=function(){dispatch(P.PLAY_EFFECT,h.SOUND_HELP_PLAY_CHANGE);for(var e=0;e<this.Layout.children.length&&!(this.Page.getCurrentPageIndex()>this.PageNum||this.Page.getCurrentPageIndex()<0);e++)e==this.Page.getCurrentPageIndex()?this.Layout.children[e].getComponent(c).spriteFrame=this.Sprite[1]:this.Layout.children[e].getComponent(c).spriteFrame=this.Sprite[0]},t}(l)).prototype,"Page",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(y.prototype,"Layout",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(y.prototype,"Sprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=y))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/ParticlesLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts"],(function(e){var t,o,n,i,a,r,l,s,c,u,p,h,d,P,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.v3,s=e.ParticleSystem2D,c=e.Node,u=e.Tween,p=e.tween,h=e.instantiate},function(e){d=e.default},function(e){P=e.SubGameData},function(e){f=e.common},function(e){m=e.DisplayTaskManager}],execute:function(){var y,_,b,S,T,g,v,N,F,C,R,E;a._RF.push({},"923b6tdI8RJj7d1P6dzGR0s","ParticlesLayer",void 0);var L=r.ccclass,D=r.menu,w=r.property,z=l(22,434,0),B=l(335,10,0);e("ParticlesLayer",(y=L("ParticlesLayer"),_=D(P.module+"/layers/ParticlesLayer"),b=w(s),S=w(s),T=w(c),g=w(c),y(v=_((F=t((N=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"flashTemplateParticle",F,i(t)),n(t,"coinTemplateParticle",C,i(t)),n(t,"flashParticlesRootNode",R,i(t)),n(t,"coinParticlesRootNode",E,i(t)),t._flashParticleNodesPool=[],t._coinParticleNodesPool=[],t._cachedPosition=l(),t}o(t,e);var a=t.prototype;return a.onLoad=function(){e.prototype.onLoad.call(this),m.addHandler(this),this.flashTemplateParticle.stopSystem(),this.coinTemplateParticle.stopSystem()},a.onTaskInitialize=function(e,t){var o=this;this.flashParticlesRootNode.children.slice().forEach((function(e){o._pushFlashParticle(e.getComponent(s))})),this.coinParticlesRootNode.children.slice().forEach((function(e){o._pushFlashParticle(e.getComponent(s))}))},a.onTaskSpinEnd=function(e,t){var o=this;t.spinType===f.ESpinType.BET&&t.symbolsGroups.forEach((function(e,t){e.forEach((function(e,n){if(P.isCollectableSymbol(e.id)){var i=o._popFlashParticle();i.node.setParent(o.flashParticlesRootNode),i.node.setPosition(o._getSymbolPosition(t,n)),i.resetSystem(),u.stopAllByTarget(i.node),p(i.node).to(.35,{position:z}).call((function(){return i.stopSystem()})).delay(.45).call((function(){return o._pushFlashParticle(i)})).start()}}))}))},a.onTaskFreeGameCollectFreeTimes=function(e,t){var o=this;t.symbolsWithFreeTimes.forEach((function(e){var t=o._popCoinParticle();t.node.setParent(o.coinParticlesRootNode),t.node.setPosition(o._getSymbolPosition(e.reelIndex,e.symbolIndex)),u.stopAllByTarget(t.node),p(t.node).delay(1).to(.5,{position:B},{onStart:function(){return t.resetSystem()},onComplete:function(){return t.stopSystem()}}).delay(.25).call((function(){return o._pushCoinParticle(t)})).start()}))},a._getSymbolPosition=function(e,t){return this._cachedPosition.set(P.SYMBOL_SIZE.width*(e+.5),P.SYMBOL_SIZE.height*(t+.5),0),this._cachedPosition},a._popFlashParticle=function(){var e;return(null!=(e=this._flashParticleNodesPool.pop())?e:h(this.flashTemplateParticle.node)).getComponent(s)},a._pushFlashParticle=function(e){u.stopAllByTarget(e.node),e.node.removeFromParent(),e.stopSystem(),this._flashParticleNodesPool.push(e.node)},a._popCoinParticle=function(){var e;return(null!=(e=this._coinParticleNodesPool.pop())?e:h(this.coinTemplateParticle.node)).getComponent(s)},a._pushCoinParticle=function(e){u.stopAllByTarget(e.node),e.node.removeFromParent(),e.stopSystem(),this._coinParticleNodesPool.push(e.node)},t}(d)).prototype,"flashTemplateParticle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(N.prototype,"coinTemplateParticle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(N.prototype,"flashParticlesRootNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(N.prototype,"coinParticlesRootNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=N))||v)||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/PaywayLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./AnimatedSymbol2.ts","./AnimatedSymbolNodePool2.ts"],(function(t){var a,e,n,o,i,s,l,r,y,u,c;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.Tween,i=t.tween},function(t){s=t.default},function(t){l=t.SubGameData},function(t){r=t.common},function(t){y=t.DisplayTaskManager},function(t){u=t.AnimatedSymbol},function(t){c=t.AnimatedSymbolNodePool}],execute:function(){var p;e._RF.push({},"50f33kar3NJZZq48E6fTsMp","PaywayLayer",void 0);var h=n.ccclass,m=n.menu;n.property,t("PaywayLayer",h("PaywayLayer")(p=m(l.module+"/layers/PaywayLayer")(p=function(t){function e(){for(var a,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(a=t.call.apply(t,[this].concat(n))||this)._featureType=r.EFeatureType.NONE,a._paywaysList=[],a}a(e,t);var n=e.prototype;return n.onLoad=function(){t.prototype.onLoad.call(this),y.addHandler(this)},n.onTaskInitialize=function(t,a){this._featureType=a.featureType,this._paywaysList.length=0,this._clearAllAnimations()},n.onTaskSpinStart=function(t,a){this._paywaysList.length=0,this._clearAllAnimations()},n.onTaskHitPayways=function(t,a){var e=this;if(this._clearAllAnimations(),!(a.paywayColumnsMap.size<=0)){this._paywaysList.length=0,a.paywayColumnsMap.forEach((function(t,a){e._paywaysList.push({symbolID:a,maxColumn:t})})),this._paywaysList.sort((function(t,a){return t.symbolID===a.symbolID?0:t.symbolID===l.WILD_SYMBOL_ID?-1:a.symbolID===l.WILD_SYMBOL_ID?1:t.symbolID-a.symbolID}));for(var n=l.getSymbolsNumberInReel(this._featureType),o=(this._featureType&r.EFeatureType.GREEN_TOWER)>0||(this._featureType&r.EFeatureType.BLUE_TOWER)>0,i=0;i<l.REELS_NUMBER;++i)for(var s=n-1;s>=0;--s){var y,p,h=null!=(y=null==(p=a.symbolsGroups[i])||null==(p=p[s])?void 0:p.id)?y:-1,m=a.paywayColumnsMap.get(h);if(!(null==m||i>m)){var f=c.instance.pop();if(f){f.setPosition(l.SYMBOL_SIZE.width*(i-2),l.SYMBOL_SIZE.height*(s+.5),0),f.setParent(this.node);var _=f.getComponent(u);_&&(_.symbolID=h,_.freeMode=o,_.row=s,_.column=i)}}}this._playHittingPayways(a.celebrating?1.7:0)}},n.onTaskChangeGame=function(t,a){this._featureType=a.nextFeatureType,this._clearAllAnimations()},n._clearAllAnimations=function(){o.stopAllByTarget(this.node),this.node.children.slice().forEach((function(t){t.active=!0,c.instance.push(t)}))},n._playHittingPayways=function(t){var a=this;if(!(this.node.children.length<=0)){var e=-1,n=function(){o.stopAllByTarget(a.node),i(a.node).call((function(){e=++e%a._paywaysList.length;var t=a._paywaysList[e];t.symbolID===l.WILD_SYMBOL_ID?a.node.children.forEach((function(t){var a;t.active=!0,null==(a=t.getComponent(u))||a.hit()})):a.node.children.forEach((function(a){a.active=!1;var e=a.getComponent(u);e&&(e.column>t.maxColumn||e.symbolID!==l.WILD_SYMBOL_ID&&e.symbolID!==t.symbolID||(a.active=!0,e.hit()))}))})).delay(3).union().repeatForever().start()};t<=0?n():(o.stopAllByTarget(this.node),i(this.node).delay(t).call(n).start())}},e}(s))||p)||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/PickingBanner.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FormatNumber.ts","./SubGameData18.ts","./AudioHelper3.ts"],(function(e){var t,i,l,n,o,r,a,s,u,m,c,p,b,h,d,k,_,S,f,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,a=e.v3,s=e.Label,u=e.sp,m=e.color,c=e.Tween,p=e.Color,b=e.math,h=e.tween,d=e.bezier,k=e.clamp01,_=e.Component},function(e){S=e.FormatNumber},function(e){f=e.SubGameData},function(e){A=e.AudioHelper}],execute:function(){var L,C,v,g,y,N,P,F,M,T,w,z,B,H;o._RF.push({},"ad219hVm5xKLJPhYHUgkVUd","PickingBanner",void 0);var E=r.ccclass,I=r.menu,D=r.property,U=a(-193,3,0),x=a(98,-5,0);e("PickingBanner",(L=E("PickingBanner"),C=I(f.module+"/elements/PickingBanner"),v=D(s),g=D(S),y=D(u.Skeleton),N=D(u.Skeleton),P=D(u.Skeleton),L(F=C((T=t((M=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,l(t,"multiplierLabel",T,n(t)),l(t,"scoreFormatNumber",w,n(t)),l(t,"multiplierSkeleton",z,n(t)),l(t,"scoreSkeleton",B,n(t)),l(t,"settlementSkeleton",H,n(t)),t._multiplier=1,t._score=0,t._mulitiplierAnimationCallback=void 0,t._scoreAnimationCallback=void 0,t._settlementAnimationCallback=void 0,t._cachedColor=m(),t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.multiplierSkeleton.setCompleteListener(this._onMultiplierSkeletonAnimationComplete.bind(this)),this.scoreSkeleton.setCompleteListener(this._onScoreSkeletonAnimationComplete.bind(this)),this.settlementSkeleton.setCompleteListener(this._onSettlementSkeletonAnimationComplete.bind(this)),this.reset()},o.reset=function(){this._multiplier=1,this._score=0,c.stopAllByTarget(this.multiplierLabel.node),this.multiplierLabel.node.position=U,this.multiplierLabel.string="",this.multiplierLabel.color=p.WHITE,this.scoreFormatNumber.updateNumber(0),this.multiplierSkeleton.enabled=!1,this.scoreSkeleton.enabled=!1,this.settlementSkeleton.enabled=!1},o.updateMultiplier=function(e,t,i){this._multiplier=Math.max(1,e),this._multiplier<=1?this.multiplierLabel.string="":this.multiplierLabel.string=this._multiplier+"X",t?(this._mulitiplierAnimationCallback=i,this.multiplierSkeleton.enabled=!0,this.multiplierSkeleton.setAnimation(0,"animation2",!1)):this.multiplierSkeleton.enabled=!1},o.updateScore=function(e,t,i){this._score=e,this.scoreFormatNumber.updateNumber(this._score),t?(this._scoreAnimationCallback=i,this.scoreSkeleton.enabled=!0,this.scoreSkeleton.setAnimation(0,"animation1",!1)):this.scoreSkeleton.enabled=!1},o.settle=function(e,t){var i=this;if(c.stopAllByTarget(this.multiplierLabel.node),this.multiplierLabel.node.position=U,this.multiplierLabel.color=p.WHITE,!e)return this.scoreFormatNumber.updateNumber(this._multiplier*this._score),void(this.settlementSkeleton.enabled=!1);this._settlementAnimationCallback=t,this._cachedColor.set(p.WHITE);var l=U.x,n=U.y,o=x.x,r=x.y,a=b.lerp(l,o,.25),s=n+.35*Math.abs(o-l),u=b.lerp(l,o,.75),m=s;h(this.multiplierLabel.node).delay(1.5).to(.5,{},{onStart:function(){return A.instance.playSoundEffect(f.AUDIO_URLS.SE_MAP_GAME_MULTIPLY)},onUpdate:function(e,t){if(null!=t){var c=d(l,a,u,o,t),p=d(n,s,m,r,t);i.multiplierLabel.node.setPosition(c,p,0);var h=k((1-t)/.5);i._cachedColor.a=b.lerp(63,255,h),i.multiplierLabel.color=i._cachedColor}}}).call((function(){i.multiplierLabel.node.position=U,i.multiplierLabel.string="",i.multiplierLabel.color=p.WHITE,i.scoreFormatNumber.updateNumber(i._multiplier*i._score),i.settlementSkeleton.enabled=!0,i.settlementSkeleton.setAnimation(0,"animation",!1)})).start()},o._onMultiplierSkeletonAnimationComplete=function(e){var t=this._mulitiplierAnimationCallback;this._mulitiplierAnimationCallback=void 0,null==t||t(this)},o._onScoreSkeletonAnimationComplete=function(e){var t=this._scoreAnimationCallback;this._scoreAnimationCallback=void 0,null==t||t(this)},o._onSettlementSkeletonAnimationComplete=function(e){var t=this._settlementAnimationCallback;this._settlementAnimationCallback=void 0,null==t||t(this)},t}(_)).prototype,"multiplierLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(M.prototype,"scoreFormatNumber",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(M.prototype,"multiplierSkeleton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(M.prototype,"scoreSkeleton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(M.prototype,"settlementSkeleton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=M))||F)||F));o._RF.pop()}}}));

System.register("chunks:///_virtual/Protocol19.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"f162f3VDFRFD6N1cCzrhbSM","Protocol",void 0);var o=t("Protocol",(function(){}));o.LOGIN="login",o.LOGOUT="logout",o.USERINFO="userinfo",o.USER_KICK="user_kick",o.ERRORCODE="errorcode",o.MARQUEE="marquee",o.TIPS="tips",o.DEBUG_LOGIN="debug_login",o.MARK="mark",o.SLOT_INFO="slot_info",o.GM_SPIN="gm_slot",o.BET_SPIN="slot",o.FREE_SPIN="free_spin",o.CHANGE_BET="slot_bet",o.PICK_JACKPOT_SYMBOL="slot_jackpot",o.PICK_MAP_ITEM="super_chose",o.LAST_MAP="last_map",o.COLLECT_JACKPOT="slot_bet_refresh";t("ReelData",(function(){this.col=0,this.icon=[]})),t("PageData",(function(){this.map=[],this.score=0,this.icons=[],this.tower_reward=[],this.tower_state=[],this.jackpot_open=[],this.jackpot_before=[],this.jackpot_after=[],this.jp_icon_add=0,this.jp_chose_add=0,this.add=0})),t("PaywayData",(function(){this.icon=0,this.col=0,this.num=0,this.mul=0,this.one_add=0})),t("FeatureData",(function(){this.id=0,this.state=0})),t("JackpotBonus",(function(){this.id=0,this.num=0})),t("MapItemData",(function(){this.item_id=0,this.num=0})),t("MapGameLevelData",(function(){this.pos=0,this.item_list=[]}));i._RF.pop()}}}));

System.register("chunks:///_virtual/ReelLayer3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./Symbol3.ts","./AudioHelper3.ts"],(function(e){var t,i,s,n,o,r,a,l,h,_,m,c,d,u,S,p,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,a=e._decorator,l=e.Prefab,h=e.Node,_=e.instantiate,m=e.easing,c=e.math},function(e){d=e.SubGameData},function(e){u=e.common},function(e){S=e.DisplayTaskManager,p=e.Display},function(e){y=e.Symbol},function(e){b=e.AudioHelper}],execute:function(){var f,g,N,I,T,v,E,P,R,C,L,O,x,B,A,D;r._RF.push({},"5ca4eJjI6VHs4BKe7ONMQT8","ReelLayer",void 0);var M=a.ccclass,Y=a.menu,F=a.property,G=function(e){return e[e.IDLE=0]="IDLE",e[e.ACCELERATING=1]="ACCELERATING",e[e.CONSTANT_SPINNING=2]="CONSTANT_SPINNING",e[e.DECELERATING=3]="DECELERATING",e[e.BOUNCING_OUT=4]="BOUNCING_OUT",e[e.BOUNCING_IN=5]="BOUNCING_IN",e}(G||{});e("ReelLayer",(f=M("ReelLayer"),g=Y(d.module+"/layers/ReelLayer"),N=F(l),I=F(h),T=F(h),v=F(h),E=F(h),P=F({visible:!0}),f(R=g((L=t((C=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,s(t,"symbolPrefab",L,n(t)),s(t,"externalSpinningSymbolsRootNode",O,n(t)),s(t,"externalSpinningScattersRootNode",x,n(t)),s(t,"externalShowingSymbolsRootNode",B,n(t)),s(t,"externalShowingScattersRootNode",A,n(t)),s(t,"_index",D,n(t)),t._featureType=u.EFeatureType.NONE,t._state=G.IDLE,t._spinSpeedType=u.ESpinSpeedType.DEFAULT,t._spinProcessConfig=d.SPIN_CONFIGURATION.default[0],t._elapsedTime=0,t._constantSpinningTimeout=0,t._targetSymbolInfos=null,t._manualStopping=!1,t._currentTargetIndex=-999,t._symbolNodes=[],t._symbolsNumberInReel=0,t._maxPositionYForPlace=0,t._minPositionYForPlace=0,t._maxPositionYForShow=0,t._minPositionYForShow=0,t}i(t,e);var r=t.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this),this._symbolsNumberInReel=d.getSymbolsNumberInReel(this._featureType);var t=d.MAX_SYMBOLS_NUMBER_IN_REEL+4;this._minPositionYForPlace=1.5*-d.SYMBOL_SIZE.height,this._maxPositionYForPlace=d.SYMBOL_SIZE.height*(t-2+.5),this._minPositionYForShow=1.5*-d.SYMBOL_SIZE.height,this._maxPositionYForShow=d.SYMBOL_SIZE.height*(this._symbolsNumberInReel+2-.5),this.externalSpinningSymbolsRootNode.removeAllChildren(),this.externalSpinningScattersRootNode.removeAllChildren(),this.externalShowingSymbolsRootNode.removeAllChildren(),this.externalShowingScattersRootNode.removeAllChildren();for(var i=0;i<t;++i){var s=_(this.symbolPrefab);this._symbolNodes.push(s)}},r.onDestroy=function(){this._symbolNodes.length=0,e.prototype.onDestroy.call(this)},r.reset=function(e,t){this.stopAllDisplays(),this._featureType=e,this._state=G.IDLE,this._spinSpeedType=u.ESpinSpeedType.DEFAULT,this._elapsedTime=0,this._constantSpinningTimeout=0,this._targetSymbolInfos=null,this._manualStopping=!1,this._symbolsNumberInReel=d.getSymbolsNumberInReel(e),this._maxPositionYForShow=d.SYMBOL_SIZE.height*(this._symbolsNumberInReel+2-.5);for(var i=this._symbolsNumberInReel+4-1;i>=0;--i){var s=i-2,n=this._getSymbolInfoFrom(t,s),o=s>=0&&s<this._symbolsNumberInReel,r=this._symbolNodes[i];r.setParent(this._inferSymbolParent(n.id,o)),r.setSiblingIndex(999);var a=r.getComponent(y);a&&(a.info=n,a.covered=!o)}for(var l=this._symbolNodes.length-1;l>=this._symbolsNumberInReel+4;--l){var h=this._symbolNodes[l],_=h.getComponent(y);if(!_)return;h.setParent(this._inferSymbolParent(_.info.id,!1))}var m=(e&u.EFeatureType.GREEN_TOWER)>0||(e&u.EFeatureType.BLUE_TOWER)>0;this._symbolNodes.forEach((function(e,t){e.setPosition(0,d.SYMBOL_SIZE.height*(t-2+.5),0);var i=e.getComponent(y);i&&(i.freeMode=m)}))},r.startSpinning=function(){this._state===G.IDLE&&this._beforeAccelerating()},r.stopSpinning=function(e,t){if(this._state!==G.ACCELERATING&&this._state!==G.CONSTANT_SPINNING)return 0;if(this.startDisplay(),this._constantSpinningTimeout=t,this._targetSymbolInfos=e,this._state===G.CONSTANT_SPINNING){var i=this._elapsedTime-this._spinProcessConfig.constant.duration;this._constantSpinningTimeout=Math.max(t,i)}return this._manualStopping&&this._jumpToBouncingInProcessing(),this._constantSpinningTimeout},r.manuallyStop=function(){this._manualStopping||this._spinSpeedType!==u.ESpinSpeedType.DEFAULT||this._state===G.IDLE||this._state===G.BOUNCING_IN||(this._manualStopping=!0,this._jumpToBouncingInProcessing())},r.update=function(e){if(this._state!==G.IDLE){var t=this._elapsedTime;switch(this._elapsedTime+=e,this._state){case G.ACCELERATING:var i,s,n=this._spinProcessConfig.acceleration,o=null!=(i=m[null!=(s=n.easing)?s:"linear"])?i:m.linear,r=0===n.duration?0:o(t/n.duration),a=0===n.duration?1:o(c.clamp01(this._elapsedTime/n.duration)),l=c.lerp(0,n.distance,r),h=c.lerp(0,n.distance,a);if(this._moveSymbols(h-l),this._elapsedTime>=n.duration){var _=this._elapsedTime-n.duration;this._afterAccelerating(),this._beforeConstantSpinning(),_>0&&this.update(_)}break;case G.CONSTANT_SPINNING:var d=this._spinProcessConfig.constant,u=0===d.duration?d.distance:d.distance/d.duration;this._moveSymbols(u*e),this._elapsedTime>=d.duration+this._constantSpinningTimeout&&this._targetSymbolInfos&&(this._afterConstantSpinning(),this._beforeDecelerating());break;case G.DECELERATING:var S,p,y=this._spinProcessConfig.deceleration,b=null!=(S=m[null!=(p=y.easing)?p:"linear"])?S:m.linear,f=0===y.duration?0:b(t/y.duration),g=0===y.duration?1:b(c.clamp01(this._elapsedTime/y.duration)),N=y.distance>0?Math.floor:Math.ceil,I=N(c.lerp(0,y.distance,f)),T=N(c.lerp(0,y.distance,g));if(this._moveSymbols(T-I),this._elapsedTime>=y.duration){var v=this._elapsedTime-y.duration;this._afterDecelerating(),this._beforeBouncingOut(),v>0&&this.update(v)}break;case G.BOUNCING_OUT:var E=this._spinProcessConfig.bounce,P=m.sineOut,R=0===E.duration?0:P(t/E.duration),C=0===E.duration?1:P(c.clamp01(this._elapsedTime/E.duration)),L=c.lerp(0,E.distance,R),O=c.lerp(0,E.distance,C);if(this._moveSymbols(O-L),this._elapsedTime>=E.duration){var x=this._elapsedTime-E.duration;this._afterBouncingOut(),this._beforeBouncingIn(),x>0&&this.update(x)}break;case G.BOUNCING_IN:var B=this._spinProcessConfig.bounce,A=m.sineIn,D=0===B.duration?0:A(t/B.duration),M=0===B.duration?1:A(c.clamp01(this._elapsedTime/B.duration)),Y=c.lerp(0,-B.distance,D),F=c.lerp(0,-B.distance,M);this._moveSymbols(F-Y),this._elapsedTime>=B.duration&&this._afterBouncingIn()}}},r._beforeAccelerating=function(){var e,t=this;this.startDisplay(),this._state=G.ACCELERATING,this._spinSpeedType=u.ESpinSpeedType.DEFAULT,this._elapsedTime=0,this._constantSpinningTimeout=0,this._targetSymbolInfos=null,this._manualStopping=!1;var i=d.SPIN_CONFIGURATION.default;(d.turboSpin||d.quickSpin)&&(this._spinSpeedType=u.ESpinSpeedType.FAST,i=d.SPIN_CONFIGURATION.fast),this._spinProcessConfig=null!=(e=i[this._index])?e:i[0],this.externalShowingSymbolsRootNode.children.slice().forEach((function(e){return e.setParent(t.externalSpinningSymbolsRootNode)})),this.externalShowingScattersRootNode.children.slice().forEach((function(e){return e.setParent(t.externalSpinningScattersRootNode)}))},r._afterAccelerating=function(){this.endDisplay()},r._beforeConstantSpinning=function(){this._state=G.CONSTANT_SPINNING,this._elapsedTime=0},r._afterConstantSpinning=function(){this._constantSpinningTimeout=0},r._beforeDecelerating=function(){this._state=G.DECELERATING,this._elapsedTime=0;var e=this._spinProcessConfig.deceleration,t=e.distance%d.SYMBOL_SIZE.height;if(this._sortSymbolNodes(),this._symbolNodes.forEach((function(e,t){return e.setPosition(0,d.SYMBOL_SIZE.height*(t-2+.5),0)})),e.distance>0){var i=Math.ceil(e.distance/d.SYMBOL_SIZE.height);if(i<this._symbolsNumberInReel+2+1){this._currentTargetIndex=i-2;for(var s=0;s<this._symbolsNumberInReel+2-i+1;++s){var n=this._symbolNodes[s];if(n){var o=this._currentTargetIndex++,r=this._getSymbolInfoFrom(this._targetSymbolInfos,o),a=this._inferSymbolParent(r.id,!1);n.setParent(a),n.setSiblingIndex(999);var l=n.getComponent(y);l&&(l.info=r,l.covered=!0)}}}else this._currentTargetIndex=i-2-1;0!==t&&this._moveSymbols(d.SYMBOL_SIZE.height-t)}else if(e.distance<0){var h=Math.ceil(-e.distance/d.SYMBOL_SIZE.height);if(h<this._symbolsNumberInReel+2+1){this._currentTargetIndex=-1;for(var _=h+2-1;_<this._symbolsNumberInReel+4;++_){var m=this._symbolNodes[_];if(m){var c=this._currentTargetIndex++,u=this._getSymbolInfoFrom(this._targetSymbolInfos,c),S=this._inferSymbolParent(u.id,!1);m.setParent(S),m.setSiblingIndex(0);var p=m.getComponent(y);p&&(p.info=u,p.covered=!0)}}}else this._currentTargetIndex=this._symbolsNumberInReel+2-h;0!==t&&this._moveSymbols(-d.SYMBOL_SIZE.height-t)}else for(var b=this._symbolsNumberInReel+2;b>=1;--b){var f=b-2,g=this._getSymbolInfoFrom(this._targetSymbolInfos,f),N=this._symbolNodes[b];N.setParent(this._inferSymbolParent(g.id,!1)),N.setSiblingIndex(999);var I=N.getComponent(y);I&&(I.info=g,I.covered=!0)}},r._afterDecelerating=function(){this.endDisplay()},r._beforeBouncingOut=function(){this.startDisplay(),this._state=G.BOUNCING_OUT,this._elapsedTime=0},r._afterBouncingOut=function(){},r._beforeBouncingIn=function(){this._state=G.BOUNCING_IN,this._elapsedTime=0,(this._spinSpeedType===u.ESpinSpeedType.DEFAULT&&!this._manualStopping||0===this._index)&&b.instance.playSoundEffect(d.AUDIO_URLS.SE_REEL_STOP)},r._afterBouncingIn=function(){var e;this._state=G.IDLE,this._elapsedTime=0,this._sortSymbolNodes();for(var t=d.SYMBOL_SIZE.height*this._symbolsNumberInReel,i=this._symbolNodes.length-1;i>=0;--i){var s,n,o=this._symbolNodes[i];if(!(o.position.y<=0||o.position.y>=t)){var r=null!=(s=null==(n=o.getComponent(y))?void 0:n.info.id)?s:0;o.setParent(this._inferSymbolParent(r,!0))}}this.endDisplay(),S.runTask("reelStop",{reelIndex:this._index,spinSpeedType:this._spinSpeedType,manualStop:this._manualStopping,symbolInfos:null!=(e=this._targetSymbolInfos)?e:[]}),this.externalShowingScattersRootNode.children.forEach((function(e){var t=e.getComponent(y);t&&(t.covered=!1)}))},r._jumpToBouncingInProcessing=function(){if(this._targetSymbolInfos){this._sortSymbolNodes();for(var e=this._symbolNodes.length-1;e>=0;--e){var t=e-2,i=this._getSymbolInfoFrom(this._targetSymbolInfos,t),s=this._symbolNodes[e];s.setParent(this._inferSymbolParent(i.id,!1)),s.setPosition(0,d.SYMBOL_SIZE.height*(t+.5),0),s.setSiblingIndex(999);var n=s.getComponent(y);n&&(n.info=i,n.covered=!0)}this._moveSymbols(this._spinProcessConfig.bounce.distance),this._beforeBouncingIn()}},r._moveSymbols=function(e){var t=this;if(!(0===e||this._symbolNodes.length<=0)){var i;if(e>0){for(var s=this._symbolNodes.length-1,n=0;n<this._symbolNodes.length&&!(this._symbolNodes[n].position.y>=this._minPositionYForShow);++n)s=n;var o=-this._clampInCycle(this._symbolNodes[s].position.y-.5*d.SYMBOL_SIZE.height,-d.SYMBOL_SIZE.height,0),r=0===o?Math.floor(e/d.SYMBOL_SIZE.height):Math.floor(1+(e-o)/d.SYMBOL_SIZE.height);if(r>0){if(r>this._symbolNodes.length){var a=r%this._symbolNodes.length-s-1;i=a>0?this._symbolNodes.slice(this._symbolNodes.length-a,this._symbolNodes.length).concat(this._symbolNodes.slice(0,this._symbolNodes.length-a)).reverse():this._symbolNodes.slice(-a,this._symbolNodes.length).concat(this._symbolNodes.slice(0,-a)).reverse(),this._state===G.DECELERATING&&(this._currentTargetIndex-=r-this._symbolNodes.length)}else{var l=r-s-1;i=l>0?this._symbolNodes.slice(this._symbolNodes.length-l,this._symbolNodes.length).slice(0,s+1).reverse():this._symbolNodes.slice(-l,s+1).reverse()}i.forEach((function(e){var i=t._state===G.DECELERATING?t._currentTargetIndex--:999,s=t._getSymbolInfoFrom(t._targetSymbolInfos,i);e.setParent(t._inferSymbolParent(s.id,!1)),e.setSiblingIndex(999);var n=e.getComponent(y);n&&(n.info=s,n.covered=!0)}))}}else{for(var h=0,_=this._symbolNodes.length-1;_>=0&&!(this._symbolNodes[_].position.y<=this._maxPositionYForShow);--_)h=_;var m=-this._clampInCycle(this._symbolNodes[h].position.y-.5*d.SYMBOL_SIZE.height,0,d.SYMBOL_SIZE.height),c=0===m?Math.floor(-e/d.SYMBOL_SIZE.height):Math.floor(1+(m-e)/d.SYMBOL_SIZE.height);if(c>0){if(c>this._symbolNodes.length){var u=c%this._symbolNodes.length,S=h+u-this._symbolNodes.length;i=S>0?this._symbolNodes.slice(S,h).concat(this._symbolNodes.slice(h,this._symbolNodes.length)).concat(this._symbolNodes.slice(0,S)):this._symbolNodes.slice(h+u,this._symbolNodes.length).concat(this._symbolNodes.slice(0,h+u)),this._state===G.DECELERATING&&(this._currentTargetIndex+=c-this._symbolNodes.length)}else{var p=h+c-this._symbolNodes.length;i=p>0?this._symbolNodes.slice(h,this._symbolNodes.length).concat(this._symbolNodes.slice(0,p)):this._symbolNodes.slice(h,h+c)}i.forEach((function(e){var i=t._state===G.DECELERATING?t._currentTargetIndex++:-999,s=t._getSymbolInfoFrom(t._targetSymbolInfos,i);e.setParent(t._inferSymbolParent(s.id,!1)),e.setSiblingIndex(0);var n=e.getComponent(y);n&&(n.info=s,n.covered=!0)}))}}var b=!1;this._symbolNodes.forEach((function(i){var s=i.position.y+e;(s<t._minPositionYForPlace||s>=t._maxPositionYForPlace)&&(b=!0,s=t._clampInCycle(s,t._minPositionYForPlace,t._maxPositionYForPlace)),i.setPosition(0,s,0)})),b&&this._sortSymbolNodes()}},r._sortSymbolNodes=function(){this._symbolNodes.sort((function(e,t){return e.position.y-t.position.y}))},r._clampInCycle=function(e,t,i){if(t===i)return e;var s=t,n=i;t>i&&(s=i,n=t);var o=n-s;return s+((e-s)%o+o)%o},r._inferSymbolParent=function(e,t){var i=d.isScatterSymbol(e);return t?i?this.externalShowingScattersRootNode:this.externalShowingSymbolsRootNode:i?this.externalSpinningScattersRootNode:this.externalSpinningSymbolsRootNode},r._getSymbolInfoFrom=function(e,t){var i;return-1===t||t===this._symbolsNumberInReel?d.generateRandomSymbol(this._featureType,!0):null!=(i=null==e?void 0:e[t])?i:d.generateRandomSymbol(this._featureType,!1)},o(t,[{key:"index",get:function(){return this._index}}]),t}(p)).prototype,"symbolPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(C.prototype,"externalSpinningSymbolsRootNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(C.prototype,"externalSpinningScattersRootNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(C.prototype,"externalShowingSymbolsRootNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(C.prototype,"externalShowingScattersRootNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(C.prototype,"_index",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),R=C))||R)||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/Resizer2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./CommonEvent.ts","./SubGameData18.ts","./ScreenHelper4.ts"],(function(e){var n,t,i,r,o,a,s,l,c,u,p,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Enum,l=e.UITransform},function(e){c=e.default},function(e){u=e.CommonEvent},function(e){p=e.SubGameData},function(e){h=e.ScreenHelper}],execute:function(){var f,d,O,R,m,A;o._RF.push({},"29d0ei2kYROOYJxtAW/ejDR","Resizer",void 0);var C=a.ccclass,E=a.menu,S=a.property,b=function(e){return e[e.NONE=0]="NONE",e[e.LANDSCAPE=1]="LANDSCAPE",e[e.PORTRAIT=2]="PORTRAIT",e[e.ALL=3]="ALL",e}(b||{});e("Resizer",(f=C("Resizer"),d=E(p.module+"/components/Resizer"),O=S({type:s(b)}),f(R=d((A=n((m=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"handleableOrientation",A,r(n)),n}t(n,e);var o=n.prototype;return o.onEnable=function(){this.onD(u.SWITCH_SCREEN,this._onOrientationChange),this._onOrientationChange(App.utils.getOrientation())},o.onDisable=function(){this.offD(u.SWITCH_SCREEN)},o._onOrientationChange=function(e){if(this.handleableOrientation===b.ALL||"landscape"===e&&this.handleableOrientation===b.LANDSCAPE||"portrait"===e&&this.handleableOrientation===b.PORTRAIT){var n,t=h.renderSize;null==(n=this.node.getComponent(l))||n.setContentSize(t.width,t.height)}},n}(c)).prototype,"handleableOrientation",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.NONE}}),R=m))||R)||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/ScatterAnimationLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./AnimatedSymbol2.ts","./AudioHelper3.ts","./AnimatedSymbolNodePool2.ts"],(function(e){var t,n,o,a,i,s,r,c,E,l,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,a=e.v3},function(e){i=e.SubGameData},function(e){s=e.common},function(e){r=e.DisplayTaskManager,c=e.Display},function(e){E=e.AnimatedSymbol},function(e){l=e.AudioHelper},function(e){u=e.AnimatedSymbolNodePool}],execute:function(){var y,f,p,_;n._RF.push({},"ea76dJiyn1BpIok89wbEv3G","ScatterAnimationLayer",void 0);var S=o.ccclass,h=o.menu,T=(o.property,a(211,588,0)),d=a(-255,588,0),m=((y={})[s.EFeatureType.NONE]=a(-23,605,0),y[s.EFeatureType.GREEN_TOWER]=a(-23,713,0),y[s.EFeatureType.BLUE_TOWER]=a(-21,800,0),y[s.EFeatureType.BLUE_AND_GREEN_TOWER]=a(-14,876,0),y[s.EFeatureType.RED_AND_GREEN_TOWER]=a(-23,713,0),y[s.EFeatureType.RED_AND_BLUE_TOWER]=a(-21,800,0),y[s.EFeatureType.SUPER_TOWER]=a(-14,876,0),y),A=((f={})[13]=T,f[14]=d,f[15]=m[s.EFeatureType.NONE],f[16]=m[s.EFeatureType.NONE],f[17]=m[s.EFeatureType.NONE],f[18]=m[s.EFeatureType.NONE],f[19]=m[s.EFeatureType.NONE],f),R=((p={})[15]=!0,p[16]=!0,p[17]=!0,p[18]=!0,p[19]=!0,p);e("ScatterAnimationLayer",S("ScatterAnimationLayer")(_=h(i.module+"/layers/ScatterAnimationLayer")(_=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this)._featureType=s.EFeatureType.NONE,t._shouldPlayScatterSoundEffect=!0,t._cachedPosition=a(),t}t(n,e);var o=n.prototype;return o.onLoad=function(){e.prototype.onLoad.call(this),r.addHandler(this)},o.onTaskInitialize=function(e,t){this.stopAllDisplays(),this._featureType=t.featureType,this._clearAllAnimations()},o.onTaskSpinStart=function(e,t){this._shouldPlayScatterSoundEffect=!0},o.onTaskFreeGameCollectScores=function(e,t){var n=this,o=!1;t.symbolsGroups.forEach((function(e,t){e.forEach((function(e,a){i.isScoreableSymbol(e.id)&&(o=n._highlightSymbol(e,t,a)||o)}))})),o&&l.instance.playSoundEffect(i.AUDIO_URLS.SE_SCATTER_HIGHLIGHT)},o.onTaskFreeGameCollectJackpot=function(e,t){this._highlightSymbol(t.symbolInfo,t.reelIndex,t.symbolIndex)&&l.instance.playSoundEffect(i.AUDIO_URLS.SE_SCATTER_HIGHLIGHT)},o.onTaskFreeGameCollectFreeTimes=function(e,t){var n=this,o=!1;t.symbolsWithFreeTimes.forEach((function(e){o=n._highlightSymbol(e.symbolInfo,e.reelIndex,e.symbolIndex)||o})),o&&(l.instance.playSoundEffect(i.AUDIO_URLS.SE_SCATTER_HIGHLIGHT),l.instance.playSoundEffect(i.AUDIO_URLS.SE_SCATTER_HIGHLIGHT_WITH_FREE_TIMES))},o.onTaskChangeGame=function(e,t){this.stopAllDisplays(),this._featureType=t.nextFeatureType,this._clearAllAnimations()},o.onTaskReelStop=function(e,t){var n=this,o=i.getSymbolsNumberInReel(this._featureType),a=t.symbolInfos.slice(0,o),r=s.EGameMode.NORMAL,c=void 0;if((this._featureType&s.EFeatureType.GREEN_TOWER)>0||(this._featureType&s.EFeatureType.BLUE_TOWER)>0?(r=s.EGameMode.FREE,c=function(e){if(R[e])return m[n._featureType]}):this._featureType===s.EFeatureType.NONE&&(r=s.EGameMode.NORMAL,c=function(e){return A[e]}),c){var y=t.spinSpeedType!==s.ESpinSpeedType.DEFAULT||t.manualStop;a.forEach((function(e,o){var a=c(e.id);if(a){var f=u.instance.pop();if(f){f.setPosition(n._getSymbolPosition(t.reelIndex,o)),f.setParent(n.node);var p=f.getComponent(E);if(p){var _="",S="";n._shouldPlayScatterSoundEffect&&(y&&(n._shouldPlayScatterSoundEffect=!1),_=r===s.EGameMode.FREE?i.AUDIO_URLS.SE_SCATTER_APPEAR_IN_FREE_GAME:i.AUDIO_URLS.SE_SCATTER_APPEAR_IN_NORMAL_GAME,S=i.AUDIO_URLS.SE_SCATTER_COLLECT),_&&l.instance.playOneShotSoundEffect(_),p.symbolID=e.id,p.score=e.score,p.freeMode=r===s.EGameMode.FREE;var h=p.collect(a,(function(e,t){switch(t){case"onMove":S&&l.instance.playOneShotSoundEffect(S);break;case"afterCollect":u.instance.push(e.node),r===s.EGameMode.FREE&&n.endDisplay()}}));r===s.EGameMode.FREE&&h&&n.startDisplay()}}}}))}},o._clearAllAnimations=function(){this.node.children.slice().forEach((function(e){return u.instance.push(e)}))},o._getSymbolPosition=function(e,t){return this._cachedPosition.set(i.SYMBOL_SIZE.width*(e-2),i.SYMBOL_SIZE.height*(t+.5),0),this._cachedPosition},o._highlightSymbol=function(e,t,n){var o=this,a=u.instance.pop();if(!a)return!1;a.setPosition(this._getSymbolPosition(t,n)),a.setParent(this.node);var i=a.getComponent(E);return!!i&&(i.symbolID=e.id,i.score=e.score,i.freeMode=!0,i.highlight((function(e){u.instance.push(e.node),o.endDisplay()}))&&this.startDisplay(),!0)},n}(c))||_)||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenHelper4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(e){var r,t,n,i;return{setters:[function(e){r=e.createClass},function(e){t=e.cclegacy,n=e.size},function(e){i=e.Global}],execute:function(){t._RF.push({},"f58dau/AMtECZeGwjg3jUdv","ScreenHelper",void 0),e("ScreenHelper",function(){function e(){}return r(e,null,[{key:"renderSize",get:function(){return"portrait"===App.utils.getOrientation()?this._renderSize.set(Math.min(i.real_screen_width,i.background_height),Math.min(i.real_screen_height,i.background_width)):this._renderSize.set(Math.min(i.real_screen_width,i.background_width),Math.min(i.real_screen_height,i.background_height)),this._renderSize}}]),e}())._renderSize=n(0,0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Shrinker3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts"],(function(e){var t,i,r,n,h,a,o,s,c,S,l,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,h=e.createClass},function(e){a=e.cclegacy,o=e._decorator,s=e.Size,c=e.Node,S=e.UITransform,l=e.Component,u=e.size},function(e){p=e.SubGameData}],execute:function(){var m,z,f,d,x,_,g,y;a._RF.push({},"b205azk2rFCJY7tGGconaQy","Shrinker",void 0);var v=o.ccclass,w=o.executeInEditMode,b=o.menu,D=o.property;e("Shrinker",(m=v("Shrinker"),z=b(p.module+"/components/Shrinker"),f=w(!0),d=D(s),x=D({serializable:!0}),m(_=z(_=f((t((g=function(e){function t(){for(var t,i=arguments.length,h=new Array(i),a=0;a<i;a++)h[a]=arguments[a];return t=e.call.apply(e,[this].concat(h))||this,r(t,"_maxSize",y,n(t)),t}i(t,e);var a=t.prototype;return a.onEnable=function(){this.node.on(c.EventType.SIZE_CHANGED,this._refreshScale,this),this._refreshScale()},a.onDisable=function(){this.node.off(c.EventType.SIZE_CHANGED,this._refreshScale,this)},a._refreshScale=function(){var e=this.getComponent(S);if(e){var t=1;this.maxSize.width>0&&e.contentSize.width>this.maxSize.width&&(t=this.maxSize.width/e.contentSize.width);var i=1;this.maxSize.height>0&&e.contentSize.height>this.maxSize.height&&(i=this.maxSize.height/e.contentSize.height);var r=Math.min(t,i);this.node.setScale(r,r,1)}},h(t,[{key:"maxSize",get:function(){return this._maxSize},set:function(e){e.width===this._maxSize.width&&e.height===this._maxSize.height||(this._maxSize.width=e.width,this._maxSize.height=e.height,this._refreshScale())}}]),t}(l)).prototype,"maxSize",[d],Object.getOwnPropertyDescriptor(g.prototype,"maxSize"),g.prototype),y=t(g.prototype,"_maxSize",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(0,0)}}),_=g))||_)||_)||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/slot390000012",["./BigWinDefines2.ts","./BigWinLayer7.ts","./GamePlay3.ts","./PageChange3.ts","./GameEntry18.ts","./GameLogic18.ts","./AutoFittableBackground3.ts","./DebugVersion3.ts","./ExBannerContentProvider3.ts","./LoadingInputBlocker2.ts","./Resizer2.ts","./Shrinker3.ts","./Sticker3.ts","./SubGameData18.ts","./SubGameDefines18.ts","./SubGameLanguage18.ts","./Defines3.ts","./Display3.ts","./AnimatedSymbol2.ts","./CountdownableButton.ts","./Jackpot3.ts","./JackpotLockHint.ts","./JackpotProgress.ts","./JackpotSymbol.ts","./JackpotUnlockHint.ts","./MapItem.ts","./PickingBanner.ts","./Stage.ts","./StageNormal.ts","./StageStart.ts","./StageSuper.ts","./Symbol3.ts","./Tower.ts","./AudioHelper3.ts","./LoadingHelper3.ts","./ScreenHelper4.ts","./BackgroundLayer3.ts","./BigWinControllerLayer3.ts","./BonusGameLayer.ts","./BonusGameTitleLayer.ts","./ControllerLayer3.ts","./FrameLayer.ts","./FreeGamePopupLayer.ts","./FreeTimesLayer2.ts","./JackpotWinningLayer.ts","./JackpotsLayer.ts","./MapGamePickingLayer.ts","./MapGamePopupLayer.ts","./MapGameSellingLayer.ts","./MapLayer.ts","./ParticlesLayer.ts","./PaywayLayer.ts","./ReelLayer3.ts","./ScatterAnimationLayer.ts","./SlotLayer3.ts","./TowersLayer.ts","./TransitionLayer2.ts","./GameHandler18.ts","./GameSender18.ts","./Protocol19.ts","./AnimatedSymbolNodePool2.ts","./SymbolNodePool3.ts","./BaseView3.ts","./IntroView3.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/SlotLayer3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommonEvent.ts","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./ReelLayer3.ts"],(function(e){var t,n,a,o,i,r,s,u,l,p,y,c,E,f,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.Animation,u=e.Node,l=e.sp},function(e){p=e.CommonEvent},function(e){y=e.SubGameData},function(e){c=e.common},function(e){E=e.DisplayTaskManager,f=e.Display},function(e){T=e.ReelLayer}],execute:function(){var h,m,S,d,L,R,_,b,v,F,D,g,N;i._RF.push({},"68d05xYla9PBpSw7YOPBOjv","SlotLayer",void 0);var G=r.ccclass,O=r.menu,k=r.property,M=((h={})[c.EFeatureType.NONE]="style-0",h[c.EFeatureType.GREEN_TOWER]="style-1",h[c.EFeatureType.BLUE_TOWER]="style-2",h[c.EFeatureType.BLUE_AND_GREEN_TOWER]="style-3",h[c.EFeatureType.RED_TOWER]="style-4",h[c.EFeatureType.RED_AND_GREEN_TOWER]="style-1",h[c.EFeatureType.RED_AND_BLUE_TOWER]="style-2",h[c.EFeatureType.SUPER_TOWER]="style-3",h);e("SlotLayer",(m=G("SlotLayer"),S=O(y.module+"/layers/SlotLayer"),d=k(s),L=k([T]),R=k(u),_=k(l.Skeleton),m(b=S((F=t((v=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"animation",F,o(t)),a(t,"reelLayersList",D,o(t)),a(t,"reelsRootNode",g,o(t)),a(t,"enteringSkeleton",N,o(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){e.prototype.onLoad.call(this),E.addHandler(this),this.reelsRootNode.on(u.EventType.TOUCH_END,this._onSlotTouchEnd,this)},i.onTaskInitialize=function(e,t){this.node.active=t.gameMode!==c.EGameMode.MAP&&t.gameMode!==c.EGameMode.SUPER_MAP,this.animation.play(M[t.featureType]),this.reelLayersList.forEach((function(e){e.reset(t.featureType,t.symbolsGroups[e.index])}))},i.onTaskSpinStart=function(e,t){var n;t.spinType===c.ESpinType.FREE&&(null==(n=y.spinRequestor)||n.request(c.ESpinRequestType.FREE_SPIN));this.reelLayersList.forEach((function(e){return e.startSpinning()}))},i.onTaskSpinStop=function(e,t){var n=0;this.reelLayersList.forEach((function(e){var a=e.stopSpinning(t.symbolsGroups[e.index],n);n=Math.max(n,a)}))},i.onTaskManualStop=function(e,t){this.reelLayersList.forEach((function(e){return e.manuallyStop()}))},i.onTaskChangeGame=function(e,t){t.previousFeatureType!==t.nextFeatureType&&(this.animation.play(M[t.nextFeatureType]),t.nextFeatureType!==c.EFeatureType.RED_TOWER&&this.reelLayersList.forEach((function(e){e.reset(t.nextFeatureType,t.previousSymbolsGroups[e.index])})))},i.onTaskShowMapGame=function(e,t){this.node.active=!1},i.onTaskHideMapGame=function(e,t){this.node.active=!0},i._onSlotTouchEnd=function(){dispatch(p.NOTIFY_CLICK_SPIN)},t}(f)).prototype,"animation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(v.prototype,"reelLayersList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(v.prototype,"reelsRootNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(v.prototype,"enteringSkeleton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b)||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Stage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,c,o;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){c=t.cclegacy,o=t.Component}],execute:function(){c._RF.push({},"7f859ZD6glCk5LIX80lVHlt","Stage",void 0);t("Stage",function(t){function c(){for(var e,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))||this)._completed=!1,e._callback=void 0,e}e(c,t);var o=c.prototype;return o.start=function(){this._refresh()},o.highlight=function(t){this._callback=t},o._refresh=function(){},n(c,[{key:"completed",set:function(t){t!==this._completed&&(this._completed=t,this._refresh())}}]),c}(o));c._RF.pop()}}}));

System.register("chunks:///_virtual/StageNormal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts","./Stage.ts"],(function(e){var t,i,n,o,r,a,l,p,s,c,u,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,l=e._decorator,p=e.Sprite,s=e.sp,c=e.Enum},function(e){u=e.SubGameData},function(e){h=e.common},function(e){m=e.Stage}],execute:function(){var y,g,f,S,_,b,E,d,k,D,v,T,A;a._RF.push({},"90553D5ArpCDZDEu4wy+CiZ","StageNormal",void 0);var L=l.ccclass,N=l.executeInEditMode,w=l.menu,C=l.property,F=((y={})[h.EStageType.GREEN]="theme277_map4",y[h.EStageType.BLUE]="theme277_map8",y[h.EStageType.PURPLE]="theme277_map12",y[h.EStageType.RED]="theme277_map16",y[h.EStageType.GOLD]="theme277_map20",y);e("StageNormal",(g=L("StageNormal"),f=w(u.module+"/elements/StageNormal"),S=N(!0),_=C(p),b=C(s.Skeleton),E=C({type:c(h.EStageType),visible:!0}),d=C({type:c(h.EStageType)}),g(k=f(k=S((v=t((D=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"sprite",v,o(t)),n(t,"skeleton",T,o(t)),n(t,"_type",A,o(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.skeleton.setCompleteListener(this._onSkeletonAnimationComplete.bind(this))},a.highlight=function(t){e.prototype.highlight.call(this,t),this.skeleton.enabled=!0,this.skeleton.setAnimation(0,"animation",!1)},a._refresh=function(){e.prototype._refresh.call(this),this._callback=void 0,this.skeleton.enabled=!1,this._completed?this.sprite.changeSpriteFrameFromAtlas("theme277_map3"):this.sprite.changeSpriteFrameFromAtlas(F[this._type])},a._onSkeletonAnimationComplete=function(e){this.skeleton.enabled=!1;var t=this._callback;this._callback=void 0,null==t||t(this)},r(t,[{key:"type",get:function(){return this._type},set:function(e){e!==this._type&&(this._type=e,this._refresh())}}]),t}(m)).prototype,"sprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(D.prototype,"skeleton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(D.prototype,"type",[E],Object.getOwnPropertyDescriptor(D.prototype,"type"),D.prototype),A=t(D.prototype,"_type",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.EStageType.GREEN}}),k=D))||k)||k)||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/StageStart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./Stage.ts"],(function(t){var e,n,r,a,i,o,s,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,s=t.sp},function(t){l=t.SubGameData},function(t){c=t.Stage}],execute:function(){var u,p,f,S,h,g;i._RF.push({},"97fc79J52RIi64aGj65RABz","StageStart",void 0);var m=o.ccclass,y=o.menu,_=o.property;t("StageStart",(u=m("StageStart"),p=y(l.module+"/elements/StageStart"),f=_(s.Skeleton),u(S=p((g=e((h=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,r(e,"skeleton",g,a(e)),e}return n(e,t),e.prototype._refresh=function(){t.prototype._refresh.call(this),this._completed?this.skeleton.setAnimation(0,"animation",!1):this.skeleton.setAnimation(0,"animation_1",!0)},e}(c)).prototype,"skeleton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=h))||S)||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/StageSuper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts","./Stage.ts"],(function(e){var t,i,n,a,o,r,l,p,s,c,u,y,m,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,l=e._decorator,p=e.Animation,s=e.sp,c=e.Node,u=e.Enum},function(e){y=e.SubGameData},function(e){m=e.common},function(e){h=e.Stage}],execute:function(){var b,f,g,d,S,_,T,v,D,E,N,k,I,C,L,w,z;r._RF.push({},"81663vpbOZKrIhQLedV3SDG","StageSuper",void 0);var A=l.ccclass,G=l.executeInEditMode,R=l.menu,P=l.property,O=((b={})[m.EStageType.GREEN]={clipName:"style-0",animationTypeID:1},b[m.EStageType.BLUE]={clipName:"style-1",animationTypeID:2},b[m.EStageType.PURPLE]={clipName:"style-2",animationTypeID:3},b[m.EStageType.RED]={clipName:"style-3",animationTypeID:4},b[m.EStageType.GOLD]={clipName:"style-4",animationTypeID:5},b);e("StageSuper",(f=A("StageSuper"),g=R(y.module+"/elements/StageSuper"),d=G(!0),S=P(p),_=P(s.Skeleton),T=P(c),v=P(c),D=P({type:u(m.EStageType),visible:!0}),E=P({type:u(m.EStageType)}),f(N=g(N=d((I=t((k=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"animation",I,a(t)),n(t,"skeleton",C,a(t)),n(t,"bannerTitleNode",L,a(t)),n(t,"bannerCompletedNode",w,a(t)),n(t,"_type",z,a(t)),t}i(t,e);var r=t.prototype;return r.onLoad=function(){this.skeleton.setCompleteListener(this._onSkeletonAnimationComplete.bind(this))},r.highlight=function(t){e.prototype.highlight.call(this,t);var i=O[this._type];this.skeleton.setAnimation(0,"animation"+i.animationTypeID+"_2",!1)},r._refresh=function(){e.prototype._refresh.call(this),this._callback=void 0;var t=O[this._type];this.animation.play(t.clipName),this._completed?(this.skeleton.setAnimation(0,"animation"+t.animationTypeID,!1),this.bannerTitleNode.active=!1,this.bannerCompletedNode.active=!0):(this.skeleton.setAnimation(0,"animation"+t.animationTypeID+"_1",!0),this.bannerTitleNode.active=!0,this.bannerCompletedNode.active=!1)},r._onSkeletonAnimationComplete=function(e){if(e.animation.name.endsWith("_2")){var t=this._callback;this._callback=void 0,null==t||t(this)}},o(t,[{key:"type",get:function(){return this._type},set:function(e){e!==this._type&&(this._type=e,this._refresh())}}]),t}(h)).prototype,"animation",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(k.prototype,"skeleton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(k.prototype,"bannerTitleNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(k.prototype,"bannerCompletedNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(k.prototype,"type",[D],Object.getOwnPropertyDescriptor(k.prototype,"type"),k.prototype),z=t(k.prototype,"_type",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.EStageType.GREEN}}),N=k))||N)||N)||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/Sticker3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Global.ts","./CommonEvent.ts","./SubGameData18.ts","./ScreenHelper4.ts"],(function(i){var t,o,n,e,s,r,a,h,l,c,g,_,P,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,n=i.initializerDefineProperty,e=i.assertThisInitialized,s=i.createClass},function(i){r=i.cclegacy,a=i._decorator,h=i.Enum,l=i.v3},function(i){c=i.default},function(i){g=i.Global},function(i){_=i.CommonEvent},function(i){P=i.SubGameData},function(i){d=i.ScreenHelper}],execute:function(){var u,p,y,f,O,T,z,S;r._RF.push({},"48a57N31vtKfr6Gtv9QJcHR","Sticker",void 0);var b=a.ccclass,v=a.executeInEditMode,k=a.menu,m=a.property,w=function(i){return i[i.TOP=0]="TOP",i[i.RIGHT=1]="RIGHT",i[i.BOTTOM=2]="BOTTOM",i[i.LEFT=3]="LEFT",i}(w||{});i("Sticker",(u=b("Sticker"),p=k(P.module+"/components/Sticker"),y=v(!0),f=m({type:h(w)}),O=m({type:h(w)}),u(T=p(T=y((t((z=function(i){function t(){for(var t,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=i.call.apply(i,[this].concat(s))||this,n(t,"_location",S,e(t)),t._originalPosition=l(),t}o(t,i);var r=t.prototype;return r.onLoad=function(){i.prototype.onLoad.call(this),this.onD(_.SWITCH_SCREEN,this._onOrientationChange),this._originalPosition.set(this.node.position)},r.onEnable=function(){var t;null==(t=i.prototype.onEnable)||t.call(this),this._onOrientationChange(App.utils.getOrientation())},r.updateOriginalPosition=function(i,t,o){i===this._originalPosition.x&&t===this._originalPosition.y&&o===this._originalPosition.z||(this._originalPosition.set(i,t,o),this._onOrientationChange(App.utils.getOrientation()))},r._onOrientationChange=function(i){if("portrait"===i)switch(this._location){case w.TOP:this.node.setPosition(this._originalPosition.x,this._originalPosition.y-.5*(g.design_width-d.renderSize.height),this._originalPosition.z);break;case w.RIGHT:this.node.setPosition(this._originalPosition.x-.5*(g.design_height-d.renderSize.width),this._originalPosition.y,this._originalPosition.z);break;case w.BOTTOM:this.node.setPosition(this._originalPosition.x,this._originalPosition.y+.5*(g.design_width-d.renderSize.height),this._originalPosition.z);break;case w.LEFT:this.node.setPosition(this._originalPosition.x+.5*(g.design_height-d.renderSize.width),this._originalPosition.y,this._originalPosition.z)}else switch(this._location){case w.TOP:this.node.setPosition(this._originalPosition.x,this._originalPosition.y-.5*(g.design_height-d.renderSize.height),this._originalPosition.z);break;case w.RIGHT:this.node.setPosition(this._originalPosition.x-.5*(g.design_width-d.renderSize.width),this._originalPosition.y,this._originalPosition.z);break;case w.BOTTOM:this.node.setPosition(this._originalPosition.x,this._originalPosition.y+.5*(g.design_height-d.renderSize.height),this._originalPosition.z);break;case w.LEFT:this.node.setPosition(this._originalPosition.x+.5*(g.design_width-d.renderSize.width),this._originalPosition.y,this._originalPosition.z)}},s(t,[{key:"location",get:function(){return this._location},set:function(i){i!==this._location&&(this._location=i,this._onOrientationChange(App.utils.getOrientation()))}}]),t}(c)).prototype,"location",[f],Object.getOwnPropertyDescriptor(z.prototype,"location"),z.prototype),S=t(z.prototype,"_location",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.TOP}}),T=z))||T)||T)||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/SubGameData18.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./GameData.ts","./SubGameDefines18.ts"],(function(_){var e,o,a,i,E,n,t,s;return{setters:[function(_){e=_.inheritsLoose,o=_.createClass},function(_){a=_.cclegacy,i=_.size,E=_.math},function(_){n=_.Global},function(_){t=_.GameData},function(_){s=_.common}],execute:function(){var u,T,c,S,d,r,O,l,R,I,A,p,M;a._RF.push({},"72e83e6p2hNpZGNuIOMSTK4","SubGameData",void 0);var P=_("SubGameData",function(_){function a(){return _.apply(this,arguments)||this}return e(a,_),a.setLoadingTaskProgress=function(_,e){this._loadingTasks[_]=Math.min(Math.max(0,e),1)},a.getRandomSymbolsPool=function(_,e){var o=this.RANDOM_SYMBOL_IDS_POOL_IN_NORMAL_GAME;return e?o=this.RANDOM_SYMBOL_IDS_POOL_WITHOUT_SCATTERS:((_&s.EFeatureType.GREEN_TOWER)>0||(_&s.EFeatureType.BLUE_TOWER)>0)&&(o=(_&s.EFeatureType.RED_TOWER)>0?this.RANDOM_SYMBOL_IDS_POOL_IN_FREE_GAME_WITH_JACKPOT:this.RANDOM_SYMBOL_IDS_POOL_IN_FREE_GAME_WITHOUT_JACKPOT),o},a.generateRandomSymbol=function(_,e){var o=this.getRandomSymbolsPool(_,e);return{id:o[E.randomRangeInt(0,o.length)],score:0}},a.generateRandomInitialSymbolsGroups=function(_){for(var e=_!==s.EFeatureType.NONE,o=this.getRandomSymbolsPool(_,e),a=this.getSymbolsNumberInReel(_),i=[],n=0;n<this.REELS_NUMBER;++n){var t=[];i.push(t);for(var u=0;u<a;++u)t.push({id:o[E.randomRangeInt(0,o.length)],score:0})}return i},a.isCollectableSymbol=function(_){var e;return null!=(e=this.COLLECTABLE_SYMBOL_FLAGS_HASH[_])&&e},a.isScatterSymbol=function(_){var e=this.SCATTER_SYMBOL_ID_TO_TOWER_TYPE[_];return null!=e},a.isScoreableSymbol=function(_){var e;return null!=(e=this.SCOREABLE_SYMBOL_FLAGS_HASH[_])&&e},a.getTowerTypeOnSymbol=function(_){return this.SCATTER_SYMBOL_ID_TO_TOWER_TYPE[_]},a.getFreeTimesOnSymbol=function(_){var e;return null!=(e=this.FREE_TIMES_ON_SCATTER_SYMBOL_HASH[_])?e:0},a.getJackpotTypeOnSymbol=function(_){return this.JACKPOT_TYPES_ON_SCATTER_SYMBOL_HASH[_]},a.getTowerType=function(_){var e;return null!=(e=this.TOWER_ID_FROM_SERVER_TO_TOWER_TYPE[_])?e:void 0},a.getFeatureType=function(_){var e=this,o=s.EFeatureType.NONE;return _.forEach((function(_){var a,i=e.getTowerType(_);null!=i&&(o|=null!=(a=e.getSingleFeatureTypeByTowerType(i))?a:s.EFeatureType.NONE)})),o},a.getSingleFeatureTypeByTowerType=function(_){return this.TOWER_TYPE_TO_SINGLE_FEATURE_TYPE[_]},a.getSymbolsNumberInReel=function(_){return this.SYMBOLS_NUMBERS_LIST_IN_REEL[_]},a.getJackpotType=function(_){return this.JACKPOT_ID_FROM_SERVER_TO_JACKPOT_TYPE[_]},a.getUpgradedJackpotType=function(_){return _===s.EJackpotType.DOUBLE_GRAND?_:_+1},a.getJackpotSymbolType=function(_){var e;return null!=(e=this.JACKPOT_SYMBOL_ID_FROM_SERVER_TO_CLIENT[null!=_?_:-1])?e:s.EJackpotSymbolType.UNKNOWN},a.getJackpotTypeFromJackpotSymbolType=function(_){return this.JACKPOT_SYMBOL_TYPE_TO_JACKPOT_TYPE[_]},a.isJackpotLocked=function(_,e){var o,i=Math.max(0,e?_+1:_);if(n.playback)return 1===(null!=(o=this.jackpotsLockedStatesWhenPlayBack[i])?o:this.jackpotsLockedStatesWhenPlayBack[this.jackpotsLockedStatesWhenPlayBack.length-1]);if(!a.isJackpotsLockable)return!1;var E=Math.floor(a.slotInfo.bet.length/4),t=a.slotInfo.bet.indexOf(a.totalBet);return i>Math.max(1,Math.floor(t/E))},a.getMapStageInfo=function(_){var e=Math.ceil(_/5),o=this.MAP_STAGE_GROUP_ID_TO_TYPE_HASH[e];if(null==o)return{type:void 0,super:!1,indexInGroup:0};var a=_%5;return 0===a?{type:o,super:!0,indexInGroup:5}:{type:o,super:!1,indexInGroup:a}},o(a,null,[{key:"loadingProgress",get:function(){var _=0,e=0;for(var o in this._loadingTasks){var a=o;_+=this._loadingTasks[a],++e}return _/e}}]),a}(t));P.module="slot390000012",P.INITIAL_SYMBOLS_GROUPS=[[{id:2,score:0},{id:2,score:0},{id:2,score:0}],[{id:4,score:0},{id:3,score:0},{id:4,score:0}],[{id:1,score:0},{id:1,score:0},{id:1,score:0}],[{id:4,score:0},{id:3,score:0},{id:4,score:0}],[{id:2,score:0},{id:2,score:0},{id:2,score:0}]],P.JACKPOT_SCORE_CONFIGURATIONS=((u={})[s.EJackpotType.MINI]={maxMultiple:10,startingMultiple:5,multipleIncreaseRate:.004},u[s.EJackpotType.MINOR]={maxMultiple:16,startingMultiple:10,multipleIncreaseRate:.002},u[s.EJackpotType.MAJOR]={maxMultiple:95,startingMultiple:50,multipleIncreaseRate:.001},u[s.EJackpotType.GRAND]={maxMultiple:830,startingMultiple:500,multipleIncreaseRate:15e-5},u[s.EJackpotType.DOUBLE_GRAND]={maxMultiple:1660,startingMultiple:1e3,multipleIncreaseRate:15e-5},u),P.INITIAL_FREE_TIMES=6,P.REELS_NUMBER=5,P.SYMBOLS_NUMBERS_LIST_IN_REEL=((T={})[s.EFeatureType.NONE]=3,T[s.EFeatureType.GREEN_TOWER]=4,T[s.EFeatureType.BLUE_TOWER]=5,T[s.EFeatureType.BLUE_AND_GREEN_TOWER]=6,T[s.EFeatureType.RED_TOWER]=3,T[s.EFeatureType.RED_AND_GREEN_TOWER]=4,T[s.EFeatureType.RED_AND_BLUE_TOWER]=5,T[s.EFeatureType.SUPER_TOWER]=6,T),P.MAX_SYMBOLS_NUMBER_IN_REEL=6,P.SYMBOL_SIZE=i(134,130),P.SPIN_CONFIGURATION={default:[{acceleration:{duration:.066667,distance:-65,easing:"sineIn"},constant:{duration:.5,distance:-1170},deceleration:{duration:.7,distance:-1365,easing:"linear"},bounce:{duration:.1,distance:-35}},{acceleration:{duration:.066667,distance:-65,easing:"sineIn"},constant:{duration:.666667,distance:-1495},deceleration:{duration:.7,distance:-1365,easing:"linear"},bounce:{duration:.1,distance:-35}},{acceleration:{duration:.066667,distance:-65,easing:"sineIn"},constant:{duration:.8333333,distance:-1820},deceleration:{duration:.7,distance:-1365,easing:"linear"},bounce:{duration:.1,distance:-35}},{acceleration:{duration:.066667,distance:-65,easing:"sineIn"},constant:{duration:1,distance:-2145},deceleration:{duration:.7,distance:-1365,easing:"linear"},bounce:{duration:.1,distance:-35}},{acceleration:{duration:.066667,distance:-65,easing:"sineIn"},constant:{duration:1.1666667,distance:-2470},deceleration:{duration:.7,distance:-1365,easing:"linear"},bounce:{duration:.1,distance:-35}}],fast:[{acceleration:{duration:.0833333,distance:-90,easing:"sineIn"},constant:{duration:.6,distance:-1210},deceleration:{duration:0,distance:0,easing:"sineOut"},bounce:{duration:.083333,distance:-35}},{acceleration:{duration:.0833333,distance:-90,easing:"sineIn"},constant:{duration:.6,distance:-1210},deceleration:{duration:0,distance:0,easing:"sineOut"},bounce:{duration:.083333,distance:-35}},{acceleration:{duration:.0833333,distance:-90,easing:"sineIn"},constant:{duration:.6,distance:-1210},deceleration:{duration:0,distance:0,easing:"sineOut"},bounce:{duration:.083333,distance:-35}},{acceleration:{duration:.0833333,distance:-90,easing:"sineIn"},constant:{duration:.6,distance:-1210},deceleration:{duration:0,distance:0,easing:"sineOut"},bounce:{duration:.083333,distance:-35}},{acceleration:{duration:.0833333,distance:-90,easing:"sineIn"},constant:{duration:.6,distance:-1210},deceleration:{duration:0,distance:0,easing:"sineOut"},bounce:{duration:.083333,distance:-35}}]},P.SYMBOL_IDS=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],P.WILD_SYMBOL_ID=12,P.RANDOM_SYMBOL_IDS_POOL_WITHOUT_SCATTERS=[1,2,3,4,5,6,7,8,9,10,11,12],P.RANDOM_SYMBOL_IDS_POOL_IN_NORMAL_GAME=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],P.RANDOM_SYMBOL_IDS_POOL_IN_FREE_GAME_WITHOUT_JACKPOT=[1,2,3,4,5,6,7,8,9,10,11,12,16,17],P.RANDOM_SYMBOL_IDS_POOL_IN_FREE_GAME_WITH_JACKPOT=[1,2,3,4,5,6,7,8,9,10,11,12,16,17,18,19],P.COLLECTABLE_SYMBOL_FLAGS_HASH=((c={})[1]=!0,c),P.SCOREABLE_SYMBOL_FLAGS_HASH=((S={})[15]=!0,S),P.FREE_TIMES_ON_SCATTER_SYMBOL_HASH=((d={})[16]=1,d[17]=2,d),P.JACKPOT_TYPES_ON_SCATTER_SYMBOL_HASH=((r={})[18]=s.EJackpotType.MINI,r[19]=s.EJackpotType.MINOR,r),P.SCATTER_SYMBOL_ID_TO_TOWER_TYPE=((O={})[13]=s.ETowerType.GREEN,O[14]=s.ETowerType.BLUE,O[15]=s.ETowerType.RED,O[16]=s.ETowerType.RED,O[17]=s.ETowerType.RED,O[18]=s.ETowerType.RED,O[19]=s.ETowerType.RED,O),P.TOWER_ID_FROM_SERVER_TO_TOWER_TYPE=((l={})[1]=s.ETowerType.GREEN,l[2]=s.ETowerType.BLUE,l[3]=s.ETowerType.RED,l),P.TOWER_TYPE_TO_SINGLE_FEATURE_TYPE=((R={})[s.ETowerType.GREEN]=s.EFeatureType.GREEN_TOWER,R[s.ETowerType.BLUE]=s.EFeatureType.BLUE_TOWER,R[s.ETowerType.RED]=s.EFeatureType.RED_TOWER,R),P.JACKPOT_ID_FROM_SERVER_TO_JACKPOT_TYPE=((I={})[1]=s.EJackpotType.MINI,I[2]=s.EJackpotType.MINOR,I[3]=s.EJackpotType.MAJOR,I[4]=s.EJackpotType.GRAND,I[5]=s.EJackpotType.DOUBLE_GRAND,I),P.JACKPOT_SYMBOL_ID_FROM_SERVER_TO_CLIENT=((A={})[1]=s.EJackpotSymbolType.MINI,A[2]=s.EJackpotSymbolType.MINOR,A[3]=s.EJackpotSymbolType.MAJOR,A[4]=s.EJackpotSymbolType.GRAND,A[5]=s.EJackpotSymbolType.BOOST,A),P.JACKPOT_SYMBOL_TYPE_TO_JACKPOT_TYPE=((p={})[s.EJackpotSymbolType.UNKNOWN]=void 0,p[s.EJackpotSymbolType.MINI]=s.EJackpotType.MINI,p[s.EJackpotSymbolType.MINOR]=s.EJackpotType.MINOR,p[s.EJackpotSymbolType.MAJOR]=s.EJackpotType.MAJOR,p[s.EJackpotSymbolType.GRAND]=s.EJackpotType.GRAND,p[s.EJackpotSymbolType.BOOST]=void 0,p),P.MAP_STAGES_NUMBER=26,P.MAP_STAGE_GROUP_ID_TO_TYPE_HASH=((M={})[1]=s.EStageType.GREEN,M[2]=s.EStageType.BLUE,M[3]=s.EStageType.PURPLE,M[4]=s.EStageType.RED,M[5]=s.EStageType.GOLD,M),P.AUDIO_URLS={BGM_NORMAL_GAME:"audios/base_bgm",BGM_BONUS_GAME:"audios/pick_bgm",BGM_FREE_GAME:"audios/free_bgm",BGM_SUPER_FREE_GAME:"audios/superfree_bgm",BGM_MAP_GAME:"audios/map_bgm",SE_BIG_WIN_BIG:"commonmodule/bigwin/audio/sound_big_win_01",SE_BIG_WIN_SUPER:"commonmodule/bigwin/audio/sound_super_win_01",SE_BIG_WIN_EPIC:"commonmodule/bigwin/audio/sound_epic_win_01",SE_BIG_WIN_MEGA:"commonmodule/bigwin/audio/sound_mega_win_01",SE_BIG_WIN_ULTIMATE:"commonmodule/bigwin/audio/sound_ultimate_win_01",SE_BIG_WIN_EXIT_BIG:"commonmodule/bigwin/audio/sound_big_win_02",SE_BIG_WIN_EXIT_SUPER:"commonmodule/bigwin/audio/sound_super_win_02",SE_BIG_WIN_EXIT_EPIC:"commonmodule/bigwin/audio/sound_epic_win_02",SE_BIG_WIN_EXIT_MEGA:"commonmodule/bigwin/audio/sound_mega_win_02",SE_BIG_WIN_EXIT_ULTIMATE:"commonmodule/bigwin/audio/sound_ultimate_win_02",SE_BIG_WIN_END_BIG:"commonmodule/bigwin/audio/sound_big_win_03",SE_BIG_WIN_END_SUPER:"commonmodule/bigwin/audio/sound_super_win_03",SE_BIG_WIN_END_EPIC:"commonmodule/bigwin/audio/sound_epic_win_03",SE_BIG_WIN_END_MEGA:"commonmodule/bigwin/audio/sound_mega_win_03",SE_BIG_WIN_END_ULTIMATE:"commonmodule/bigwin/audio/sound_ultimate_win_03",SE_BIG_WIN_SPEECH_BIG:"commonmodule/bigwin/audio/big",SE_BIG_WIN_SPEECH_SUPER:"commonmodule/bigwin/audio/super",SE_BIG_WIN_SPEECH_EPIC:"commonmodule/bigwin/audio/epic",SE_BIG_WIN_SPEECH_MEGA:"commonmodule/bigwin/audio/mega",SE_BIG_WIN_SPEECH_ULTIMATE:"commonmodule/bigwin/audio/ultimate",SE_COMMON_BUTTON_CLICK:"audios/click",SE_COMMON_POPUP_HIDE:"audios/popup_out",SE_REEL_STOP:"audios/reel_stop",SE_SCATTER_APPEAR_IN_NORMAL_GAME:"audios/symbol_goldscatter",SE_SCATTER_APPEAR_IN_FREE_GAME:"audios/symbol_redscatter",SE_SCATTER_COLLECT:"audios/scatter_fly",SE_SCATTER_HIGHLIGHT:"audios/win_scatter",SE_SCATTER_HIGHLIGHT_WITH_FREE_TIMES:"audios/free_retrigger",SE_WIN_SCORE:"audios/win1end",SE_WIN_BIG_SCORE:"audios/win2end",SE_TOWER_BURST:"audios/tower_full",SE_TOWER_INCREASE_FORM_0_TO_1:"audios/tower0_1",SE_TOWER_INCREASE_FORM_0_TO_3:"audios/tower0_3",SE_TOWER_INCREASE_FORM_1_TO_2:"audios/tower1_2",SE_TOWER_INCREASE_FORM_1_TO_3:"audios/tower1_3",SE_TOWER_INCREASE_FORM_2_TO_3:"audios/tower2_3",SE_COLLECTION_COLLECT:"audios/collect_fly",SE_COLLECTION_FULL:"audios/collect_full",SE_JACKPOT_LOCK:"audios/jp_lock",SE_JACKPOT_UNLOCK:"audios/jp_unlock",SE_MAP_SHOW:"audios/map_open",SE_MAP_HIDE:"audios/map_close",SE_MAP_MOVE_CUSOR:"audios/pass1",SE_MAP_STAGE_HIGHLIGHT:"audios/pass2",SE_MAP_SUPER_STAGE_HIGHLIGHT:"audios/pass3",SE_BONUS_GAME_PICK_JACKPOT_SYMBOL:"audios/coin_click",SE_BONUS_GAME_PICK_JACKPOT_SYMBOL_CRITICALLY:"audios/coin_click2",SE_BONUS_GAME_PICK_BOOST_SYMBOL:"audios/coin_click3",SE_BONUS_GAME_PICK_BOOST_SYMBOL_CRITICALLY:"audios/coin_click4",SE_BONUS_GAME_UPGRADE:"audios/coin_upgrade",SE_BONUS_GAME_COLLECT_ALL:"audios/coin_win",SE_BONUS_GAME_SPEECH_UPGRADE:"audios/jp_upgrade",SE_BONUS_GAME_SPEECH_BIG_PRIZE_AHEAD:"audios/go_on",SE_MAP_GAME_TRUCK_RUN:"audios/car_move",SE_MAP_GAME_BONUS_APPEAR:"audios/coin_appear",SE_MAP_GAME_BONUS_COLLECT:"audios/coin_fly",SE_MAP_GAME_HIGHLIGHT_MOVE:"audios/move",SE_MAP_GAME_PICK:"audios/diamond_click",SE_MAP_GAME_SCORE_COLLECT:"audios/coin_collect",SE_MAP_GAME_MULTIPLIER_COLLECT:"audios/mul_collect",SE_MAP_GAME_MULTIPLY:"audios/coin_win",SE_MAP_GAME_SPEECH_NORMAL_1:"audios/voice1",SE_MAP_GAME_SPEECH_NORMAL_2:"audios/voice2",SE_MAP_GAME_SPEECH_SUPER_1:"audios/voice_win",SE_MAP_GAME_SPEECH_SUPER_2:"audios/voice_win2",SE_MAP_GAME_SPEECH_SUPER_3:"audios/voice_win3",SE_TRANSITION_BONUS_GAME:"audios/transition_pick",SE_TRANSITION_FREE_GAME:"audios/transition_free",SE_TRANSITION_MAP_GAME:"audios/transition_map",SE_POPUP_BONUS_GAME_START:"audios/pick_dialog_start_show",SE_POPUP_FREE_GAME_START:"audios/free_dialog_start_show",SE_POPUP_SUPER_FREE_GAME_START:"audios/superfree_dialog_start_show",SE_POPUP_FREE_GAME_SETTLE:"audios/free_dialog_collect_show",SE_POPUP_MAP_GAME_SETTLE:"audios/smap_dialog_collect_show",SE_POPUP_SUPER_MAP_GAME_SETTLE:"audios/bmap_dialog_collect_show",SE_POPUP_JACKPOT_MINI_UNLOCKED:"audios/mini_dialog_collect_show",SE_POPUP_JACKPOT_MINI_LOCKED:"audios/mini_dialog_collect_show1",SE_POPUP_JACKPOT_MINOR_UNLOCKED:"audios/minor_dialog_collect_show",SE_POPUP_JACKPOT_MINOR_LOCKED:"audios/minor_dialog_collect_show1",SE_POPUP_JACKPOT_MAJOR_UNLOCKED:"audios/major_dialog_collect_show",SE_POPUP_JACKPOT_MAJOR_LOCKED:"audios/major_dialog_collect_show1",SE_POPUP_JACKPOT_GRAND_UNLOCKED:"audios/grand_dialog_collect_show",SE_POPUP_JACKPOT_GRAND_LOCKED:"audios/grand_dialog_collect_show1",SE_POPUP_JACKPOT_DOUBLE_GRAND_UNLOCKED:"audios/doublegrand_dialog_collect_show",SE_POPUP_JACKPOT_DOUBLE_GRAND_LOCKED:"audios/doublegrand_dialog_collect_show1"},P.spinRequestor=null,P.slotInfo=null,P.lastMap=null,P.lastMapTimestamp=0,P.spinTimestamp=0,P.changeBetTimestamp=0,P.changeBetRequestTypesQueue=[],P.currentChangeBetType=s.EChangeBetRequestType.CHANGE_BET,P.balance=0,P.totalBet=0,P.anteBetEnabled=!1,P.autoPlaying=!1,P.quickSpin=!1,P.turboSpin=!1,P.skipScreens=!0,P.gmEnabled=!1,P.isJackpotsLockable=!1,P.jackpotsLockedStatesWhenPlayBack=[],P._loadingTasks={resource:0,network:0,preloadSymbol:0,preloadAnimatedSymbol:0},a._RF.pop()}}}));

System.register("chunks:///_virtual/SubGameDefines18.ts",["cc"],(function(E){var R;return{setters:[function(E){R=E.cclegacy}],execute:function(){var N;E("common",void 0),R._RF.push({},"71a46OwRdZFEIer6zh08x+7","SubGameDefines",void 0),function(E){var R=function(E){return E[E.NORMAL=0]="NORMAL",E[E.BONUS=1]="BONUS",E[E.FREE=2]="FREE",E[E.MAP=3]="MAP",E[E.SUPER_MAP=4]="SUPER_MAP",E}({});E.EGameMode=R;var N=function(E){return E[E.GM_SPIN=0]="GM_SPIN",E[E.SPIN=1]="SPIN",E[E.FREE_SPIN=2]="FREE_SPIN",E[E.PICK_JACKPOT_SYMBOL=3]="PICK_JACKPOT_SYMBOL",E}({});E.ESpinRequestType=N;var e=function(E){return E[E.CHANGE_BET=0]="CHANGE_BET",E[E.SYNCHRONISE_JACKPOTS=1]="SYNCHRONISE_JACKPOTS",E}({});E.EChangeBetRequestType=e;var n=function(E){return E[E.BET=0]="BET",E[E.FREE=1]="FREE",E}({});E.ESpinType=n;var O=function(E){return E[E.DEFAULT=0]="DEFAULT",E[E.FAST=1]="FAST",E}({});E.ESpinSpeedType=O;var _=function(E){return E[E.NONE=0]="NONE",E[E.GREEN_TOWER=1]="GREEN_TOWER",E[E.BLUE_TOWER=2]="BLUE_TOWER",E[E.BLUE_AND_GREEN_TOWER=3]="BLUE_AND_GREEN_TOWER",E[E.RED_TOWER=4]="RED_TOWER",E[E.RED_AND_GREEN_TOWER=5]="RED_AND_GREEN_TOWER",E[E.RED_AND_BLUE_TOWER=6]="RED_AND_BLUE_TOWER",E[E.SUPER_TOWER=7]="SUPER_TOWER",E}({});E.EFeatureType=_;var r=function(E){return E[E.BLUE=1]="BLUE",E[E.RED=2]="RED",E[E.GREEN=3]="GREEN",E}({});E.ETowerType=r;var t=function(E){return E[E.MINI=0]="MINI",E[E.MINOR=1]="MINOR",E[E.MAJOR=2]="MAJOR",E[E.GRAND=3]="GRAND",E[E.DOUBLE_GRAND=4]="DOUBLE_GRAND",E}({});E.EJackpotType=t;var T=function(E){return E[E.UNKNOWN=0]="UNKNOWN",E[E.MINI=1]="MINI",E[E.MINOR=2]="MINOR",E[E.MAJOR=3]="MAJOR",E[E.GRAND=4]="GRAND",E[E.BOOST=5]="BOOST",E}({});E.EJackpotSymbolType=T;var u=function(E){return E[E.GREEN=0]="GREEN",E[E.BLUE=1]="BLUE",E[E.PURPLE=2]="PURPLE",E[E.RED=3]="RED",E[E.GOLD=4]="GOLD",E}({});E.EStageType=u;var S=function(E){return E[E.MULTIPLIER=1]="MULTIPLIER",E[E.SCORE=2]="SCORE",E[E.END=3]="END",E[E.WIN_ALL=4]="WIN_ALL",E}({});E.EMapItem=S}(N||(N=E("common",{}))),R._RF.pop()}}}));

System.register("chunks:///_virtual/SubGameLanguage18.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageDelegate.ts","./Enums.ts","./SubGameData18.ts"],(function(a){var e,n,t,u,g,r;return{setters:[function(a){e=a.inheritsLoose},function(a){n=a.cclegacy},function(a){t=a.injectLanguageData,u=a.LanguageDelegate},function(a){g=a.sys_Language},function(a){r=a.SubGameData}],execute:function(){var i;n._RF.push({},"51b74rhj2RH3pEDTdGHpaKX","SubGameLanguage",void 0);var o={language:g.CHINESE,data:{}},c={language:g.ENGLISH,data:{}},l={language:g.Indonesian,data:{}},s={language:g.Malay,data:{}},d={language:g.Portuguese,data:{}},f={language:g.Thai,data:{}},p={language:g.Vietnamese,data:{}};a("SubGameLanguage",t(i=function(a){function n(){for(var e,n=arguments.length,t=new Array(n),u=0;u<n;u++)t[u]=arguments[u];return(e=a.call.apply(a,[this].concat(t))||this).bundle=r.module,e}return e(n,a),n.prototype.init=function(){var a=this;[o,c,l,s,d,f,p].forEach((function(e){return a.add(e)}))},n}(u))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/Symbol3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NumberCurrency.ts","./SubGameData18.ts"],(function(e){var t,r,i,s,o,n,_,h,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized,o=e.createClass},function(e){n=e.cclegacy,_=e._decorator,h=e.Sprite,c=e.Component},function(e){u=e.NumberCurrency},function(e){l=e.SubGameData}],execute:function(){var m,a,f,p,b,d,y,S,v,g;n._RF.push({},"b4618BBRSJGLpq6qOhdSOmV","Symbol",void 0);var F=_.ccclass,C=_.menu,N=_.property,M={1:"theme277_s_12",2:"theme277_s_13",3:"theme277_s_14",4:"theme277_s_15",5:"theme277_s_16",6:"theme277_s_6",7:"theme277_s_7",8:"theme277_s_8",9:"theme277_s_9",10:"theme277_s_10",11:"theme277_s_11",12:"theme277_s_1",13:"theme277_s_19",14:"theme277_s_18",15:"theme277_s_17",16:"theme277_s_17",17:"theme277_s_17",18:"theme277_s_17",19:"theme277_s_17"},z={13:"theme277_s_20",14:"theme277_s_20",15:"theme277_s_20"},A={16:"theme277_s_r301",17:"theme277_s_r302",18:"theme277_s_r304",19:"theme277_s_r303"};e("Symbol",(m=F("Symbol"),a=C(l.module+"/elements/Symbol"),f=N(h),p=N(h),b=N(u),m(d=a((S=t((y=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,i(t,"symbolSprite",S,s(t)),i(t,"bonusSprite",v,s(t)),i(t,"scoreNumberCurrency",g,s(t)),t._info={id:0,score:0},t._covered=!0,t._freeMode=!1,t}r(t,e);var n=t.prototype;return n.onLoad=function(){this._refresh()},n._refresh=function(){var e;if(this._covered){var t,r,i;if(this._freeMode)this.symbolSprite.changeSpriteFrameFromAtlas(null!=(t=M[this._info.id])?t:"");else this.symbolSprite.changeSpriteFrameFromAtlas(null!=(r=null!=(i=z[this._info.id])?i:M[this._info.id])?r:"");this.bonusSprite.node.active=!1,this.scoreNumberCurrency.node.parent.active=!1}else{var s;this.symbolSprite.changeSpriteFrameFromAtlas(null!=(s=M[this._info.id])?s:""),this.bonusSprite.node.active=!0,this.scoreNumberCurrency.node.parent.active=this._freeMode&&l.isScoreableSymbol(this._info.id)}this.bonusSprite.changeSpriteFrameFromAtlas(null!=(e=A[this._info.id])?e:""),this.scoreNumberCurrency.updateNumber(this._info.score)},o(t,[{key:"info",get:function(){return this._info},set:function(e){e.id===this._info.id&&e.score===this._info.score||(this._info.id=e.id,this._info.score=e.score,this._refresh())}},{key:"covered",set:function(e){e!==this._covered&&(this._covered=e,this._refresh())}},{key:"freeMode",set:function(e){e!==this._freeMode&&(this._freeMode=e,this._refresh())}}]),t}(c)).prototype,"symbolSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"bonusSprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"scoreNumberCurrency",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d)||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/SymbolNodePool3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./Symbol3.ts"],(function(e){var t,n,a,o,r,i,l,s;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,r=e.instantiate,i=e.Prefab},function(e){l=e.SubGameData},function(e){s=e.Symbol}],execute:function(){o._RF.push({},"9b3c1IDvz5GIZoiJ6Vdy9yl","SymbolNodePool",void 0),e("SymbolNodePool",function(){function e(){this._prefab=null,this._pool=[],this._availableIndex=0}var o=e.prototype;return o.preload=function(){var e=n(a().mark((function e(){var t,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Log.d("preload symbol prefab"),e.next=4,App.cache.getCacheByAsync("prefabs/elements/Symbol",i,l.module);case 4:(n=e.sent)[0],(o=n[1]).addRef(),null==(t=this._prefab)||t.decRef(),this._prefab=o,l.setLoadingTaskProgress("preloadSymbol",1),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),Log.e("failed to preload symbol prefab: "+(e.t0?e.t0.toString():"unknown reason")),e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),o.push=function(e){var t=this._pool.indexOf(e);if(t<0)return!1;if(!e.isValid)return this._pool.splice(t,1),t<=this._availableIndex&&this._availableIndex>0&&--this._availableIndex,!1;e.removeFromParent();var n=e.getComponent(s);return!!n&&(n.reset(),t<this._availableIndex&&(--this._availableIndex,this._pool[t]=this._pool[this._availableIndex],this._pool[this._availableIndex]=e),!0)},o.pop=function(){var e;if(this._pool.length<=0||this._pool.length<=this._availableIndex){if(!this._prefab)return null;this._pool[this._availableIndex]=r(this._prefab)}return null!=(e=this._pool[this._availableIndex++])?e:null},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,o._RF.pop()}}}));

System.register("chunks:///_virtual/Tower.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts","./AudioHelper3.ts"],(function(t){var e,i,n,o,a,r,s,l,h,_,u,c,S,p,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){r=t.cclegacy,s=t._decorator,l=t.sp,h=t.Enum,_=t.Tween,u=t.math,c=t.tween,S=t.Component},function(t){p=t.SubGameData},function(t){d=t.common},function(t){m=t.AudioHelper}],execute:function(){var g,f,A,b,T,R,k,E,I,v,w,C,y,O,U,D,B,L,N,G;r._RF.push({},"993bdJka9lBcbYACQtOrytE","Tower",void 0);var M=s.ccclass,F=s.menu,W=s.property,z=function(t){return t[t.IDLE=0]="IDLE",t[t.INCREASING=1]="INCREASING",t[t.BURSTING=2]="BURSTING",t[t.BURST=3]="BURST",t}(z||{}),H=((g={})[1]="idle",g[2]="increase",g[3]="idle",g[4]="increase",g[5]="idle",g[6]="increase",g[7]="idle",g[8]="increase",g[9]="increase",g[10]="burst",g),P=((f={})[0]=1,f[1]=3,f[2]=5,f[3]=7,f),x=((R={})[0]=((A={})[1]=2,A[3]=8,A),R[1]=((b={})[2]=4,b[3]=9,b),R[2]=((T={})[3]=6,T),R),j=((v={})[0]=((k={})[1]=p.AUDIO_URLS.SE_TOWER_INCREASE_FORM_0_TO_1,k[3]=p.AUDIO_URLS.SE_TOWER_INCREASE_FORM_0_TO_3,k),v[1]=((E={})[2]=p.AUDIO_URLS.SE_TOWER_INCREASE_FORM_1_TO_2,E[3]=p.AUDIO_URLS.SE_TOWER_INCREASE_FORM_1_TO_3,E),v[2]=((I={})[3]=p.AUDIO_URLS.SE_TOWER_INCREASE_FORM_2_TO_3,I),v);t("Tower",(w=M("Tower"),C=F(p.module+"/elements/Tower"),y=W(l.Skeleton),O=W(l.Skeleton),U=W({type:h(d.ETowerType),visible:!0}),w(D=C((L=e((B=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"towerSkeleton",L,o(e)),n(e,"highlightSkeleton",N,o(e)),n(e,"_type",G,o(e)),e._state=z.IDLE,e._progress=-1,e._increasingAnimationCallback=void 0,e._burstingAnimationCallback=void 0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.towerSkeleton.setCompleteListener(this._onTowerSkeletonAnimationComplete.bind(this)),this.highlightSkeleton.setCompleteListener(this._onHighlightSkeletonAnimationComplete.bind(this)),this.highlightSkeleton.enabled=!1},r.reset=function(t){_.stopAllByTarget(this.towerSkeleton),this.updateProgress(t,!1),this.highlightSkeleton.enabled=!1},r.collect=function(){this.highlightSkeleton.enabled||(this.highlightSkeleton.enabled=!0,this.highlightSkeleton.setAnimation(0,"animation"+this._type,!1))},r.updateProgress=function(t,e,i,n){var o,a,r,s=this;if(this._increasingAnimationCallback=void 0,(t=u.clamp(Math.floor(t),0,3))===this._progress)if(e){if(this._state===z.IDLE)return void(null==n||n(this));if(this._state===z.INCREASING)return void(this._increasingAnimationCallback=n)}else if(this._state===z.IDLE)return;_.stopAllByTarget(this.towerSkeleton);var l=this._progress;this._progress=t;var h="animation"+this._type+"_"+(null!=(o=P[t])?o:"");if(!e)return this._state=z.IDLE,void this._addTowerAnimation(h,!0,!0);this._state=z.INCREASING,this._increasingAnimationCallback=n;var S=null==(a=x[l])?void 0:a[this._progress],p="animation"+this._type+"_"+(null!=S?S:""),d=null==(r=j[l])?void 0:r[this._progress];c(this.towerSkeleton).delay(Math.max(0,null!=i?i:0)).call((function(){var t=s._addTowerAnimation(p,!1,!0);s._addTowerAnimation(h,!0,!1),t?d&&m.instance.playOneShotSoundEffect(d):s._afterIncrease()})).start()},r.burst=function(t,e){if(this._progress=0,this._burstingAnimationCallback=void 0,t){if(this._state===z.BURST)return void(null==e||e(this));if(this._state===z.BURSTING)return void(this._burstingAnimationCallback=e)}else if(this._state===z.BURST)return;var i="animation"+this._type+"_10";if(!t)return this._state=z.BURST,void(this._addTowerAnimation(i,!1,!0)&&this.towerSkeleton.updateAnimation(999));this._addTowerAnimation(i,!1,!0)?(this._state=z.BURSTING,this._burstingAnimationCallback=e,m.instance.playOneShotSoundEffect(p.AUDIO_URLS.SE_TOWER_BURST)):(this._state=z.BURST,this.updateProgress(0,!1),null==e||e(this))},r._addTowerAnimation=function(t,e,i){return i&&this.towerSkeleton.clearAnimation(0),!!this.towerSkeleton.findAnimation(t)&&(this.towerSkeleton.addAnimation(0,t,e),!0)},r._afterIncrease=function(){this._state=z.IDLE;var t=this._increasingAnimationCallback;this._increasingAnimationCallback=void 0,null==t||t(this)},r._afterBurst=function(){this._state=z.BURST;var t=this._burstingAnimationCallback;this._burstingAnimationCallback=void 0,null==t||t(this)},r._onTowerSkeletonAnimationComplete=function(t){var e=t.animation.name.split("_");if(e.length>1){var i=H[e[1]];"increase"===i?this._afterIncrease():"burst"===i&&this._afterBurst()}},r._onHighlightSkeletonAnimationComplete=function(t){this.highlightSkeleton.enabled=!1},a(e,[{key:"type",get:function(){return this._type}}]),e}(S)).prototype,"towerSkeleton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(B.prototype,"highlightSkeleton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(B.prototype,"_type",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.ETowerType.RED}}),D=B))||D)||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/TowersLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./Tower.ts"],(function(e){var t,s,r,a,o,i,n,l,E,T,p,u,c,y,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,n=e._decorator,l=e.Animation,E=e.Tween,T=e.tween},function(e){p=e.SubGameData},function(e){u=e.common},function(e){c=e.DisplayTaskManager,y=e.Display},function(e){h=e.Tower}],execute:function(){var g,f,_,d,w,R,F,D,P;i._RF.push({},"1dfab7EGn5JUZ6m8xL/H/a9","TowersLayer",void 0);var m=n.ccclass,L=n.menu,b=n.property,v=((g={})[u.EFeatureType.NONE]="style-0",g[u.EFeatureType.GREEN_TOWER]="style-1",g[u.EFeatureType.BLUE_TOWER]="style-2",g[u.EFeatureType.BLUE_AND_GREEN_TOWER]="style-3",g[u.EFeatureType.RED_TOWER]="style-4",g[u.EFeatureType.RED_AND_GREEN_TOWER]="style-1",g[u.EFeatureType.RED_AND_BLUE_TOWER]="style-2",g[u.EFeatureType.SUPER_TOWER]="style-3",g);e("TowersLayer",(f=m("TowersLayer"),_=L(p.module+"/layers/TowersLayer"),d=b(l),w=b([h]),f(R=_((D=t((F=function(e){function t(){for(var t,s,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return s=e.call.apply(e,[this].concat(i))||this,r(s,"animation",D,a(s)),r(s,"towersList",P,a(s)),s._shouldWaitProgressUpdate=!1,s._targetProgressesHash={},s._collectableScatterExistFlagsHash=((t={})[u.ETowerType.GREEN]=!1,t[u.ETowerType.BLUE]=!1,t[u.ETowerType.RED]=!1,t),s}s(t,e);var i=t.prototype;return i.onLoad=function(){e.prototype.onLoad.call(this),c.addHandler(this)},i.onTaskInitialize=function(e,t){this.stopAllDisplays(),this._shouldWaitProgressUpdate=!1,this._clearTargetProgresses(),this._clearCollectableScatterExistFlags(),this.node.active=t.gameMode!==u.EGameMode.MAP&&t.gameMode!==u.EGameMode.SUPER_MAP,this.animation.play(v[t.featureType]),this.towersList.forEach((function(e){var s;E.stopAllByTarget(e.node),e.reset(null!=(s=t.featureProgressesHash[e.type])?s:0)})),t.gameMode===u.EGameMode.BONUS&&((t.featureType|u.EFeatureType.GREEN_TOWER)>0||(t.featureType|u.EFeatureType.BLUE_TOWER)>0)&&t.totalFreeTimes<=t.freeTimesRemaining&&this.towersList.forEach((function(e){e.type===u.ETowerType.RED&&e.burst(!1)}))},i.onTaskSpinStart=function(e,t){this._shouldWaitProgressUpdate=!1,this._clearTargetProgresses(),this._clearCollectableScatterExistFlags()},i.onTaskSpinStop=function(e,t){this._shouldWaitProgressUpdate=t.shouldWaitFeatureUpdate,this._targetProgressesHash[u.ETowerType.GREEN]=t.featureProgressesHash[u.ETowerType.GREEN],this._targetProgressesHash[u.ETowerType.BLUE]=t.featureProgressesHash[u.ETowerType.BLUE],this._targetProgressesHash[u.ETowerType.RED]=t.featureProgressesHash[u.ETowerType.RED],t.spinType===u.ESpinType.FREE||(this._updateCollectableScatterExistFlags(t.symbolsGroups,u.ETowerType.GREEN),this._updateCollectableScatterExistFlags(t.symbolsGroups,u.ETowerType.BLUE)),this._updateCollectableScatterExistFlags(t.symbolsGroups,u.ETowerType.RED)},i.onTaskBonusGameTrigger=function(e,t){var s=this;this.towersList.forEach((function(e){e.type===u.ETowerType.RED&&(s.startDisplay(),e.burst(!0,(function(){return s.endDisplay()})))}))},i.onTaskBonusGameTransit=function(e,t){"exit"===t.type&&t.shouldResetRedTower&&(this._targetProgressesHash[u.ETowerType.RED]=0)},i.onTaskFreeGameTrigger=function(e,t){var s,r=this,a=((s={})[u.ETowerType.GREEN]=(t.featureType&u.EFeatureType.GREEN_TOWER)>0,s[u.ETowerType.BLUE]=(t.featureType&u.EFeatureType.BLUE_TOWER)>0,s[u.ETowerType.RED]=!1,s);this.towersList.forEach((function(e){a[e.type]&&e.node.active&&(r.startDisplay(),e.burst(!0,(function(){return r.endDisplay()})))}))},i.onTaskFreeGameTransit=function(e,t){this._targetProgressesHash[u.ETowerType.GREEN]=t.featureProgressesHash[u.ETowerType.GREEN],this._targetProgressesHash[u.ETowerType.BLUE]=t.featureProgressesHash[u.ETowerType.BLUE],this._targetProgressesHash[u.ETowerType.RED]=t.featureProgressesHash[u.ETowerType.RED]},i.onTaskChangeGame=function(e,t){var s=this;if(t.previousFeatureType!==t.nextFeatureType)if(this.animation.play(v[t.nextFeatureType]),t.previousFeatureType===u.EFeatureType.RED_TOWER){var r=this._targetProgressesHash[u.ETowerType.RED];null!=r&&this.towersList.forEach((function(e){e.type===u.ETowerType.RED&&e.reset(r)}))}else t.nextFeatureType!==u.EFeatureType.RED_TOWER&&this.towersList.forEach((function(e){var t=s._targetProgressesHash[e.type];null!=t&&e.reset(t)}))},i.onTaskShowMapGame=function(e,t){this.node.active=!1},i.onTaskHideMapGame=function(e,t){this.node.active=!0},i.onTaskReelStop=function(e,t){var s=this;if(0===t.reelIndex){var r=this._shouldWaitProgressUpdate;this.towersList.forEach((function(e){if(e.node.active){var t=s._targetProgressesHash[e.type];null!=t&&(r&&s.startDisplay(),e.updateProgress(t,!0,1.8,(function(){r&&s.endDisplay()}))),s._collectableScatterExistFlagsHash[e.type]&&(E.stopAllByTarget(e.node),T(e.node).delay(1.8).call((function(){e.collect()})).start())}})),this._clearTargetProgresses(),this._clearCollectableScatterExistFlags()}},i._clearTargetProgresses=function(){this._targetProgressesHash[u.ETowerType.GREEN]=void 0,this._targetProgressesHash[u.ETowerType.BLUE]=void 0,this._targetProgressesHash[u.ETowerType.RED]=void 0},i._clearCollectableScatterExistFlags=function(){this._collectableScatterExistFlagsHash[u.ETowerType.GREEN]=!1,this._collectableScatterExistFlagsHash[u.ETowerType.BLUE]=!1,this._collectableScatterExistFlagsHash[u.ETowerType.RED]=!1},i._updateCollectableScatterExistFlags=function(e,t){for(var s,r=o(e);!(s=r()).done;)for(var a,i=s.value,n=o(i);!(a=n()).done;){var l=a.value;if(p.getTowerTypeOnSymbol(l.id)===t)return void(this._collectableScatterExistFlagsHash[t]=!0)}},t}(y)).prototype,"animation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(F.prototype,"towersList",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=F))||R)||R));i._RF.pop()}}}));

System.register("chunks:///_virtual/TransitionLayer2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SubGameData18.ts","./SubGameDefines18.ts","./Display3.ts","./AudioHelper3.ts"],(function(e){var n,t,i,a,o,s,r,l,p,u,m,T,c,S;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,r=e.sp,l=e.tween,p=e.Tween},function(e){u=e.SubGameData},function(e){m=e.common},function(e){T=e.DisplayTaskManager,c=e.Display},function(e){S=e.AudioHelper}],execute:function(){var h,y,f,d,k,G,b,A,_,D,v,E;o._RF.push({},"2cb3aWDWJ1LiIO2NrN2vugC","TransitionLayer",void 0);var g=s.ccclass,F=s.menu,I=s.property,L="animation4";e("TransitionLayer",(h=g("TransitionLayer"),y=F(u.module+"/layers/TransitionLayer"),f=I(r.Skeleton),d=I(r.Skeleton),k=I(r.Skeleton),G=I(r.Skeleton),h(b=y((_=n((A=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o))||this,i(n,"entranceSkeleton",_,a(n)),i(n,"mapGameTransitionSkeleton",D,a(n)),i(n,"freeGameTransitionSkeleton",v,a(n)),i(n,"bonusGameTransitionSkeleton",E,a(n)),n}t(n,e);var o=n.prototype;return o.onLoad=function(){e.prototype.onLoad.call(this),T.addHandler(this),this.mapGameTransitionSkeleton.setCompleteListener(this._onMapGameTransitionSkeletonAnimationComplete.bind(this)),this.freeGameTransitionSkeleton.setCompleteListener(this._onFreeGameTransitionSkeletonAnimationComplete.bind(this)),this.bonusGameTransitionSkeleton.setCompleteListener(this._onBonusGameTransitionSkeletonAnimationComplete.bind(this))},o.onTaskInitialize=function(e,n){this.stopAllDisplays(),this.node.active=!1,this._clearAllTransitionAnimations()},o.onTaskBonusGameTransit=function(e,n){this.stopAllDisplays(),this.startDisplay(),this.node.active=!0,this._clearAllTransitionAnimations();var t=n.previousFeatureTypeBefore,i=m.EFeatureType.RED_TOWER;"exit"===n.type&&(t=m.EFeatureType.RED_TOWER,i=n.previousFeatureTypeBefore),l(this.bonusGameTransitionSkeleton.node).delay(1.7).call((function(){T.runTask("changeGame",{previousFeatureType:t,nextFeatureType:i,previousSymbolsGroups:n.previousSymbolsGroups})})).start(),this.bonusGameTransitionSkeleton.enabled=!0,this.bonusGameTransitionSkeleton.setAnimation(0,"animation",!1),S.instance.playSoundEffect(u.AUDIO_URLS.SE_TRANSITION_BONUS_GAME)},o.onTaskFreeGameTransit=function(e,n){this.stopAllDisplays(),this.startDisplay(),this.node.active=!0,this._clearAllTransitionAnimations();var t=m.EFeatureType.NONE,i=n.featureType;"exit"===n.type&&(t=n.featureType,i=m.EFeatureType.NONE),l(this.freeGameTransitionSkeleton.node).delay(2.2).call((function(){T.runTask("changeGame",{previousFeatureType:t,nextFeatureType:i,previousSymbolsGroups:n.previousSymbolsGroups})})).start(),this.freeGameTransitionSkeleton.enabled=!0,this.freeGameTransitionSkeleton.setAnimation(0,L,!1),S.instance.playSoundEffect(u.AUDIO_URLS.SE_TRANSITION_FREE_GAME)},o.onTaskMapGameTransit=function(e,n){this.stopAllDisplays(),this.startDisplay(),this.node.active=!0,this._clearAllTransitionAnimations(),l(this.mapGameTransitionSkeleton.node).delay(1.35).call((function(){T.runTask("hideMapGame",{mapStageID:n.mapStageID,mapStageInfo:n.mapStageInfo})})).start(),this.mapGameTransitionSkeleton.enabled=!0,this.mapGameTransitionSkeleton.setAnimation(0,"animation",!1),S.instance.playSoundEffect(u.AUDIO_URLS.SE_TRANSITION_MAP_GAME)},o._clearAllTransitionAnimations=function(){p.stopAllByTarget(this.mapGameTransitionSkeleton.node),p.stopAllByTarget(this.freeGameTransitionSkeleton.node),p.stopAllByTarget(this.bonusGameTransitionSkeleton.node),this.entranceSkeleton.enabled=!1,this.mapGameTransitionSkeleton.enabled=!1,this.freeGameTransitionSkeleton.enabled=!1,this.bonusGameTransitionSkeleton.enabled=!1},o._onMapGameTransitionSkeletonAnimationComplete=function(e){this.node.active=!1,this.mapGameTransitionSkeleton.enabled=!0,this.endDisplay()},o._onFreeGameTransitionSkeletonAnimationComplete=function(e){e.animation.name===L&&(this.node.active=!1,this.freeGameTransitionSkeleton.enabled=!0,this.endDisplay())},o._onBonusGameTransitionSkeletonAnimationComplete=function(e){this.node.active=!1,this.bonusGameTransitionSkeleton.enabled=!0,this.endDisplay()},n}(c)).prototype,"entranceSkeleton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(A.prototype,"mapGameTransitionSkeleton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(A.prototype,"freeGameTransitionSkeleton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(A.prototype,"bonusGameTransitionSkeleton",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=A))||b)||b));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/slot390000012', 'chunks:///_virtual/slot390000012'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});